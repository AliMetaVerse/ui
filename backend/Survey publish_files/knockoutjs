function escapeHtml(n){return n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}(function(){var n=!1;(function(t){var u=this||eval("this"),i=u.document,e=u.navigator,r=u.jQuery,f=u.JSON;(function(n){typeof define=="function"&&define.amd?define(["exports","require"],n):typeof exports=="object"&&typeof module=="object"?n(module.exports||exports):n(u.ko={})})(function(o,s){function nt(n,t){var i=n===null||typeof n in ft;return i?n===t:!1}function et(n,i){var r;return function(){r||(r=h.utils.setTimeout(function(){r=t;n()},i))}}function ot(n,t){var i;return function(){clearTimeout(i);i=h.utils.setTimeout(n,t)}}function st(n){var t=this;return n&&h.utils.objectForEach(n,function(n,i){var r=h.extenders[n];typeof r=="function"&&(t=r(t,i)||t)}),t}function ht(n,t){t&&t!==y?t==="beforeChange"?this._limitBeforeChange(n):this._origNotifySubscribers(n,t):this._limitChange(n)}function ct(n,t){t!==null&&t.dispose&&t.dispose()}function lt(n,t){var i=this.computedObservable,r=i[c];r.isDisposed||(this.disposalCount&&this.disposalCandidates[t]?(i.addDependencyTracking(t,n,this.disposalCandidates[t]),this.disposalCandidates[t]=null,--this.disposalCount):r.dependencyTracking[t]||i.addDependencyTracking(t,n,r.isSleeping?{_target:n}:i.subscribeToDependency(n)),n._notificationIsPending&&n._notifyNextChangeIfValueIsDifferent())}function yt(n){h.bindingHandlers[n]={init:function(t,i,r,u,f){var e=function(){var t={};return t[n]=i(),t};return h.bindingHandlers.event.init.call(this,t,e,r,u,f)}}}function ut(n,t,i,r){h.bindingHandlers[n]={init:function(n,u,f,e,o){var c,s;return h.computed(function(){var l=u(),a=h.utils.unwrapObservable(l),f=!i!=!a,e=!s,v=e||t||f!==c;v&&(e&&h.computedContext.getDependenciesCount()&&(s=h.utils.cloneNodes(h.virtualElements.childNodes(n),!0)),f?(e||h.virtualElements.setDomNodeChildren(n,h.utils.cloneNodes(s)),h.applyBindingsToDescendants(r?r(o,l):o,n)):h.virtualElements.emptyNode(n),c=f)},null,{disposeWhenNodeIsRemoved:n}),{controlsDescendantBindings:!0}}};h.expressionRewriting.bindingRewriteValidators[n]=!1;h.virtualElements.allowedBindings[n]=!0}var h=typeof o!="undefined"?o:{},ft,y,a,p,v,w,b,c,tt,it,rt,k,d,g;h.exportSymbol=function(n,t){for(var i=n.split("."),u=h,r=0;r<i.length-1;r++)u=u[i[r]];u[i[i.length-1]]=t};h.exportProperty=function(n,t,i){n[t]=i};h.version="3.4.2";h.exportSymbol("version",h.version);h.options={deferUpdates:!1,useOnlyNativeEvents:!1};h.utils=function(){function c(n,t){for(var i in n)n.hasOwnProperty(i)&&t(i,n[i])}function a(n,t){if(t)for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);return n}function v(n,t){return n.__proto__=t,n}function tt(n,t){if(h.utils.tagNameLower(n)!=="input"||!n.type||t.toLowerCase()!="click")return!1;var i=n.type;return i=="checkbox"||i=="radio"}function it(n,t,i){var r;t&&(typeof n.classList=="object"?(r=n.classList[i?"add":"remove"],h.utils.arrayForEach(t.match(s),function(t){r.call(n.classList,t)})):typeof n.className.baseVal=="string"?w(n.className,"baseVal",t,i):w(n,"className",t,i))}function w(n,t,i,r){var u=n[t].match(s)||[];h.utils.arrayForEach(i.match(s),function(n){h.utils.addOrRemoveItem(u,n,r)});n[t]=u.join(" ")}var y={__proto__:[]}instanceof Array,b=!n&&typeof Symbol=="function",l={},p={},k=e&&/Firefox\/2/i.test(e.userAgent)?"KeyboardEvent":"UIEvents",s;l[k]=["keyup","keydown","keypress"];l.MouseEvents=["click","dblclick","mousedown","mouseup","mousemove","mouseover","mouseout","mouseenter","mouseleave"];c(l,function(n,t){if(t.length)for(var i=0,r=t.length;i<r;i++)p[t[i]]=n});var d={propertychange:!0},o=i&&function(){for(var n=3,r=i.createElement("div"),u=r.getElementsByTagName("i");r.innerHTML="<!--[if gt IE "+ ++n+"]><i><\/i><![endif]-->",u[0];);return n>4?n:t}(),g=o===6,nt=o===7;return s=/\S+/g,{fieldsIncludedWithJsonPost:["authenticity_token",/^__RequestVerificationToken(_.*)?$/],arrayForEach:function(n,t){for(var i=0,r=n.length;i<r;i++)t(n[i],i)},arrayIndexOf:function(n,t){if(typeof Array.prototype.indexOf=="function")return Array.prototype.indexOf.call(n,t);for(var i=0,r=n.length;i<r;i++)if(n[i]===t)return i;return-1},arrayFirst:function(n,t,i){for(var r=0,u=n.length;r<u;r++)if(t.call(i,n[r],r))return n[r];return null},arrayRemoveItem:function(n,t){var i=h.utils.arrayIndexOf(n,t);i>0?n.splice(i,1):i===0&&n.shift()},arrayGetDistinctValues:function(n){var i,t,r;for(n=n||[],i=[],t=0,r=n.length;t<r;t++)h.utils.arrayIndexOf(i,n[t])<0&&i.push(n[t]);return i},arrayMap:function(n,t){var r,i,u;for(n=n||[],r=[],i=0,u=n.length;i<u;i++)r.push(t(n[i],i));return r},arrayFilter:function(n,t){var r,i,u;for(n=n||[],r=[],i=0,u=n.length;i<u;i++)t(n[i],i)&&r.push(n[i]);return r},arrayPushAll:function(n,t){if(t instanceof Array)n.push.apply(n,t);else for(var i=0,r=t.length;i<r;i++)n.push(t[i]);return n},addOrRemoveItem:function(n,t,i){var r=h.utils.arrayIndexOf(h.utils.peekObservable(n),t);r<0?i&&n.push(t):i||n.splice(r,1)},canSetPrototype:y,extend:a,setPrototypeOf:v,setPrototypeOfOrExtend:y?v:a,objectForEach:c,objectMap:function(n,t){var r,i;if(!n)return n;r={};for(i in n)n.hasOwnProperty(i)&&(r[i]=t(n[i],i,n));return r},emptyDomNode:function(n){while(n.firstChild)h.removeNode(n.firstChild)},moveCleanedNodesToContainerElement:function(n){for(var t=h.utils.makeArray(n),e=t[0]&&t[0].ownerDocument||i,u=e.createElement("div"),r=0,f=t.length;r<f;r++)u.appendChild(h.cleanNode(t[r]));return u},cloneNodes:function(n,t){for(var r,i=0,f=n.length,u=[];i<f;i++)r=n[i].cloneNode(!0),u.push(t?h.cleanNode(r):r);return u},setDomNodeChildren:function(n,t){if(h.utils.emptyDomNode(n),t)for(var i=0,r=t.length;i<r;i++)n.appendChild(t[i])},replaceDomNodes:function(n,t){var u=n.nodeType?[n]:n,f,e,i,r;if(u.length>0){for(f=u[0],e=f.parentNode,i=0,r=t.length;i<r;i++)e.insertBefore(t[i],f);for(i=0,r=u.length;i<r;i++)h.removeNode(u[i])}},fixUpContinuousNodeArray:function(n,t){if(n.length){for(t=t.nodeType===8&&t.parentNode||t;n.length&&n[0].parentNode!==t;)n.splice(0,1);while(n.length>1&&n[n.length-1].parentNode!==t)n.length--;if(n.length>1){var i=n[0],r=n[n.length-1];for(n.length=0;i!==r;)n.push(i),i=i.nextSibling;n.push(r)}}return n},setOptionNodeSelectionState:function(n,t){o<7?n.setAttribute("selected",t):n.selected=t},stringTrim:function(n){return n===null||n===t?"":n.trim?n.trim():n.toString().replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},stringStartsWith:function(n,t){return(n=n||"",t.length>n.length)?!1:n.substring(0,t.length)===t},domNodeIsContainedBy:function(n,t){if(n===t)return!0;if(n.nodeType===11)return!1;if(t.contains)return t.contains(n.nodeType===3?n.parentNode:n);if(t.compareDocumentPosition)return(t.compareDocumentPosition(n)&16)==16;while(n&&n!=t)n=n.parentNode;return!!n},domNodeIsAttachedToDocument:function(n){return h.utils.domNodeIsContainedBy(n,n.ownerDocument.documentElement)},anyDomNodeIsAttachedToDocument:function(n){return!!h.utils.arrayFirst(n,h.utils.domNodeIsAttachedToDocument)},tagNameLower:function(n){return n&&n.tagName&&n.tagName.toLowerCase()},catchFunctionErrors:function(n){return h.onError?function(){try{return n.apply(this,arguments)}catch(t){h.onError&&h.onError(t);throw t;}}:n},setTimeout:function(n,t){return setTimeout(h.utils.catchFunctionErrors(n),t)},deferError:function(n){setTimeout(function(){h.onError&&h.onError(n);throw n;},0)},registerEventHandler:function(n,t,i){var u=h.utils.catchFunctionErrors(i),s=o&&d[t],f,e;if(h.options.useOnlyNativeEvents||s||!r)if(s||typeof n.addEventListener!="function")if(typeof n.attachEvent!="undefined")f=function(t){u.call(n,t)},e="on"+t,n.attachEvent(e,f),h.utils.domNodeDisposal.addDisposeCallback(n,function(){n.detachEvent(e,f)});else throw new Error("Browser doesn't support addEventListener or attachEvent");else n.addEventListener(t,u,!1);else r(n).bind(t,u)},triggerEvent:function(n,t){var f,o,e;if(!(n&&n.nodeType))throw new Error("element must be a DOM node when calling triggerEvent");if(f=tt(n,t),h.options.useOnlyNativeEvents||!r||f)if(typeof i.createEvent=="function")if(typeof n.dispatchEvent=="function")o=p[t]||"HTMLEvents",e=i.createEvent(o),e.initEvent(t,!0,!0,u,0,0,0,0,0,!1,!1,!1,!1,0,n),n.dispatchEvent(e);else throw new Error("The supplied element doesn't support dispatchEvent");else if(f&&n.click)n.click();else if(typeof n.fireEvent!="undefined")n.fireEvent("on"+t);else throw new Error("Browser doesn't support triggering events");else r(n).trigger(t)},unwrapObservable:function(n){return h.isObservable(n)?n():n},peekObservable:function(n){return h.isObservable(n)?n.peek():n},toggleDomNodeCssClass:it,setTextContent:function(n,i){var r=h.utils.unwrapObservable(i),u;(r===null||r===t)&&(r="");u=h.virtualElements.firstChild(n);!u||u.nodeType!=3||h.virtualElements.nextSibling(u)?h.virtualElements.setDomNodeChildren(n,[n.ownerDocument.createTextNode(r)]):u.data=r;h.utils.forceRefresh(n)},setElementName:function(n,t){if(n.name=t,o<=7)try{n.mergeAttributes(i.createElement("<input name='"+n.name+"'/>"),!1)}catch(r){}},forceRefresh:function(n){if(o>=9){var t=n.nodeType==1?n:n.parentNode;t.style&&(t.style.zoom=t.style.zoom)}},ensureSelectElementIsRenderedCorrectly:function(n){if(o){var t=n.style.width;n.style.width=0;n.style.width=t}},range:function(n,t){var r,i;for(n=h.utils.unwrapObservable(n),t=h.utils.unwrapObservable(t),r=[],i=n;i<=t;i++)r.push(i);return r},makeArray:function(n){for(var i=[],t=0,r=n.length;t<r;t++)i.push(n[t]);return i},createSymbolOrString:function(n){return b?Symbol(n):n},isIe6:g,isIe7:nt,ieVersion:o,getFormFields:function(n,t){for(var r=h.utils.makeArray(n.getElementsByTagName("input")).concat(h.utils.makeArray(n.getElementsByTagName("textarea"))),f=typeof t=="string"?function(n){return n.name===t}:function(n){return t.test(n.name)},u=[],i=r.length-1;i>=0;i--)f(r[i])&&u.push(r[i]);return u},parseJson:function(n){return typeof n=="string"&&(n=h.utils.stringTrim(n),n)?f&&f.parse?f.parse(n):new Function("return "+n)():null},stringifyJson:function(n,t,i){if(!f||!f.stringify)throw new Error("Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js");return f.stringify(h.utils.unwrapObservable(n),t,i)},postJson:function(n,t,r){var l,o,s,f,u,a,e;r=r||{};var v=r.params||{},y=r.includeFields||this.fieldsIncludedWithJsonPost,p=n;if(typeof n=="object"&&h.utils.tagNameLower(n)==="form")for(l=n,p=l.action,o=y.length-1;o>=0;o--)for(s=h.utils.getFormFields(l,y[o]),f=s.length-1;f>=0;f--)v[s[f].name]=s[f].value;t=h.utils.unwrapObservable(t);u=i.createElement("form");u.style.display="none";u.action=p;u.method="post";for(a in t)e=i.createElement("input"),e.type="hidden",e.name=a,e.value=h.utils.stringifyJson(h.utils.unwrapObservable(t[a])),u.appendChild(e);c(v,function(n,t){var r=i.createElement("input");r.type="hidden";r.name=n;r.value=t;u.appendChild(r)});i.body.appendChild(u);r.submitter?r.submitter(u):u.submit();setTimeout(function(){u.parentNode.removeChild(u)},0)}}}();h.exportSymbol("utils",h.utils);h.exportSymbol("utils.arrayForEach",h.utils.arrayForEach);h.exportSymbol("utils.arrayFirst",h.utils.arrayFirst);h.exportSymbol("utils.arrayFilter",h.utils.arrayFilter);h.exportSymbol("utils.arrayGetDistinctValues",h.utils.arrayGetDistinctValues);h.exportSymbol("utils.arrayIndexOf",h.utils.arrayIndexOf);h.exportSymbol("utils.arrayMap",h.utils.arrayMap);h.exportSymbol("utils.arrayPushAll",h.utils.arrayPushAll);h.exportSymbol("utils.arrayRemoveItem",h.utils.arrayRemoveItem);h.exportSymbol("utils.extend",h.utils.extend);h.exportSymbol("utils.fieldsIncludedWithJsonPost",h.utils.fieldsIncludedWithJsonPost);h.exportSymbol("utils.getFormFields",h.utils.getFormFields);h.exportSymbol("utils.peekObservable",h.utils.peekObservable);h.exportSymbol("utils.postJson",h.utils.postJson);h.exportSymbol("utils.parseJson",h.utils.parseJson);h.exportSymbol("utils.registerEventHandler",h.utils.registerEventHandler);h.exportSymbol("utils.stringifyJson",h.utils.stringifyJson);h.exportSymbol("utils.range",h.utils.range);h.exportSymbol("utils.toggleDomNodeCssClass",h.utils.toggleDomNodeCssClass);h.exportSymbol("utils.triggerEvent",h.utils.triggerEvent);h.exportSymbol("utils.unwrapObservable",h.utils.unwrapObservable);h.exportSymbol("utils.objectForEach",h.utils.objectForEach);h.exportSymbol("utils.addOrRemoveItem",h.utils.addOrRemoveItem);h.exportSymbol("utils.setTextContent",h.utils.setTextContent);h.exportSymbol("unwrap",h.utils.unwrapObservable);Function.prototype.bind||(Function.prototype.bind=function(n){var t=this,i;return arguments.length===1?function(){return t.apply(n,arguments)}:(i=Array.prototype.slice.call(arguments,1),function(){var r=i.slice(0);return r.push.apply(r,arguments),t.apply(n,r)})});h.utils.domData=new function(){function r(r,f){var e=r[n],o=e&&e!=="null"&&i[e];if(!o){if(!f)return t;e=r[n]="ko"+u++;i[e]={}}return i[e]}var u=0,n="__ko__"+(new Date).getTime(),i={};return{get:function(n,i){var u=r(n,!1);return u===t?t:u[i]},set:function(n,i,u){if(u!==t||r(n,!1)!==t){var f=r(n,!0);f[i]=u}},clear:function(t){var r=t[n];return r?(delete i[r],t[n]=null,!0):!1},nextKey:function(){return u+++n}}};h.exportSymbol("utils.domData",h.utils.domData);h.exportSymbol("utils.domData.clear",h.utils.domData.clear);h.utils.domNodeDisposal=new function(){function i(i,r){var u=h.utils.domData.get(i,n);return u===t&&r&&(u=[],h.utils.domData.set(i,n,u)),u}function o(i){h.utils.domData.set(i,n,t)}function u(n){var t=i(n,!1),r;if(t)for(t=t.slice(0),r=0;r<t.length;r++)t[r](n);h.utils.domData.clear(n);h.utils.domNodeDisposal.cleanExternalData(n);f[n.nodeType]&&s(n)}function s(n){for(var t,i=n.firstChild;t=i;)i=t.nextSibling,t.nodeType===8&&u(t)}var n=h.utils.domData.nextKey(),e={1:!0,8:!0,9:!0},f={1:!0,9:!0};return{addDisposeCallback:function(n,t){if(typeof t!="function")throw new Error("Callback must be a function");i(n,!0).push(t)},removeDisposeCallback:function(n,t){var r=i(n,!1);r&&(h.utils.arrayRemoveItem(r,t),r.length==0&&o(n))},cleanNode:function(n){var t,i,r;if(e[n.nodeType]&&(u(n),f[n.nodeType]))for(t=[],h.utils.arrayPushAll(t,n.getElementsByTagName("*")),i=0,r=t.length;i<r;i++)u(t[i]);return n},removeNode:function(n){h.cleanNode(n);n.parentNode&&n.parentNode.removeChild(n)},cleanExternalData:function(n){r&&typeof r.cleanData=="function"&&r.cleanData([n])}}};h.cleanNode=h.utils.domNodeDisposal.cleanNode;h.removeNode=h.utils.domNodeDisposal.removeNode;h.exportSymbol("cleanNode",h.cleanNode);h.exportSymbol("removeNode",h.removeNode);h.exportSymbol("utils.domNodeDisposal",h.utils.domNodeDisposal);h.exportSymbol("utils.domNodeDisposal.addDisposeCallback",h.utils.domNodeDisposal.addDisposeCallback);h.exportSymbol("utils.domNodeDisposal.removeDisposeCallback",h.utils.domNodeDisposal.removeDisposeCallback),function(){function l(n){var t=n.match(/^<([a-z]+)[ >]/);return t&&c[t[1]]||s}function a(n,t){t||(t=i);var e=t.parentWindow||t.defaultView||u,c=h.utils.stringTrim(n).toLowerCase(),r=t.createElement("div"),f=l(c),a=f[0],s="ignored<div>"+f[1]+n+f[2]+"<\/div>";for(typeof e.innerShiv=="function"?r.appendChild(e.innerShiv(s)):(o&&t.appendChild(r),r.innerHTML=s,o&&r.parentNode.removeChild(r));a--;)r=r.lastChild;return h.utils.makeArray(r.lastChild.childNodes)}function v(n,t){var u,i;if(r.parseHTML)return r.parseHTML(n,t)||[];if(u=r.clean([n],t),u&&u[0]){for(i=u[0];i.parentNode&&i.parentNode.nodeType!==11;)i=i.parentNode;i.parentNode&&i.parentNode.removeChild(i)}return u}var s=[0,"",""],n=[1,"<table>","<\/table>"],f=[3,"<table><tbody><tr>","<\/tr><\/tbody><\/table>"],e=[1,"<select multiple='multiple'>","<\/select>"],c={thead:n,tbody:n,tfoot:n,tr:[2,"<table><tbody>","<\/tbody><\/table>"],td:f,th:f,option:e,optgroup:e},o=h.utils.ieVersion<=8;h.utils.parseHtmlFragment=function(n,t){return r?v(n,t):a(n,t)};h.utils.setHtml=function(n,i){var f,u;if(h.utils.emptyDomNode(n),i=h.utils.unwrapObservable(i),i!==null&&i!==t)if(typeof i!="string"&&(i=i.toString()),r)r(n).html(i);else for(f=h.utils.parseHtmlFragment(i,n.ownerDocument),u=0;u<f.length;u++)n.appendChild(f[u])}}();h.exportSymbol("utils.parseHtmlFragment",h.utils.parseHtmlFragment);h.exportSymbol("utils.setHtml",h.utils.setHtml);h.memoization=function(){function i(){return((1+Math.random())*4294967296|0).toString(16).substring(1)}function u(){return i()+i()}function r(n,t){var i;if(n)if(n.nodeType==8)i=h.memoization.parseMemoText(n.nodeValue),i!=null&&t.push({domNode:n,memoId:i});else if(n.nodeType==1)for(var u=0,f=n.childNodes,e=f.length;u<e;u++)r(f[u],t)}var n={};return{memoize:function(t){if(typeof t!="function")throw new Error("You can only pass a function to ko.memoization.memoize()");var i=u();return n[i]=t,"<!--[ko_memo:"+i+"]-->"},unmemoize:function(i,r){var u=n[i];if(u===t)throw new Error("Couldn't find any memo with ID "+i+". Perhaps it's already been unmemoized.");try{return u.apply(null,r||[]),!0}finally{delete n[i]}},unmemoizeDomNodeAndDescendants:function(n,t){var f=[],u,o,i,e;for(r(n,f),u=0,o=f.length;u<o;u++)i=f[u].domNode,e=[i],t&&h.utils.arrayPushAll(e,t),h.memoization.unmemoize(f[u].memoId,e),i.nodeValue="",i.parentNode&&i.parentNode.removeChild(i)},parseMemoText:function(n){var t=n.match(/^\[ko_memo\:(.*?)\]$/);return t?t[1]:null}}}();h.exportSymbol("memoization",h.memoization);h.exportSymbol("memoization.memoize",h.memoization.memoize);h.exportSymbol("memoization.unmemoize",h.memoization.unmemoize);h.exportSymbol("memoization.parseMemoText",h.memoization.parseMemoText);h.exportSymbol("memoization.unmemoizeDomNodeAndDescendants",h.memoization.unmemoizeDomNodeAndDescendants);h.tasks=function(){function o(){var i,u,f;if(n)for(i=n,u=0;t<n;)if(f=r[t++]){if(t>i){if(++u>=5e3){t=n;h.utils.deferError(Error("'Too much recursion' after processing "+u+" task groups."));break}i=n}try{f()}catch(e){h.utils.deferError(e)}}}function s(){o();t=n=r.length=0}function c(){h.tasks.scheduler(s)}var f,r=[],n=0,e=1,t=0;return f=u.MutationObserver?function(n){var t=i.createElement("div");return new MutationObserver(n).observe(t,{attributes:!0}),function(){t.classList.toggle("foo")}}(s):i&&"onreadystatechange"in i.createElement("script")?function(n){var t=i.createElement("script");t.onreadystatechange=function(){t.onreadystatechange=null;i.documentElement.removeChild(t);t=null;n()};i.documentElement.appendChild(t)}:function(n){setTimeout(n,0)},{scheduler:f,schedule:function(t){return n||c(),r[n++]=t,e++},cancel:function(i){var u=i-(e-n);u>=t&&u<n&&(r[u]=null)},resetForTesting:function(){var i=n-t;return t=n=r.length=0,i},runEarly:o}}();h.exportSymbol("tasks",h.tasks);h.exportSymbol("tasks.schedule",h.tasks.schedule);h.exportSymbol("tasks.runEarly",h.tasks.runEarly);h.extenders={throttle:function(n,t){n.throttleEvaluation=t;var i=null;return h.dependentObservable({read:n,write:function(r){clearTimeout(i);i=h.utils.setTimeout(function(){n(r)},t)}})},rateLimit:function(n,t){var i,r,u;typeof t=="number"?i=t:(i=t.timeout,r=t.method);n._deferUpdates=!1;u=r=="notifyWhenChangesStop"?ot:et;n.limit(function(n){return u(n,i)})},deferred:function(n,i){if(i!==!0)throw new Error("The 'deferred' extender only accepts the value 'true', because it is not supported to turn deferral off once enabled.");n._deferUpdates||(n._deferUpdates=!0,n.limit(function(i){var u,r=!1;return function(){if(!r){h.tasks.cancel(u);u=h.tasks.schedule(i);try{r=!0;n.notifySubscribers(t,"dirty")}finally{r=!1}}}}))},notify:function(n,t){n.equalityComparer=t=="always"?null:nt}};ft={undefined:1,boolean:1,number:1,string:1};h.exportSymbol("extenders",h.extenders);h.subscription=function(n,t,i){this._target=n;this.callback=t;this.disposeCallback=i;this.isDisposed=!1;h.exportProperty(this,"dispose",this.dispose)};h.subscription.prototype.dispose=function(){this.isDisposed=!0;this.disposeCallback()};h.subscribable=function(){h.utils.setPrototypeOfOrExtend(this,a);a.init(this)};y="change";a={init:function(n){n._subscriptions={change:[]};n._versionNumber=1},subscribe:function(n,t,i){var r=this,f,u;return i=i||y,f=t?n.bind(t):n,u=new h.subscription(r,f,function(){h.utils.arrayRemoveItem(r._subscriptions[i],u);r.afterSubscriptionRemove&&r.afterSubscriptionRemove(i)}),r.beforeSubscriptionAdd&&r.beforeSubscriptionAdd(i),r._subscriptions[i]||(r._subscriptions[i]=[]),r._subscriptions[i].push(u),u},notifySubscribers:function(n,t){var u,i,r;if(t=t||y,t===y&&this.updateVersion(),this.hasSubscriptionsForEvent(t)){u=t===y&&this._changeSubscriptions||this._subscriptions[t].slice(0);try{for(h.dependencyDetection.begin(),i=0;r=u[i];++i)r.isDisposed||r.callback(n)}finally{h.dependencyDetection.end()}}},getVersion:function(){return this._versionNumber},hasChanged:function(n){return this.getVersion()!==n},updateVersion:function(){++this._versionNumber},limit:function(n){var t=this,o=h.isObservable(t),u,f,r,i,s="beforeChange",e;t._origNotifySubscribers||(t._origNotifySubscribers=t.notifySubscribers,t.notifySubscribers=ht);e=n(function(){t._notificationIsPending=!1;o&&i===t&&(i=t._evalIfChanged?t._evalIfChanged():t());var n=f||t.isDifferent(r,i);f=u=!1;n&&t._origNotifySubscribers(r=i)});t._limitChange=function(n){t._changeSubscriptions=t._subscriptions[y].slice(0);t._notificationIsPending=u=!0;i=n;e()};t._limitBeforeChange=function(n){u||(r=n,t._origNotifySubscribers(n,s))};t._notifyNextChangeIfValueIsDifferent=function(){t.isDifferent(r,t.peek(!0))&&(f=!0)}},hasSubscriptionsForEvent:function(n){return this._subscriptions[n]&&this._subscriptions[n].length},getSubscriptionsCount:function(n){if(n)return this._subscriptions[n]&&this._subscriptions[n].length||0;var t=0;return h.utils.objectForEach(this._subscriptions,function(n,i){n!=="dirty"&&(t+=i.length)}),t},isDifferent:function(n,t){return!this.equalityComparer||!this.equalityComparer(n,t)},extend:st};h.exportProperty(a,"subscribe",a.subscribe);h.exportProperty(a,"extend",a.extend);h.exportProperty(a,"getSubscriptionsCount",a.getSubscriptionsCount);h.utils.canSetPrototype&&h.utils.setPrototypeOf(a,Function.prototype);h.subscribable.fn=a;h.isSubscribable=function(n){return n!=null&&typeof n.subscribe=="function"&&typeof n.notifySubscribers=="function"};h.exportSymbol("subscribable",h.subscribable);h.exportSymbol("isSubscribable",h.isSubscribable);h.computedContext=h.dependencyDetection=function(){function f(){return++u}function i(i){t.push(n);n=i}function r(){n=t.pop()}var t=[],n,u=0;return{begin:i,end:r,registerDependency:function(t){if(n){if(!h.isSubscribable(t))throw new Error("Only subscribable things can act as dependencies");n.callback.call(n.callbackTarget,t,t._id||(t._id=f()))}},ignore:function(n,t,u){try{return i(),n.apply(t,u||[])}finally{r()}},getDependenciesCount:function(){if(n)return n.computed.getDependenciesCount()},isInitial:function(){if(n)return n.isInitial}}}();h.exportSymbol("computedContext",h.computedContext);h.exportSymbol("computedContext.getDependenciesCount",h.computedContext.getDependenciesCount);h.exportSymbol("computedContext.isInitial",h.computedContext.isInitial);h.exportSymbol("ignoreDependencies",h.ignoreDependencies=h.dependencyDetection.ignore);p=h.utils.createSymbolOrString("_latestValue");h.observable=function(n){function t(){return arguments.length>0?(t.isDifferent(t[p],arguments[0])&&(t.valueWillMutate(),t[p]=arguments[0],t.valueHasMutated()),this):(h.dependencyDetection.registerDependency(t),t[p])}return t[p]=n,h.utils.canSetPrototype||h.utils.extend(t,h.subscribable.fn),h.subscribable.fn.init(t),h.utils.setPrototypeOfOrExtend(t,v),h.options.deferUpdates&&h.extenders.deferred(t,!0),t};v={equalityComparer:nt,peek:function(){return this[p]},valueHasMutated:function(){this.notifySubscribers(this[p])},valueWillMutate:function(){this.notifySubscribers(this[p],"beforeChange")}};h.utils.canSetPrototype&&h.utils.setPrototypeOf(v,h.subscribable.fn);w=h.observable.protoProperty="__ko_proto__";v[w]=h.observable;h.hasPrototype=function(n,i){return n===null||n===t||n[w]===t?!1:n[w]===i?!0:h.hasPrototype(n[w],i)};h.isObservable=function(n){return h.hasPrototype(n,h.observable)};h.isWriteableObservable=function(n){return typeof n=="function"&&n[w]===h.observable?!0:typeof n=="function"&&n[w]===h.dependentObservable&&n.hasWriteFunction?!0:!1};h.exportSymbol("observable",h.observable);h.exportSymbol("isObservable",h.isObservable);h.exportSymbol("isWriteableObservable",h.isWriteableObservable);h.exportSymbol("isWritableObservable",h.isWriteableObservable);h.exportSymbol("observable.fn",v);h.exportProperty(v,"peek",v.peek);h.exportProperty(v,"valueHasMutated",v.valueHasMutated);h.exportProperty(v,"valueWillMutate",v.valueWillMutate);h.observableArray=function(n){if(n=n||[],typeof n!="object"||!("length"in n))throw new Error("The argument passed when initializing an observable array must be an array, or null, or undefined.");var t=h.observable(n);return h.utils.setPrototypeOfOrExtend(t,h.observableArray.fn),t.extend({trackArrayChanges:!0})};h.observableArray.fn={remove:function(n){for(var r=this.peek(),i=[],f=typeof n=="function"&&!h.isObservable(n)?n:function(t){return t===n},u,t=0;t<r.length;t++)u=r[t],f(u)&&(i.length===0&&this.valueWillMutate(),i.push(u),r.splice(t,1),t--);return i.length&&this.valueHasMutated(),i},removeAll:function(n){if(n===t){var i=this.peek(),r=i.slice(0);return this.valueWillMutate(),i.splice(0,i.length),this.valueHasMutated(),r}return n?this.remove(function(t){return h.utils.arrayIndexOf(n,t)>=0}):[]},destroy:function(n){var i=this.peek(),u=typeof n=="function"&&!h.isObservable(n)?n:function(t){return t===n},t,r;for(this.valueWillMutate(),t=i.length-1;t>=0;t--)r=i[t],u(r)&&(i[t]._destroy=!0);this.valueHasMutated()},destroyAll:function(n){return n===t?this.destroy(function(){return!0}):n?this.destroy(function(t){return h.utils.arrayIndexOf(n,t)>=0}):[]},indexOf:function(n){var t=this();return h.utils.arrayIndexOf(t,n)},replace:function(n,t){var i=this.indexOf(n);i>=0&&(this.valueWillMutate(),this.peek()[i]=t,this.valueHasMutated())}};h.utils.canSetPrototype&&h.utils.setPrototypeOf(h.observableArray.fn,h.observable.fn);h.utils.arrayForEach(["pop","push","reverse","shift","sort","splice","unshift"],function(n){h.observableArray.fn[n]=function(){var t=this.peek(),i;return this.valueWillMutate(),this.cacheDiffForKnownOperation(t,n,arguments),i=t[n].apply(t,arguments),this.valueHasMutated(),i===t?this:i}});h.utils.arrayForEach(["slice"],function(n){h.observableArray.fn[n]=function(){var t=this();return t[n].apply(t,arguments)}});h.exportSymbol("observableArray",h.observableArray);b="arrayChange";h.extenders.trackArrayChanges=function(n,i){function l(){if(!f){f=!0;u=n.notifySubscribers;n.notifySubscribers=function(n,t){return t&&t!==y||++e,u.apply(this,arguments)};var t=[].concat(n.peek()||[]);r=null;o=n.subscribe(function(i){if(i=[].concat(i||[]),n.hasSubscriptionsForEvent(b))var u=a(t,i);t=i;r=null;e=0;u&&u.length&&n.notifySubscribers(u,b)})}}function a(t,i){return(!r||e>1)&&(r=h.utils.compareArrays(t,i,n.compareArrayOptions)),r}if(n.compareArrayOptions={},i&&typeof i=="object"&&h.utils.extend(n.compareArrayOptions,i),n.compareArrayOptions.sparse=!0,!n.cacheDiffForKnownOperation){var f=!1,r=null,o,e=0,u,s=n.beforeSubscriptionAdd,c=n.afterSubscriptionRemove;n.beforeSubscriptionAdd=function(t){s&&s.call(n,t);t===b&&l()};n.afterSubscriptionRemove=function(i){c&&c.call(n,i);i!==b||n.hasSubscriptionsForEvent(b)||(u&&(n.notifySubscribers=u,u=t),o.dispose(),f=!1)};n.cacheDiffForKnownOperation=function(n,t,i){function c(n,t,i){return l[l.length]={status:n,value:t,index:i}}var u,y;if(f&&!e){var l=[],o=n.length,a=i.length,s=0;switch(t){case"push":s=o;case"unshift":for(u=0;u<a;u++)c("added",i[u],s+u);break;case"pop":s=o-1;case"shift":o&&c("deleted",n[s],s);break;case"splice":var v=Math.min(Math.max(0,i[0]<0?o+i[0]:i[0]),o),p=a===1?o:Math.min(v+(i[1]||0),o),w=v+a-2,d=Math.max(p,w),b=[],k=[];for(u=v,y=2;u<d;++u,++y)u<p&&k.push(c("deleted",n[u],u)),u<w&&b.push(c("added",i[y],u));h.utils.findMovesInArrayComparison(k,b);break;default:return}r=l}}}};c=h.utils.createSymbolOrString("_state");h.computed=h.dependentObservable=function(i,r,u){function f(){if(arguments.length>0){if(typeof o=="function")o.apply(e.evaluatorFunctionTarget,arguments);else throw new Error("Cannot write a value to a ko.computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.");return this}return h.dependencyDetection.registerDependency(f),(e.isDirty||e.isSleeping&&f.haveDependenciesChanged())&&f.evaluateImmediate(),e.latestValue}if(typeof i=="object"?u=i:(u=u||{},i&&(u.read=i)),typeof u.read!="function")throw Error("Pass a function that returns the value of the ko.computed");var o=u.write,e={latestValue:t,isStale:!0,isDirty:!0,isBeingEvaluated:!1,suppressDisposalUntilDisposeWhenReturnsFalse:!1,isDisposed:!1,pure:!1,isSleeping:!1,readFunction:u.read,evaluatorFunctionTarget:r||u.owner,disposeWhenNodeIsRemoved:u.disposeWhenNodeIsRemoved||u.disposeWhenNodeIsRemoved||null,disposeWhen:u.disposeWhen||u.disposeWhen,domNodeDisposalCallback:null,dependencyTracking:{},dependenciesCount:0,evaluationTimeoutInstance:null};return f[c]=e,f.hasWriteFunction=typeof o=="function",h.utils.canSetPrototype||h.utils.extend(f,h.subscribable.fn),h.subscribable.fn.init(f),h.utils.setPrototypeOfOrExtend(f,l),u.pure?(e.pure=!0,e.isSleeping=!0,h.utils.extend(f,at)):u.deferEvaluation&&h.utils.extend(f,vt),h.options.deferUpdates&&h.extenders.deferred(f,!0),n&&(f._options=u),e.disposeWhenNodeIsRemoved&&(e.suppressDisposalUntilDisposeWhenReturnsFalse=!0,e.disposeWhenNodeIsRemoved.nodeType||(e.disposeWhenNodeIsRemoved=null)),e.isSleeping||u.deferEvaluation||f.evaluateImmediate(),e.disposeWhenNodeIsRemoved&&f.isActive()&&h.utils.domNodeDisposal.addDisposeCallback(e.disposeWhenNodeIsRemoved,e.domNodeDisposalCallback=function(){f.dispose()}),f};var l={equalityComparer:nt,getDependenciesCount:function(){return this[c].dependenciesCount},addDependencyTracking:function(n,t,i){if(this[c].pure&&t===this)throw Error("A 'pure' computed must not be called recursively");this[c].dependencyTracking[n]=i;i._order=this[c].dependenciesCount++;i._version=t.getVersion()},haveDependenciesChanged:function(){var t,n,i=this[c].dependencyTracking;for(t in i)if(i.hasOwnProperty(t)&&(n=i[t],this._evalDelayed&&n._target._notificationIsPending||n._target.hasChanged(n._version)))return!0},markDirty:function(){this._evalDelayed&&!this[c].isBeingEvaluated&&this._evalDelayed(!1)},isActive:function(){var n=this[c];return n.isDirty||n.dependenciesCount>0},respondToChange:function(){this._notificationIsPending?this[c].isDirty&&(this[c].isStale=!0):this.evaluatePossiblyAsync()},subscribeToDependency:function(n){if(n._deferUpdates&&!this[c].disposeWhenNodeIsRemoved){var t=n.subscribe(this.markDirty,this,"dirty"),i=n.subscribe(this.respondToChange,this);return{_target:n,dispose:function(){t.dispose();i.dispose()}}}return n.subscribe(this.evaluatePossiblyAsync,this)},evaluatePossiblyAsync:function(){var n=this,t=n.throttleEvaluation;t&&t>=0?(clearTimeout(this[c].evaluationTimeoutInstance),this[c].evaluationTimeoutInstance=h.utils.setTimeout(function(){n.evaluateImmediate(!0)},t)):n._evalDelayed?n._evalDelayed(!0):n.evaluateImmediate(!0)},evaluateImmediate:function(n){var i=this,t=i[c],r=t.disposeWhen,u=!1;if(!t.isBeingEvaluated&&!t.isDisposed){if(t.disposeWhenNodeIsRemoved&&!h.utils.domNodeIsAttachedToDocument(t.disposeWhenNodeIsRemoved)||r&&r()){if(!t.suppressDisposalUntilDisposeWhenReturnsFalse){i.dispose();return}}else t.suppressDisposalUntilDisposeWhenReturnsFalse=!1;t.isBeingEvaluated=!0;try{u=this.evaluateImmediate_CallReadWithDependencyDetection(n)}finally{t.isBeingEvaluated=!1}return t.dependenciesCount||i.dispose(),u}},evaluateImmediate_CallReadWithDependencyDetection:function(i){var u=this,r=u[c],e=!1,o=r.pure?t:!r.dependenciesCount,s={computedObservable:u,disposalCandidates:r.dependencyTracking,disposalCount:r.dependenciesCount},f;return h.dependencyDetection.begin({callbackTarget:s,callback:lt,computed:u,isInitial:o}),r.dependencyTracking={},r.dependenciesCount=0,f=this.evaluateImmediate_CallReadThenEndDependencyDetection(r,s),u.isDifferent(r.latestValue,f)&&(r.isSleeping||u.notifySubscribers(r.latestValue,"beforeChange"),r.latestValue=f,n&&(u._latestValue=f),r.isSleeping?u.updateVersion():i&&u.notifySubscribers(r.latestValue),e=!0),o&&u.notifySubscribers(r.latestValue,"awake"),e},evaluateImmediate_CallReadThenEndDependencyDetection:function(n,t){try{var i=n.readFunction;return n.evaluatorFunctionTarget?i.call(n.evaluatorFunctionTarget):i()}finally{h.dependencyDetection.end();t.disposalCount&&!n.isSleeping&&h.utils.objectForEach(t.disposalCandidates,ct);n.isStale=n.isDirty=!1}},peek:function(n){var t=this[c];return(t.isDirty&&(n||!t.dependenciesCount)||t.isSleeping&&this.haveDependenciesChanged())&&this.evaluateImmediate(),t.latestValue},limit:function(n){h.subscribable.fn.limit.call(this,n);this._evalIfChanged=function(){return this[c].isStale?this.evaluateImmediate():this[c].isDirty=!1,this[c].latestValue};this._evalDelayed=function(n){this._limitBeforeChange(this[c].latestValue);this[c].isDirty=!0;n&&(this[c].isStale=!0);this._limitChange(this)}},dispose:function(){var n=this[c];!n.isSleeping&&n.dependencyTracking&&h.utils.objectForEach(n.dependencyTracking,function(n,t){t.dispose&&t.dispose()});n.disposeWhenNodeIsRemoved&&n.domNodeDisposalCallback&&h.utils.domNodeDisposal.removeDisposeCallback(n.disposeWhenNodeIsRemoved,n.domNodeDisposalCallback);n.dependencyTracking=null;n.dependenciesCount=0;n.isDisposed=!0;n.isStale=!1;n.isDirty=!1;n.isSleeping=!1;n.disposeWhenNodeIsRemoved=null}},at={beforeSubscriptionAdd:function(n){var i=this,t=i[c],r;!t.isDisposed&&t.isSleeping&&n=="change"&&(t.isSleeping=!1,t.isStale||i.haveDependenciesChanged()?(t.dependencyTracking=null,t.dependenciesCount=0,i.evaluateImmediate()&&i.updateVersion()):(r=[],h.utils.objectForEach(t.dependencyTracking,function(n,t){r[t._order]=n}),h.utils.arrayForEach(r,function(n,r){var f=t.dependencyTracking[n],u=i.subscribeToDependency(f._target);u._order=r;u._version=f._version;t.dependencyTracking[n]=u})),t.isDisposed||i.notifySubscribers(t.latestValue,"awake"))},afterSubscriptionRemove:function(n){var i=this[c];i.isDisposed||n!="change"||this.hasSubscriptionsForEvent("change")||(h.utils.objectForEach(i.dependencyTracking,function(n,t){t.dispose&&(i.dependencyTracking[n]={_target:t._target,_order:t._order,_version:t._version},t.dispose())}),i.isSleeping=!0,this.notifySubscribers(t,"asleep"))},getVersion:function(){var n=this[c];return n.isSleeping&&(n.isStale||this.haveDependenciesChanged())&&this.evaluateImmediate(),h.subscribable.fn.getVersion.call(this)}},vt={beforeSubscriptionAdd:function(n){(n=="change"||n=="beforeChange")&&this.peek()}};h.utils.canSetPrototype&&h.utils.setPrototypeOf(l,h.subscribable.fn);tt=h.observable.protoProperty;h.computed[tt]=h.observable;l[tt]=h.computed;h.isComputed=function(n){return h.hasPrototype(n,h.computed)};h.isPureComputed=function(n){return h.hasPrototype(n,h.computed)&&n[c]&&n[c].pure};h.exportSymbol("computed",h.computed);h.exportSymbol("dependentObservable",h.computed);h.exportSymbol("isComputed",h.isComputed);h.exportSymbol("isPureComputed",h.isPureComputed);h.exportSymbol("computed.fn",l);h.exportProperty(l,"peek",l.peek);h.exportProperty(l,"dispose",l.dispose);h.exportProperty(l,"isActive",l.isActive);h.exportProperty(l,"getDependenciesCount",l.getDependenciesCount);h.pureComputed=function(n,t){return typeof n=="function"?h.computed(n,t,{pure:!0}):(n=h.utils.extend({},n),n.pure=!0,h.computed(n,t))};h.exportSymbol("pureComputed",h.pureComputed),function(){function i(r,f,e){var s,o;return(e=e||new n,r=f(r),s=typeof r=="object"&&r!==null&&r!==t&&!(r instanceof RegExp)&&!(r instanceof Date)&&!(r instanceof String)&&!(r instanceof Number)&&!(r instanceof Boolean),!s)?r:(o=r instanceof Array?[]:{},e.save(r,o),u(r,function(n){var u=f(r[n]),s;switch(typeof u){case"boolean":case"number":case"string":case"function":o[n]=u;break;case"object":case"undefined":s=e.get(u);o[n]=s!==t?s:i(u,f,e)}}),o)}function u(n,t){var i,r;if(n instanceof Array){for(i=0;i<n.length;i++)t(i);typeof n.toJSON=="function"&&t("toJSON")}else for(r in n)t(r)}function n(){this.keys=[];this.values=[]}var r=10;h.toJS=function(n){if(arguments.length==0)throw new Error("When calling ko.toJS, pass the object you want to convert.");return i(n,function(n){for(var t=0;h.isObservable(n)&&t<r;t++)n=n();return n})};h.toJSON=function(n,t,i){var r=h.toJS(n);return h.utils.stringifyJson(r,t,i)};n.prototype={constructor:n,save:function(n,t){var i=h.utils.arrayIndexOf(this.keys,n);i>=0?this.values[i]=t:(this.keys.push(n),this.values.push(t))},get:function(n){var i=h.utils.arrayIndexOf(this.keys,n);return i>=0?this.values[i]:t}}}();h.exportSymbol("toJS",h.toJS);h.exportSymbol("toJSON",h.toJSON),function(){var n="__ko__hasDomDataOptionValue__";h.selectExtensions={readValue:function(i){switch(h.utils.tagNameLower(i)){case"option":return i[n]===!0?h.utils.domData.get(i,h.bindingHandlers.options.optionValueDomDataKey):h.utils.ieVersion<=7?i.getAttributeNode("value")&&i.getAttributeNode("value").specified?i.value:i.text:i.value;case"select":return i.selectedIndex>=0?h.selectExtensions.readValue(i.options[i.selectedIndex]):t;default:return i.value}},writeValue:function(i,r,u){var e,f,s,o;switch(h.utils.tagNameLower(i)){case"option":switch(typeof r){case"string":h.utils.domData.set(i,h.bindingHandlers.options.optionValueDomDataKey,t);n in i&&delete i[n];i.value=r;break;default:h.utils.domData.set(i,h.bindingHandlers.options.optionValueDomDataKey,r);i[n]=!0;i.value=typeof r=="number"?r:""}break;case"select":for((r===""||r===null)&&(r=t),e=-1,f=0,s=i.options.length;f<s;++f)if(o=h.selectExtensions.readValue(i.options[f]),o==r||o==""&&r===t){e=f;break}(u||e>=0||r===t&&i.size>1)&&(i.selectedIndex=e);break;default:(r===null||r===t)&&(r="");i.value=r}}}}();h.exportSymbol("selectExtensions",h.selectExtensions);h.exportSymbol("selectExtensions.readValue",h.selectExtensions.readValue);h.exportSymbol("selectExtensions.writeValue",h.selectExtensions.writeValue);h.expressionRewriting=function(){function e(n){if(h.utils.arrayIndexOf(u,n)>=0)return!1;var t=n.match(f);return t===null?!1:t[1]?"Object("+t[1]+")"+t[2]:n}function i(n){var r=h.utils.stringTrim(n),l,f,i,v;r.charCodeAt(0)===123&&(r=r.slice(1,-1));var y=[],o=r.match(t),e,u=[],a=0;if(o)for(o.push(","),l=0;f=o[l];++l){if(i=f.charCodeAt(0),i===44){if(a<=0){y.push(e&&u.length?{key:e,value:u.join("")}:{unknown:e||u.join("")});e=a=0;u=[];continue}}else if(i===58){if(!a&&!e&&u.length===1){e=u.pop();continue}}else i===47&&l&&f.length>1?(v=o[l-1].match(s),v&&!c[v[0]]&&(r=r.substr(r.indexOf(f)+1),o=r.match(t),o.push(","),l=-1,f="/")):i===40||i===123||i===91?++a:i===41||i===125||i===93?--a:e||u.length||i!==34&&i!==39||(f=f.slice(1,-1));u.push(f)}return y}function l(n,t){function u(n,t){function l(i){return i&&i.preprocess?t=i.preprocess(t,n,u):!0}var i;if(!c){if(!l(h.getBindingHandler(n)))return;r[n]&&(i=e(t))&&f.push("'"+n+"':function(_z){"+i+"=_z}")}s&&(t="function(){return "+t+" }");o.push("'"+n+"':"+t)}t=t||{};var o=[],f=[],s=t.valueAccessors,c=t.bindingParams,l=typeof n=="string"?i(n):n;return h.utils.arrayForEach(l,function(n){u(n.key||n.unknown,n.value)}),f.length&&u("_ko_property_writers","{"+f.join(",")+" }"),o.join(",")}var u=["true","false","null","undefined"],f=/^(?:[$_a-z][$\w]*|(.+)(\.\s*[$_a-z][$\w]*|\[.+\]))$/i,n=",\"'{}()/:[\\]",o="[^\\s:,/][^"+n+"]*[^\\s"+n+"]",t=RegExp("\"(?:[^\"\\\\]|\\\\.)*\"|'(?:[^'\\\\]|\\\\.)*'|/(?:[^/\\\\]|\\\\.)*/w*|"+o+"|[^\\s]","g"),s=/[\])"'A-Za-z0-9_$]+$/,c={"in":1,"return":1,"typeof":1},r={};return{bindingRewriteValidators:[],twoWayBindings:r,parseObjectLiteral:i,preProcessBindings:l,keyValueArrayContainsKey:function(n,t){for(var i=0;i<n.length;i++)if(n[i].key==t)return!0;return!1},writeValueToProperty:function(n,t,i,r,u){if(n&&h.isObservable(n))h.isWriteableObservable(n)&&(!u||n.peek()!==r)&&n(r);else{var f=t.get("_ko_property_writers");f&&f[i]&&f[i](r)}}}}();h.exportSymbol("expressionRewriting",h.expressionRewriting);h.exportSymbol("expressionRewriting.bindingRewriteValidators",h.expressionRewriting.bindingRewriteValidators);h.exportSymbol("expressionRewriting.parseObjectLiteral",h.expressionRewriting.parseObjectLiteral);h.exportSymbol("expressionRewriting.preProcessBindings",h.expressionRewriting.preProcessBindings);h.exportSymbol("expressionRewriting._twoWayBindings",h.expressionRewriting.twoWayBindings);h.exportSymbol("jsonExpressionRewriting",h.expressionRewriting);h.exportSymbol("jsonExpressionRewriting.insertPropertyAccessorsIntoJson",h.expressionRewriting.preProcessBindings),function(){function n(n){return n.nodeType==8&&u.test(t?n.text:n.nodeValue)}function r(n){return n.nodeType==8&&o.test(t?n.text:n.nodeValue)}function f(t,i){for(var u=t,f=1,e=[];u=u.nextSibling;){if(r(u)&&(f--,f===0))return e;e.push(u);n(u)&&f++}if(!i)throw new Error("Cannot find closing comment tag to match: "+t.nodeValue);return null}function e(n,t){var i=f(n,t);return i?i.length>0?i[i.length-1].nextSibling:n.nextSibling:null}function c(t){var i=t.firstChild,u=null,f;if(i)do u?u.push(i):n(i)?(f=e(i,!0),f?i=f:u=[i]):r(i)&&(u=[i]);while(i=i.nextSibling);return u}var t=i&&i.createComment("test").text==="<!--test-->",u=t?/^<!--\s*ko(?:\s+([\s\S]+))?\s*-->$/:/^\s*ko(?:\s+([\s\S]+))?\s*$/,o=t?/^<!--\s*\/ko\s*-->$/:/^\s*\/ko\s*$/,s={ul:!0,ol:!0};h.virtualElements={allowedBindings:{},childNodes:function(t){return n(t)?f(t):t.childNodes},emptyNode:function(t){var r,i,u;if(n(t))for(r=h.virtualElements.childNodes(t),i=0,u=r.length;i<u;i++)h.removeNode(r[i]);else h.utils.emptyDomNode(t)},setDomNodeChildren:function(t,i){var u,r,f;if(n(t))for(h.virtualElements.emptyNode(t),u=t.nextSibling,r=0,f=i.length;r<f;r++)u.parentNode.insertBefore(i[r],u);else h.utils.setDomNodeChildren(t,i)},prepend:function(t,i){n(t)?t.parentNode.insertBefore(i,t.nextSibling):t.firstChild?t.insertBefore(i,t.firstChild):t.appendChild(i)},insertAfter:function(t,i,r){r?n(t)?t.parentNode.insertBefore(i,r.nextSibling):r.nextSibling?t.insertBefore(i,r.nextSibling):t.appendChild(i):h.virtualElements.prepend(t,i)},firstChild:function(t){return n(t)?!t.nextSibling||r(t.nextSibling)?null:t.nextSibling:t.firstChild},nextSibling:function(t){return(n(t)&&(t=e(t)),t.nextSibling&&r(t.nextSibling))?null:t.nextSibling},hasBindingValue:n,virtualNodeBindingValue:function(n){var i=(t?n.text:n.nodeValue).match(u);return i?i[1]:null},normaliseVirtualElementDomStructure:function(n){var t,i,u,r;if(s[h.utils.tagNameLower(n)]&&(t=n.firstChild,t))do if(t.nodeType===1&&(i=c(t),i))for(u=t.nextSibling,r=0;r<i.length;r++)u?n.insertBefore(i[r],u):n.appendChild(i[r]);while(t=t.nextSibling)}}}();h.exportSymbol("virtualElements",h.virtualElements);h.exportSymbol("virtualElements.allowedBindings",h.virtualElements.allowedBindings);h.exportSymbol("virtualElements.emptyNode",h.virtualElements.emptyNode);h.exportSymbol("virtualElements.insertAfter",h.virtualElements.insertAfter);h.exportSymbol("virtualElements.prepend",h.virtualElements.prepend);h.exportSymbol("virtualElements.setDomNodeChildren",h.virtualElements.setDomNodeChildren),function(){function t(n,t,r){var u=n+(r&&r.valueAccessors||"");return t[u]||(t[u]=i(n,r))}function i(n,t){var i=h.expressionRewriting.preProcessBindings(n,t),r="with($context){with($data||{}){return{"+i+"}}}";return new Function("$context","$element",r)}var n="data-bind";h.bindingProvider=function(){this.bindingCache={}};h.utils.extend(h.bindingProvider.prototype,{nodeHasBindings:function(t){switch(t.nodeType){case 1:return t.getAttribute(n)!=null||h.components.getComponentNameForNode(t);case 8:return h.virtualElements.hasBindingValue(t);default:return!1}},getBindings:function(n,t){var i=this.getBindingsString(n,t),r=i?this.parseBindingsString(i,t,n):null;return h.components.addBindingsForCustomElement(r,n,t,!1)},getBindingAccessors:function(n,t){var i=this.getBindingsString(n,t),r=i?this.parseBindingsString(i,t,n,{valueAccessors:!0}):null;return h.components.addBindingsForCustomElement(r,n,t,!0)},getBindingsString:function(t){switch(t.nodeType){case 1:return t.getAttribute(n);case 8:return h.virtualElements.virtualNodeBindingValue(t);default:return null}},parseBindingsString:function(n,i,r,u){try{var e=t(n,this.bindingCache,u);return e(i,r)}catch(f){f.message="Unable to parse bindings.\nBindings value: "+n+"\nMessage: "+f.message;throw f;}}});h.bindingProvider.instance=new h.bindingProvider}();h.exportSymbol("bindingProvider",h.bindingProvider),function(){function v(n){return function(){return n}}function i(n){return n()}function s(n){return h.utils.objectMap(h.dependencyDetection.ignore(n),function(t,i){return function(){return n()[i]}})}function y(n,t,i){return typeof n=="function"?s(n.bind(null,t,i)):h.utils.objectMap(n,v)}function p(n,t){return s(this.getBindings.bind(this,n,t))}function w(n){var t=h.virtualElements.allowedBindings[n];if(!t)throw new Error("The binding '"+n+"' cannot be used with virtual elements");}function c(n,t,i){var r,u=h.virtualElements.firstChild(t),f=h.bindingProvider.instance,e=f.preprocessNode;if(e){while(r=u)u=h.virtualElements.nextSibling(r),e.call(f,r);u=h.virtualElements.firstChild(t)}while(r=u)u=h.virtualElements.nextSibling(r),l(n,r,i)}function l(n,t,i){var u=!0,r=t.nodeType===1,f;r&&h.virtualElements.normaliseVirtualElementDomStructure(t);f=r&&i||h.bindingProvider.instance.nodeHasBindings(t);f&&(u=a(t,null,n,i).shouldBindDescendants);u&&!o[h.utils.tagNameLower(t)]&&c(n,t,!r)}function b(n){var i=[],r={},t=[];return h.utils.objectForEach(n,function u(f){if(!r[f]){var e=h.getBindingHandler(f);e&&(e.after&&(t.push(f),h.utils.arrayForEach(e.after,function(i){if(n[i])if(h.utils.arrayIndexOf(t,i)!==-1)throw Error("Cannot combine the following bindings, because they have a cyclic dependency: "+t.join(", "));else u(i)}),t.length--),i.push({key:f,handler:e}));r[f]=!0}}),i}function a(n,r,u,e){var v=h.utils.domData.get(n,f),o,c,l,k;if(!r){if(v)throw Error("You cannot apply bindings multiple times to the same element.");h.utils.domData.set(n,f,!0)}if(!v&&e&&h.storedBindingContextForNode(n,u),r&&typeof r!="function")o=r;else{var y=h.bindingProvider.instance,d=y.getBindingAccessors||p,s=h.dependentObservable(function(){return o=r?r(u,n):d.call(y,n,u),o&&u._subscribable&&u._subscribable(),o},null,{disposeWhenNodeIsRemoved:n});o&&s.isActive()||(s=null)}if(o){l=s?function(n){return function(){return i(s()[n])}}:function(n){return o[n]};function a(){return h.utils.objectMap(s?s():o,i)}a.get=function(n){return o[n]&&i(l(n))};a.has=function(n){return n in o};k=b(o);h.utils.arrayForEach(k,function(i){var e=i.handler.init,s=i.handler.update,r=i.key;n.nodeType===8&&w(r);try{typeof e=="function"&&h.dependencyDetection.ignore(function(){var i=e(n,l(r),a,u.$data,u);if(i&&i.controlsDescendantBindings){if(c!==t)throw new Error("Multiple bindings ("+c+" and "+r+") are trying to control descendant bindings of the same element. You cannot use these bindings together on the same element.");c=r}});typeof s=="function"&&h.dependentObservable(function(){s(n,l(r),a,u.$data,u)},null,{disposeWhenNodeIsRemoved:n})}catch(f){f.message='Unable to process binding "'+r+": "+o[r]+'"\nMessage: '+f.message;throw f;}})}return{shouldBindDescendants:c===t}}function n(n){return n&&n instanceof h.bindingContext?n:new h.bindingContext(n)}var o,f,e;h.bindingHandlers={};o={script:!0,textarea:!0,template:!0};h.getBindingHandler=function(n){return h.bindingHandlers[n]};h.bindingContext=function(n,i,r,u,f){function c(){var f=a?n():n,t=h.utils.unwrapObservable(f);return i?(i._subscribable&&i._subscribable(),h.utils.extend(e,i),e._subscribable=o):(e.$parents=[],e.$root=t,e.ko=h),e.$rawData=f,e.$data=t,r&&(e[r]=t),u&&u(e,i,t),e.$data}function l(){return s&&!h.utils.anyDomNodeIsAttachedToDocument(s)}var e=this,a=typeof n=="function"&&!h.isObservable(n),s,o;f&&f.exportDependencies?c():(o=h.dependentObservable(c,null,{disposeWhen:l,disposeWhenNodeIsRemoved:!0}),o.isActive()&&(e._subscribable=o,o.equalityComparer=null,s=[],o._addNode=function(n){s.push(n);h.utils.domNodeDisposal.addDisposeCallback(n,function(n){h.utils.arrayRemoveItem(s,n);s.length||(o.dispose(),e._subscribable=o=t)})}))};h.bindingContext.prototype.createChildContext=function(n,t,i,r){return new h.bindingContext(n,this,t,function(n,t){n.$parentContext=t;n.$parent=t.$data;n.$parents=(t.$parents||[]).slice(0);n.$parents.unshift(n.$parent);i&&i(n)},r)};h.bindingContext.prototype.extend=function(n){return new h.bindingContext(this._subscribable||this.$data,this,null,function(t,i){t.$rawData=i.$rawData;h.utils.extend(t,typeof n=="function"?n():n)})};h.bindingContext.prototype.createStaticChildContext=function(n,t){return this.createChildContext(n,t,null,{exportDependencies:!0})};f=h.utils.domData.nextKey();e=h.utils.domData.nextKey();h.storedBindingContextForNode=function(n,t){if(arguments.length==2)h.utils.domData.set(n,e,t),t._subscribable&&t._subscribable._addNode(n);else return h.utils.domData.get(n,e)};h.applyBindingAccessorsToNode=function(t,i,r){return t.nodeType===1&&h.virtualElements.normaliseVirtualElementDomStructure(t),a(t,i,n(r),!0)};h.applyBindingsToNode=function(t,i,r){var u=n(r);return h.applyBindingAccessorsToNode(t,y(i,u,t),u)};h.applyBindingsToDescendants=function(t,i){(i.nodeType===1||i.nodeType===8)&&c(n(t),i,!0)};h.applyBindings=function(t,i){if(!r&&u.jQuery&&(r=u.jQuery),i&&i.nodeType!==1&&i.nodeType!==8)throw new Error("ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node");i=i||u.document.body;l(n(t),i,!0)};h.contextFor=function(n){switch(n.nodeType){case 1:case 8:var i=h.storedBindingContextForNode(n);if(i)return i;if(n.parentNode)return h.contextFor(n.parentNode)}return t};h.dataFor=function(n){var i=h.contextFor(n);return i?i.$data:t};h.exportSymbol("bindingHandlers",h.bindingHandlers);h.exportSymbol("applyBindings",h.applyBindings);h.exportSymbol("applyBindingsToDescendants",h.applyBindingsToDescendants);h.exportSymbol("applyBindingAccessorsToNode",h.applyBindingAccessorsToNode);h.exportSymbol("applyBindingsToNode",h.applyBindingsToNode);h.exportSymbol("contextFor",h.contextFor);h.exportSymbol("dataFor",h.dataFor)}(),function(n){function u(t,i){return t.hasOwnProperty(i)?t[i]:n}function f(n,t){var f=u(i,n),o;f?f.subscribe(t):(f=i[n]=new h.subscribable,f.subscribe(t),e(n,function(t,u){var e=!!(u&&u.synchronous);r[n]={definition:t,isSynchronousComponent:e};delete i[n];o||e?f.notifySubscribers(t):h.tasks.schedule(function(){f.notifySubscribers(t)})}),o=!0)}function e(n,i){t("getConfig",[n],function(r){r?t("loadComponent",[n,r],function(n){i(n,r)}):i(null,null)})}function t(i,r,u,f){var e,o,s,c;if(f||(f=h.components.loaders.slice(0)),e=f.shift(),e)if(o=e[i],o){if(s=!1,c=o.apply(e,r.concat(function(n){s?u(null):n!==null?u(n):t(i,r,u,f)})),c!==n&&(s=!0,!e.suppressLoaderExceptions))throw new Error("Component loaders must supply values by invoking the callback, not by returning values synchronously.");}else t(i,r,u,f);else u(null)}var i={},r={};h.components={get:function(n,t){var i=u(r,n);i?i.isSynchronousComponent?h.dependencyDetection.ignore(function(){t(i.definition)}):h.tasks.schedule(function(){t(i.definition)}):f(n,t)},clearCachedDefinition:function(n){delete r[n]},_getFirstResultFromLoaders:t};h.components.loaders=[];h.exportSymbol("components",h.components);h.exportSymbol("components.get",h.components.get);h.exportSymbol("components.clearCachedDefinition",h.components.clearCachedDefinition)}(),function(){function l(n,i,u,f){var o={},l=2,e=function(){--l==0&&f(o)},s=u.template,c=u.viewModel;s?r(i,s,function(t){h.components._getFirstResultFromLoaders("loadTemplate",[n,t],function(n){o.template=n;e()})}):e();c?r(i,c,function(i){h.components._getFirstResultFromLoaders("loadViewModel",[n,i],function(n){o[t]=n;e()})}):e()}function a(n,t,r){var u,f;typeof t=="string"?r(h.utils.parseHtmlFragment(t)):t instanceof Array?r(t):c(t)?r(h.utils.makeArray(t.childNodes)):t.element?(u=t.element,v(u)?r(o(u)):typeof u=="string"?(f=i.getElementById(u),f?r(o(f)):n("Cannot find element with ID "+u)):n("Unknown element type: "+u)):n("Unknown template value: "+t)}function e(n,i,r){if(typeof i=="function")r(function(n){return new i(n)});else if(typeof i[t]=="function")r(i[t]);else if("instance"in i){var u=i.instance;r(function(){return u})}else"viewModel"in i?e(n,i.viewModel,r):n("Unknown viewModel value: "+i)}function o(n){switch(h.utils.tagNameLower(n)){case"script":return h.utils.parseHtmlFragment(n.text);case"textarea":return h.utils.parseHtmlFragment(n.value);case"template":if(c(n.content))return h.utils.cloneNodes(n.content.childNodes)}return h.utils.cloneNodes(n.childNodes)}function v(n){return u.HTMLElement?n instanceof HTMLElement:n&&n.tagName&&n.nodeType===1}function c(n){return u.DocumentFragment?n instanceof DocumentFragment:n&&n.nodeType===11}function r(n,t,i){typeof t.require=="string"?s||u.require?(s||u.require)([t.require],i):n("Uses require, but no AMD loader is present"):i(t)}function f(n){return function(t){throw new Error("Component '"+n+"': "+t);}}var n={},t;h.components.register=function(t,i){if(!i)throw new Error("Invalid configuration for "+t);if(h.components.isRegistered(t))throw new Error("Component "+t+" is already registered");n[t]=i};h.components.isRegistered=function(t){return n.hasOwnProperty(t)};h.components.unregister=function(t){delete n[t];h.components.clearCachedDefinition(t)};h.components.defaultLoader={getConfig:function(t,i){var r=n.hasOwnProperty(t)?n[t]:null;i(r)},loadComponent:function(n,t,i){var u=f(n);r(u,t,function(t){l(n,u,t,i)})},loadTemplate:function(n,t,i){a(f(n),t,i)},loadViewModel:function(n,t,i){e(f(n),t,i)}};t="createViewModel";h.exportSymbol("components.register",h.components.register);h.exportSymbol("components.isRegistered",h.components.isRegistered);h.exportSymbol("components.unregister",h.components.unregister);h.exportSymbol("components.defaultLoader",h.components.defaultLoader);h.components.loaders.push(h.components.defaultLoader);h.components._allRegisteredComponents=n}(),function(){function t(t,i){var u=t.getAttribute("params");if(u){var e=n.parseBindingsString(u,i,t,{valueAccessors:!0,bindingParams:!0}),f=h.utils.objectMap(e,function(n){return h.computed(n,null,{disposeWhenNodeIsRemoved:t})}),r=h.utils.objectMap(f,function(n){var i=n.peek();return n.isActive()?h.computed({read:function(){return h.utils.unwrapObservable(n())},write:h.isWriteableObservable(i)&&function(t){n()(t)},disposeWhenNodeIsRemoved:t}):i});return r.hasOwnProperty("$raw")||(r.$raw=f),r}return{$raw:{}}}h.components.getComponentNameForNode=function(n){var t=h.utils.tagNameLower(n);if(h.components.isRegistered(t)&&(t.indexOf("-")!=-1||""+n=="[object HTMLUnknownElement]"||h.utils.ieVersion<=8&&n.tagName===t))return t};h.components.addBindingsForCustomElement=function(n,i,r,u){var f,e;if(i.nodeType===1&&(f=h.components.getComponentNameForNode(i),f)){if(n=n||{},n.component)throw new Error('Cannot use the "component" binding on a custom element matching a component');e={name:f,params:t(i,r)};n.component=u?function(){return e}:e}return n};var n=new h.bindingProvider;h.utils.ieVersion<9&&(h.components.register=function(n){return function(t){return i.createElement(t),n.apply(this,arguments)}}(h.components.register),i.createDocumentFragment=function(n){return function(){var i=n(),r=h.components._allRegisteredComponents,t;for(t in r)r.hasOwnProperty(t)&&i.createElement(t);return i}}(i.createDocumentFragment))}(),function(n){function i(n,t,i){var r=t.template,u;if(!r)throw new Error("Component '"+n+"' has no template");u=h.utils.cloneNodes(r);h.virtualElements.setDomNodeChildren(i,u)}function r(n,t,i,r){var u=n.createViewModel;return u?u.call(n,r,{element:t,templateNodes:i}):r}var t=0;h.bindingHandlers.component={init:function(u,f,e,o,s){var c,l,a=function(){var n=c&&c.dispose;typeof n=="function"&&n.call(c);c=null;l=null},v=h.utils.makeArray(h.virtualElements.childNodes(u));return h.utils.domNodeDisposal.addDisposeCallback(u,a),h.computed(function(){var o=h.utils.unwrapObservable(f()),e,y,p;if(typeof o=="string"?e=o:(e=h.utils.unwrapObservable(o.name),y=h.utils.unwrapObservable(o.params)),!e)throw new Error("No component name specified");p=l=++t;h.components.get(e,function(t){if(l===p){if(a(),!t)throw new Error("Unknown component '"+e+"'");i(e,t,u);var f=r(t,u,v,y),o=s.createChildContext(f,n,function(n){n.$component=f;n.$componentTemplateNodes=v});c=f;h.applyBindingsToDescendants(o,u)}})},null,{disposeWhenNodeIsRemoved:u}),{controlsDescendantBindings:!0}}};h.virtualElements.allowedBindings.component=!0}();it={"class":"className","for":"htmlFor"};h.bindingHandlers.attr={update:function(n,i){var r=h.utils.unwrapObservable(i())||{};h.utils.objectForEach(r,function(i,r){r=h.utils.unwrapObservable(r);var u=r===!1||r===null||r===t;u&&n.removeAttribute(i);h.utils.ieVersion<=8&&i in it?(i=it[i],u?n.removeAttribute(i):n[i]=r):u||n.setAttribute(i,r.toString());i==="name"&&h.utils.setElementName(n,u?"":r.toString())})}},function(){h.bindingHandlers.checked={after:["value","attr"],init:function(n,i,r){function l(){var l=n.checked,o=y?f():l,t,s;h.computedContext.isInitial()||(!e||l)&&(t=h.dependencyDetection.ignore(i),u?(s=a?t.peek():t,c!==o?(l&&(h.utils.addOrRemoveItem(s,o,!0),h.utils.addOrRemoveItem(s,c,!1)),c=o):h.utils.addOrRemoveItem(s,o,l),a&&h.isWriteableObservable(t)&&t(s)):h.expressionRewriting.writeValueToProperty(t,r,"checked",o,!0))}function v(){var t=h.utils.unwrapObservable(i());n.checked=u?h.utils.arrayIndexOf(t,f())>=0:s?t:f()===t}var f=h.pureComputed(function(){return r.has("checkedValue")?h.utils.unwrapObservable(r.get("checkedValue")):r.has("value")?h.utils.unwrapObservable(r.get("value")):n.value}),s=n.type=="checkbox",e=n.type=="radio";if(s||e){var o=i(),u=s&&h.utils.unwrapObservable(o)instanceof Array,a=!(u&&o.push&&o.splice),c=u?f():t,y=e||u;e&&!n.name&&h.bindingHandlers.uniqueName.init(n,function(){return!0});h.computed(l,null,{disposeWhenNodeIsRemoved:n});h.utils.registerEventHandler(n,"click",l);h.computed(v,null,{disposeWhenNodeIsRemoved:n});o=t}}};h.expressionRewriting.twoWayBindings.checked=!0;h.bindingHandlers.checkedValue={update:function(n,t){n.value=h.utils.unwrapObservable(t())}}}();rt="__ko__cssValue";h.bindingHandlers.css={update:function(n,t){var i=h.utils.unwrapObservable(t());i!==null&&typeof i=="object"?h.utils.objectForEach(i,function(t,i){i=h.utils.unwrapObservable(i);h.utils.toggleDomNodeCssClass(n,t,i)}):(i=h.utils.stringTrim(String(i||"")),h.utils.toggleDomNodeCssClass(n,n[rt],!1),n[rt]=i,h.utils.toggleDomNodeCssClass(n,i,!0))}};h.bindingHandlers.enable={update:function(n,t){var i=h.utils.unwrapObservable(t());i&&n.disabled?n.removeAttribute("disabled"):i||n.disabled||(n.disabled=!0)}};h.bindingHandlers.disable={update:function(n,t){h.bindingHandlers.enable.update(n,function(){return!h.utils.unwrapObservable(t())})}};h.bindingHandlers.event={init:function(n,t,i,r,u){var f=t()||{};h.utils.objectForEach(f,function(f){typeof f=="string"&&h.utils.registerEventHandler(n,f,function(n){var o,s=t()[f],e,c;if(s){try{e=h.utils.makeArray(arguments);r=u.$data;e.unshift(r);o=s.apply(r,e)}finally{o!==!0&&(n.preventDefault?n.preventDefault():n.returnValue=!1)}c=i.get(f+"Bubble")!==!1;c||(n.cancelBubble=!0,n.stopPropagation&&n.stopPropagation())}})})}};h.bindingHandlers.foreach={makeTemplateValueAccessor:function(n){return function(){var i=n(),t=h.utils.peekObservable(i);return!t||typeof t.length=="number"?{foreach:i,templateEngine:h.nativeTemplateEngine.instance}:(h.utils.unwrapObservable(i),{foreach:t.data,as:t.as,includeDestroyed:t.includeDestroyed,afterAdd:t.afterAdd,beforeRemove:t.beforeRemove,afterRender:t.afterRender,beforeMove:t.beforeMove,afterMove:t.afterMove,templateEngine:h.nativeTemplateEngine.instance})}},init:function(n,t){return h.bindingHandlers.template.init(n,h.bindingHandlers.foreach.makeTemplateValueAccessor(t))},update:function(n,t,i,r,u){return h.bindingHandlers.template.update(n,h.bindingHandlers.foreach.makeTemplateValueAccessor(t),i,r,u)}};h.expressionRewriting.bindingRewriteValidators.foreach=!1;h.virtualElements.allowedBindings.foreach=!0;k="__ko_hasfocusUpdating";d="__ko_hasfocusLastValue";h.bindingHandlers.hasfocus={init:function(n,t,i){var r=function(r){var u,f,e;if(n[k]=!0,u=n.ownerDocument,"activeElement"in u){try{f=u.activeElement}catch(o){f=u.body}r=f===n}e=t();h.expressionRewriting.writeValueToProperty(e,i,"hasfocus",r,!0);n[d]=r;n[k]=!1},u=r.bind(null,!0),f=r.bind(null,!1);h.utils.registerEventHandler(n,"focus",u);h.utils.registerEventHandler(n,"focusin",u);h.utils.registerEventHandler(n,"blur",f);h.utils.registerEventHandler(n,"focusout",f)},update:function(n,t){var i=!!h.utils.unwrapObservable(t());n[k]||n[d]===i||(i?n.focus():n.blur(),!i&&n[d]&&n.ownerDocument.body.focus(),h.dependencyDetection.ignore(h.utils.triggerEvent,null,[n,i?"focusin":"focusout"]))}};h.expressionRewriting.twoWayBindings.hasfocus=!0;h.bindingHandlers.hasFocus=h.bindingHandlers.hasfocus;h.expressionRewriting.twoWayBindings.hasFocus=!0;h.bindingHandlers.html={init:function(){return{controlsDescendantBindings:!0}},update:function(n,t){h.utils.setHtml(n,t())}};ut("if");ut("ifnot",!1,!0);ut("with",!0,!1,function(n,t){return n.createStaticChildContext(t)});g={};h.bindingHandlers.options={init:function(n){if(h.utils.tagNameLower(n)!=="select")throw new Error("options binding applies only to SELECT elements");while(n.length>0)n.remove(0);return{controlsDescendantBindings:!0}},update:function(n,i,r){function y(){return h.utils.arrayFilter(n.options,function(n){return n.selected})}function w(n,t,i){var r=typeof t;return r=="function"?t(n):r=="string"?n[t]:i}function nt(i,f,s){var c,l,a;return s.length&&(u=!e&&s[0].selected?[h.selectExtensions.readValue(s[0])]:[],o=!0),c=n.ownerDocument.createElement("option"),i===g?(h.utils.setTextContent(c,r.get("optionsCaption")),h.selectExtensions.writeValue(c,t)):(l=w(i,r.get("optionsValue"),i),h.selectExtensions.writeValue(c,h.utils.unwrapObservable(l)),a=w(i,r.get("optionsText"),l),h.utils.setTextContent(c,a)),[c]}function b(t,i){if(o&&e)h.selectExtensions.writeValue(n,h.utils.unwrapObservable(r.get("value")),!0);else if(u.length){var f=h.utils.arrayIndexOf(u,h.selectExtensions.readValue(i[0]))>=0;h.utils.setOptionNodeSelectionState(i[0],f);o&&!f&&h.dependencyDetection.ignore(h.utils.triggerEvent,null,[n,"change"])}}var k=n.length==0,s=n.multiple,c=!k&&s?n.scrollTop:null,f=h.utils.unwrapObservable(i()),e=r.get("valueAllowUnset")&&r.has("value"),d=r.get("optionsIncludeDestroyed"),p={},l,a,u=[],o,v;e||(s?u=h.utils.arrayMap(y(),h.selectExtensions.readValue):n.selectedIndex>=0&&u.push(h.selectExtensions.readValue(n.options[n.selectedIndex])));f&&(typeof f.length=="undefined"&&(f=[f]),a=h.utils.arrayFilter(f,function(n){return d||n===t||n===null||!h.utils.unwrapObservable(n._destroy)}),r.has("optionsCaption")&&(l=h.utils.unwrapObservable(r.get("optionsCaption")),l!==null&&l!==t&&a.unshift(g)));o=!1;p.beforeRemove=function(t){n.removeChild(t)};v=b;r.has("optionsAfterRender")&&typeof r.get("optionsAfterRender")=="function"&&(v=function(n,i){b(n,i);h.dependencyDetection.ignore(r.get("optionsAfterRender"),null,[i[0],n!==g?n:t])});h.utils.setDomNodeChildrenFromArrayMapping(n,a,nt,p,v);h.dependencyDetection.ignore(function(){if(e)h.selectExtensions.writeValue(n,h.utils.unwrapObservable(r.get("value")),!0);else{var t;t=s?u.length&&y().length<u.length:u.length&&n.selectedIndex>=0?h.selectExtensions.readValue(n.options[n.selectedIndex])!==u[0]:u.length||n.selectedIndex>=0;t&&h.utils.triggerEvent(n,"change")}});h.utils.ensureSelectElementIsRenderedCorrectly(n);c&&Math.abs(c-n.scrollTop)>20&&(n.scrollTop=c)}};h.bindingHandlers.options.optionValueDomDataKey=h.utils.domData.nextKey();h.bindingHandlers.selectedOptions={after:["options","foreach"],init:function(n,t,i){h.utils.registerEventHandler(n,"change",function(){var u=t(),r=[];h.utils.arrayForEach(n.getElementsByTagName("option"),function(n){n.selected&&r.push(h.selectExtensions.readValue(n))});h.expressionRewriting.writeValueToProperty(u,i,"selectedOptions",r)})},update:function(n,t){if(h.utils.tagNameLower(n)!="select")throw new Error("values binding applies only to SELECT elements");var i=h.utils.unwrapObservable(t()),r=n.scrollTop;i&&typeof i.length=="number"&&h.utils.arrayForEach(n.getElementsByTagName("option"),function(n){var t=h.utils.arrayIndexOf(i,h.selectExtensions.readValue(n))>=0;n.selected!=t&&h.utils.setOptionNodeSelectionState(n,t)});n.scrollTop=r}};h.expressionRewriting.twoWayBindings.selectedOptions=!0;h.bindingHandlers.style={update:function(n,i){var r=h.utils.unwrapObservable(i()||{});h.utils.objectForEach(r,function(i,r){r=h.utils.unwrapObservable(r);(r===null||r===t||r===!1)&&(r="");n.style[i]=r})}};h.bindingHandlers.submit={init:function(n,t,i,r,u){if(typeof t()!="function")throw new Error("The value for a submit binding must be a function");h.utils.registerEventHandler(n,"submit",function(i){var r,f=t();try{r=f.call(u.$data,n)}finally{r!==!0&&(i.preventDefault?i.preventDefault():i.returnValue=!1)}})}};h.bindingHandlers.text={init:function(){return{controlsDescendantBindings:!0}},update:function(n,t){h.utils.setTextContent(n,t())}};h.virtualElements.allowedBindings.text=!0,function(){if(u&&u.navigator)var i=function(n){if(n)return parseFloat(n[1])},o=u.opera&&u.opera.version&&parseInt(u.opera.version()),r=u.navigator.userAgent,s=i(r.match(/^(?:(?!chrome).)*version\/([^ ]*) safari/i)),c=i(r.match(/Firefox\/([^ ]*)/));if(h.utils.ieVersion<10)var f=h.utils.domData.nextKey(),e=h.utils.domData.nextKey(),l=function(n){var t=this.activeElement,i=t&&h.utils.domData.get(t,e);i&&i(n)},a=function(n,t){var i=n.ownerDocument;h.utils.domData.get(i,f)||(h.utils.domData.set(i,f,!0),h.utils.registerEventHandler(i,"selectionchange",l));h.utils.domData.set(n,e,t)};h.bindingHandlers.textInput={init:function(i,r,u){var p=i.value,v,y,e=function(f){clearTimeout(v);y=v=t;var e=i.value;p!==e&&(n&&f&&(i._ko_textInputProcessedEvent=f.type),p=e,h.expressionRewriting.writeValueToProperty(r(),u,"textInput",e))},l=function(t){if(!v){y=i.value;var r=n?e.bind(i,{type:t.type}):e;v=h.utils.setTimeout(r,4)}},w=h.utils.ieVersion==9?l:e,b=function(){var n=h.utils.unwrapObservable(r());if((n===null||n===t)&&(n=""),y!==t&&n===y){h.utils.setTimeout(b,4);return}i.value!==n&&(p=n,i.value=n)},f=function(n,t){h.utils.registerEventHandler(i,n,t)};n&&h.bindingHandlers.textInput._forceUpdateOn?h.utils.arrayForEach(h.bindingHandlers.textInput._forceUpdateOn,function(n){n.slice(0,5)=="after"?f(n.slice(5),l):f(n,e)}):h.utils.ieVersion<10?(f("propertychange",function(n){n.propertyName==="value"&&w(n)}),h.utils.ieVersion==8&&(f("keyup",e),f("keydown",e)),h.utils.ieVersion>=8&&(a(i,w),f("dragend",l))):(f("input",e),s<5&&h.utils.tagNameLower(i)==="textarea"?(f("keydown",l),f("paste",l),f("cut",l)):o<11?f("keydown",l):c<4&&(f("DOMAutoComplete",e),f("dragdrop",e),f("drop",e)));f("change",e);h.computed(b,null,{disposeWhenNodeIsRemoved:i})}};h.expressionRewriting.twoWayBindings.textInput=!0;h.bindingHandlers.textinput={preprocess:function(n,t,i){i("textInput",n)}}}();h.bindingHandlers.uniqueName={init:function(n,t){if(t()){var i="ko_unique_"+ ++h.bindingHandlers.uniqueName.currentIndex;h.utils.setElementName(n,i)}}};h.bindingHandlers.uniqueName.currentIndex=0;h.bindingHandlers.value={after:["options","foreach"],init:function(n,t,i){var o,c,s;if(n.tagName.toLowerCase()=="input"&&(n.type=="checkbox"||n.type=="radio")){h.applyBindingAccessorsToNode(n,{checkedValue:t});return}var r=["change"],u=i.get("valueUpdate"),f=!1,e=null;u&&(typeof u=="string"&&(u=[u]),h.utils.arrayPushAll(r,u),r=h.utils.arrayGetDistinctValues(r));o=function(){e=null;f=!1;var r=t(),u=h.selectExtensions.readValue(n);h.expressionRewriting.writeValueToProperty(r,i,"value",u)};c=h.utils.ieVersion&&n.tagName.toLowerCase()=="input"&&n.type=="text"&&n.autocomplete!="off"&&(!n.form||n.form.autocomplete!="off");c&&h.utils.arrayIndexOf(r,"propertychange")==-1&&(h.utils.registerEventHandler(n,"propertychange",function(){f=!0}),h.utils.registerEventHandler(n,"focus",function(){f=!1}),h.utils.registerEventHandler(n,"blur",function(){f&&o()}));h.utils.arrayForEach(r,function(t){var i=o;h.utils.stringStartsWith(t,"after")&&(i=function(){e=h.selectExtensions.readValue(n);h.utils.setTimeout(o,0)},t=t.substring(5));h.utils.registerEventHandler(n,t,i)});s=function(){var r=h.utils.unwrapObservable(t()),c=h.selectExtensions.readValue(n),o,u,f;if(e!==null&&r===e){h.utils.setTimeout(s,0);return}o=r!==c;o&&(h.utils.tagNameLower(n)==="select"?(u=i.get("valueAllowUnset"),f=function(){h.selectExtensions.writeValue(n,r,u)},f(),u||r===h.selectExtensions.readValue(n)?h.utils.setTimeout(f,0):h.dependencyDetection.ignore(h.utils.triggerEvent,null,[n,"change"])):h.selectExtensions.writeValue(n,r))};h.computed(s,null,{disposeWhenNodeIsRemoved:n})},update:function(){}};h.expressionRewriting.twoWayBindings.value=!0;h.bindingHandlers.visible={update:function(n,t){var i=h.utils.unwrapObservable(t()),r=!(n.style.display=="none");i&&!r?n.style.display="":!i&&r&&(n.style.display="none")}};yt("click");h.templateEngine=function(){};h.templateEngine.prototype.renderTemplateSource=function(){throw new Error("Override renderTemplateSource");};h.templateEngine.prototype.createJavaScriptEvaluatorBlock=function(){throw new Error("Override createJavaScriptEvaluatorBlock");};h.templateEngine.prototype.makeTemplateSource=function(n,t){if(typeof n=="string"){t=t||i;var r=t.getElementById(n);if(!r)throw new Error("Cannot find template with ID "+n);return new h.templateSources.domElement(r)}if(n.nodeType==1||n.nodeType==8)return new h.templateSources.anonymousTemplate(n);throw new Error("Unknown template type: "+n);};h.templateEngine.prototype.renderTemplate=function(n,t,i,r){var u=this.makeTemplateSource(n,r);return this.renderTemplateSource(u,t,i,r)};h.templateEngine.prototype.isTemplateRewritten=function(n,t){return this.allowTemplateRewriting===!1?!0:this.makeTemplateSource(n,t).data("isRewritten")};h.templateEngine.prototype.rewriteTemplate=function(n,t,i){var r=this.makeTemplateSource(n,i),u=t(r.text());r.text(u);r.data("isRewritten",!0)};h.exportSymbol("templateEngine",h.templateEngine);h.templateRewriting=function(){function r(n){for(var f=h.expressionRewriting.bindingRewriteValidators,i,r,u,t=0;t<n.length;t++)if(i=n[t].key,f.hasOwnProperty(i))if(r=f[i],typeof r=="function"){if(u=r(n[t].value),u)throw new Error(u);}else if(!r)throw new Error("This template engine does not support the '"+i+"' binding within its templates");}function n(n,t,i,u){var f=h.expressionRewriting.parseObjectLiteral(n),e,o;return r(f),e=h.expressionRewriting.preProcessBindings(f,{valueAccessors:!0}),o="ko.__tr_ambtns(function($context,$element){return(function(){return{ "+e+" } })()},'"+i.toLowerCase()+"')",u.createJavaScriptEvaluatorBlock(o)+t}var t=/(<([a-z]+\d*)(?:\s+(?!data-bind\s*=\s*)[a-z0-9\-]+(?:=(?:\"[^\"]*\"|\'[^\']*\'|[^>]*))?)*\s+)data-bind\s*=\s*(["'])([\s\S]*?)\3/gi,i=/<!--\s*ko\b\s*([\s\S]*?)\s*-->/g;return{ensureTemplateIsRewritten:function(n,t,i){t.isTemplateRewritten(n,i)||t.rewriteTemplate(n,function(n){return h.templateRewriting.memoizeBindingAttributeSyntax(n,t)},i)},memoizeBindingAttributeSyntax:function(r,u){return r.replace(t,function(){return n(arguments[4],arguments[1],arguments[2],u)}).replace(i,function(){return n(arguments[1],"<!-- ko -->","#comment",u)})},applyMemoizedBindingsToNextSibling:function(n,t){return h.memoization.memoize(function(i,r){var u=i.nextSibling;u&&u.nodeName.toLowerCase()===t&&h.applyBindingAccessorsToNode(u,n,r)})}}}();h.exportSymbol("__tr_ambtns",h.templateRewriting.applyMemoizedBindingsToNextSibling),function(){function o(n){return h.utils.domData.get(n,i)||{}}function s(n,t){h.utils.domData.set(n,i,t)}var n,i;h.templateSources={};var r=1,u=2,f=3,e=4;h.templateSources.domElement=function(n){if(this.domElement=n,n){var t=h.utils.tagNameLower(n);this.templateType=t==="script"?r:t==="textarea"?u:t=="template"&&n.content&&n.content.nodeType===11?f:e}};h.templateSources.domElement.prototype.text=function(){var n=this.templateType===r?"text":this.templateType===u?"value":"innerHTML",t;if(arguments.length==0)return this.domElement[n];t=arguments[0];n==="innerHTML"?h.utils.setHtml(this.domElement,t):this.domElement[n]=t};n=h.utils.domData.nextKey()+"_";h.templateSources.domElement.prototype.data=function(t){if(arguments.length===1)return h.utils.domData.get(this.domElement,n+t);h.utils.domData.set(this.domElement,n+t,arguments[1])};i=h.utils.domData.nextKey();h.templateSources.domElement.prototype.nodes=function(){var n=this.domElement,i,r,u;if(arguments.length==0)return i=o(n),r=i.containerData,r||(this.templateType===f?n.content:this.templateType===e?n:t);u=arguments[0];s(n,{containerData:u})};h.templateSources.anonymousTemplate=function(n){this.domElement=n};h.templateSources.anonymousTemplate.prototype=new h.templateSources.domElement;h.templateSources.anonymousTemplate.prototype.constructor=h.templateSources.anonymousTemplate;h.templateSources.anonymousTemplate.prototype.text=function(){var n,i;if(arguments.length==0)return n=o(this.domElement),n.textData===t&&n.containerData&&(n.textData=n.containerData.innerHTML),n.textData;i=arguments[0];s(this.domElement,{textData:i})};h.exportSymbol("templateSources",h.templateSources);h.exportSymbol("templateSources.domElement",h.templateSources.domElement);h.exportSymbol("templateSources.anonymousTemplate",h.templateSources.anonymousTemplate)}(),function(){function i(n,t,i){for(var u,r=n,f=h.virtualElements.nextSibling(t);r&&(u=r)!==f;)r=h.virtualElements.nextSibling(u),i(u,r)}function f(n,t){if(n.length){var r=n[0],u=n[n.length-1],f=r.parentNode,e=h.bindingProvider.instance,o=e.preprocessNode;if(o){if(i(r,u,function(n,t){var f=n.previousSibling,i=o.call(e,n);i&&(n===r&&(r=i[0]||t),n===u&&(u=i[i.length-1]||f))}),n.length=0,!r)return;r===u?n.push(r):(n.push(r,u),h.utils.fixUpContinuousNodeArray(n,f))}i(r,u,function(n){(n.nodeType===1||n.nodeType===8)&&h.applyBindings(t,n)});i(r,u,function(n){(n.nodeType===1||n.nodeType===8)&&h.memoization.unmemoizeDomNodeAndDescendants(n,[t])});h.utils.fixUpContinuousNodeArray(n,f)}}function r(n){return n.nodeType?n:n.length>0?n[0]:null}function e(t,i,u,e,o){var s,c;o=o||{};var v=t&&r(t),l=(v||u||{}).ownerDocument,a=o.templateEngine||n;if(h.templateRewriting.ensureTemplateIsRewritten(u,a,l),s=a.renderTemplate(u,e,o,l),typeof s.length!="number"||s.length>0&&typeof s[0].nodeType!="number")throw new Error("Template engine must return an array of DOM nodes");c=!1;switch(i){case"replaceChildren":h.virtualElements.setDomNodeChildren(t,s);c=!0;break;case"replaceNode":h.utils.replaceDomNodes(t,s);c=!0;break;case"ignoreTargetNode":break;default:throw new Error("Unknown renderMode: "+i);}return c&&(f(s,e),o.afterRender&&h.dependencyDetection.ignore(o.afterRender,null,[s,e.$data])),s}function o(n,t,i){return h.isObservable(n)?n():typeof n=="function"?n(t,i):n}function s(n,i){var r=h.utils.domData.get(n,u);r&&typeof r.dispose=="function"&&r.dispose();h.utils.domData.set(n,u,i&&i.isActive()?i:t)}var n,u;h.setTemplateEngine=function(i){if(i!=t&&!(i instanceof h.templateEngine))throw new Error("templateEngine must inherit from ko.templateEngine");n=i};h.renderTemplate=function(i,u,f,s,c){if(f=f||{},(f.templateEngine||n)==t)throw new Error("Set a template engine before calling renderTemplate");if(c=c||"replaceChildren",s){var l=r(s),a=function(){return!l||!h.utils.domNodeIsAttachedToDocument(l)},v=l&&c=="replaceNode"?l.parentNode:l;return h.dependentObservable(function(){var n=u&&u instanceof h.bindingContext?u:new h.bindingContext(u,null,null,null,{exportDependencies:!0}),t=o(i,n.$data,n),a=e(s,c,t,n,f);c=="replaceNode"&&(s=a,l=r(s))},null,{disposeWhen:a,disposeWhenNodeIsRemoved:v})}return h.memoization.memoize(function(n){h.renderTemplate(i,u,f,n,"replaceNode")})};h.renderTemplateForEach=function(n,i,r,u,s){var c,l=function(t,i){c=s.createChildContext(t,r.as,function(n){n.$index=i});var u=o(n,t,c);return e(null,"ignoreTargetNode",u,c,r)},a=function(n,t){f(t,c);r.afterRender&&r.afterRender(t,n);c=null};return h.dependentObservable(function(){var n=h.utils.unwrapObservable(i)||[],f;typeof n.length=="undefined"&&(n=[n]);f=h.utils.arrayFilter(n,function(n){return r.includeDestroyed||n===t||n===null||!h.utils.unwrapObservable(n._destroy)});h.dependencyDetection.ignore(h.utils.setDomNodeChildrenFromArrayMapping,null,[u,f,l,r,a])},null,{disposeWhenNodeIsRemoved:u})};u=h.utils.domData.nextKey();h.bindingHandlers.template={init:function(n,t){var r=h.utils.unwrapObservable(t()),u,f,i;if(typeof r=="string"||r.name)h.virtualElements.emptyNode(n);else if("nodes"in r){if(u=r.nodes||[],h.isObservable(u))throw new Error('The "nodes" option must be a plain, non-observable array.');i=h.utils.moveCleanedNodesToContainerElement(u);new h.templateSources.anonymousTemplate(n).nodes(i)}else f=h.virtualElements.childNodes(n),i=h.utils.moveCleanedNodesToContainerElement(f),new h.templateSources.anonymousTemplate(n).nodes(i);return{controlsDescendantBindings:!0}},update:function(n,t,i,r,u){var l=t(),f=h.utils.unwrapObservable(l),e=!0,c=null,o,a,v;typeof f=="string"?(o=l,f={}):(o=f.name,"if"in f&&(e=h.utils.unwrapObservable(f["if"])),e&&"ifnot"in f&&(e=!h.utils.unwrapObservable(f.ifnot)));"foreach"in f?(a=e&&f.foreach||[],c=h.renderTemplateForEach(o||n,a,f,n,u)):e?(v="data"in f?u.createStaticChildContext(f.data,f.as):u,c=h.renderTemplate(o||n,v,f,n)):h.virtualElements.emptyNode(n);s(n,c)}};h.expressionRewriting.bindingRewriteValidators.template=function(n){var t=h.expressionRewriting.parseObjectLiteral(n);return t.length==1&&t[0].unknown?null:h.expressionRewriting.keyValueArrayContainsKey(t,"name")?null:"This template engine does not support anonymous templates nested within its templates"};h.virtualElements.allowedBindings.template=!0}();h.exportSymbol("setTemplateEngine",h.setTemplateEngine);h.exportSymbol("renderTemplate",h.renderTemplate);h.utils.findMovesInArrayComparison=function(n,t,i){if(n.length&&t.length)for(var o,r,f,e,u=o=0;(!i||u<i)&&(f=n[o]);++o){for(r=0;e=t[r];++r)if(f.value===e.value){f.moved=e.index;e.moved=f.index;t.splice(r,1);u=r=0;break}u+=r}};h.utils.compareArrays=function(){function r(r,u,f){return f=typeof f=="boolean"?{dontLimitMoves:f}:f||{},r=r||[],u=u||[],r.length<u.length?i(r,u,n,t,f):i(u,r,t,n,f)}function i(n,t,i,r,u){for(var p=Math.min,it=Math.max,l=[],c=n.length,f,a=t.length,rt=a-c||1,w=c+a+1,o,v,b,k,d,g,e=0;e<=c;e++)for(v=o,l.push(o=[]),b=p(a,e+rt),k=it(0,e-1),f=k;f<=b;f++)f?e?n[e-1]===t[f-1]?o[f]=v[f-1]:(d=v[f]||w,g=o[f-1]||w,o[f]=p(d,g)+1):o[f]=f+1:o[f]=e+1;var s=[],y,nt=[],tt=[];for(e=c,f=a;e||f;)y=l[e][f]-1,f&&y===l[e][f-1]?nt.push(s[s.length]={status:i,value:t[--f],index:f}):e&&y===l[e-1][f]?tt.push(s[s.length]={status:r,value:n[--e],index:e}):(--f,--e,u.sparse||s.push({status:"retained",value:t[f]}));return h.utils.findMovesInArrayComparison(tt,nt,!u.dontLimitMoves&&c*10),s.reverse()}var n="added",t="deleted";return r}();h.exportSymbol("utils.compareArrays",h.utils.compareArrays),function(){function r(n,i,r,u,f){var e=[],o=h.dependentObservable(function(){var t=i(r,f,h.utils.fixUpContinuousNodeArray(e,n))||[];e.length>0&&(h.utils.replaceDomNodes(e,t),u&&h.dependencyDetection.ignore(u,null,[r,t,f]));e.length=0;h.utils.arrayPushAll(e,t)},null,{disposeWhenNodeIsRemoved:n,disposeWhen:function(){return!h.utils.anyDomNodeIsAttachedToDocument(e)}});return{mappedNodes:e,dependentObservable:o.isActive()?o:t}}var n=h.utils.domData.nextKey(),i=h.utils.domData.nextKey();h.utils.setDomNodeChildrenFromArrayMapping=function(u,f,e,o,s){function et(n,t){c=d[t];nt!==t&&(it[n]=c);c.indexObservable(nt++);h.utils.fixUpContinuousNodeArray(c.mappedNodes,u);y.push(c);p.push(c)}function w(n,t){if(n)for(var i=0,r=t.length;i<r;i++)t[i]&&h.utils.arrayForEach(t[i].mappedNodes,function(r){n(r,i,t[i].arrayEntry)})}var b,k,l,rt,ot,v,ut;f=f||[];o=o||{};var st=h.utils.domData.get(u,n)===t,d=h.utils.domData.get(u,n)||[],ht=h.utils.arrayMap(d,function(n){return n.arrayEntry}),ct=h.utils.compareArrays(ht,f,o.dontLimitMoves),y=[],g=0,nt=0,tt=[],p=[],a=[],it=[],ft=[],c;for(l=0;b=ct[l];l++){k=b.moved;switch(b.status){case"deleted":k===t&&(c=d[g],c.dependentObservable&&(c.dependentObservable.dispose(),c.dependentObservable=t),h.utils.fixUpContinuousNodeArray(c.mappedNodes,u).length&&(o.beforeRemove&&(y.push(c),p.push(c),c.arrayEntry===i?c=null:a[l]=c),c&&tt.push.apply(tt,c.mappedNodes)));g++;break;case"retained":et(l,g++);break;case"added":k!==t?et(l,k):(c={arrayEntry:b.value,indexObservable:h.observable(nt++)},y.push(c),p.push(c),st||(ft[l]=c))}}for(h.utils.domData.set(u,n,y),w(o.beforeMove,it),h.utils.arrayForEach(tt,o.beforeRemove?h.cleanNode:h.removeNode),l=0,rt=h.virtualElements.firstChild(u);c=p[l];l++){for(c.mappedNodes||h.utils.extend(c,r(u,e,c.arrayEntry,s,c.indexObservable)),ut=0;v=c.mappedNodes[ut];rt=v.nextSibling,ot=v,ut++)v!==rt&&h.virtualElements.insertAfter(u,v,ot);!c.initialized&&s&&(s(c.arrayEntry,c.mappedNodes,c.indexObservable),c.initialized=!0)}for(w(o.beforeRemove,a),l=0;l<a.length;++l)a[l]&&(a[l].arrayEntry=i);w(o.afterMove,it);w(o.afterAdd,ft)}}();h.exportSymbol("utils.setDomNodeChildrenFromArrayMapping",h.utils.setDomNodeChildrenFromArrayMapping);h.nativeTemplateEngine=function(){this.allowTemplateRewriting=!1};h.nativeTemplateEngine.prototype=new h.templateEngine;h.nativeTemplateEngine.prototype.constructor=h.nativeTemplateEngine;h.nativeTemplateEngine.prototype.renderTemplateSource=function(n,t,i,r){var e=!(h.utils.ieVersion<9),o=e?n.nodes:null,u=o?n.nodes():null,f;return u?h.utils.makeArray(u.cloneNode(!0).childNodes):(f=n.text(),h.utils.parseHtmlFragment(f,r))};h.nativeTemplateEngine.instance=new h.nativeTemplateEngine;h.setTemplateEngine(h.nativeTemplateEngine.instance);h.exportSymbol("nativeTemplateEngine",h.nativeTemplateEngine),function(){h.jqueryTmplTemplateEngine=function(){function t(){if(n<2)throw new Error("Your version of jQuery.tmpl is too old. Please upgrade to jQuery.tmpl 1.0.0pre or later.");}function u(n,t,i){return r.tmpl(n,t,i)}var n=this.jQueryTmplVersion=function(){if(!r||!r.tmpl)return 0;try{if(r.tmpl.tag.tmpl.open.toString().indexOf("__")>=0)return 2}catch(n){}return 1}();this.renderTemplateSource=function(n,f,e,o){var s,h;o=o||i;e=e||{};t();s=n.data("precompiled");s||(h=n.text()||"",h="{{ko_with $item.koBindingContext}}"+h+"{{/ko_with}}",s=r.template(null,h),n.data("precompiled",s));var l=[f.$data],a=r.extend({koBindingContext:f},e.templateOptions),c=u(s,l,a);return c.appendTo(o.createElement("div")),r.fragments={},c};this.createJavaScriptEvaluatorBlock=function(n){return"{{ko_code ((function() { return "+n+" })()) }}"};this.addTemplate=function(n,t){i.write("<script type='text/html' id='"+n+"'>"+t+"<\/script>")};n>0&&(r.tmpl.tag.ko_code={open:"__.push($1 || '');"},r.tmpl.tag.ko_with={open:"with($1) {",close:"} "})};h.jqueryTmplTemplateEngine.prototype=new h.templateEngine;h.jqueryTmplTemplateEngine.prototype.constructor=h.jqueryTmplTemplateEngine;var n=new h.jqueryTmplTemplateEngine;n.jQueryTmplVersion>0&&h.setTemplateEngine(n);h.exportSymbol("jqueryTmplTemplateEngine",h.jqueryTmplTemplateEngine)}()})})()})(),function(n){"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?n(require("knockout"),exports):"function"==typeof define&&define.amd?define(["knockout","exports"],n):n(ko,ko.mapping={})}(function(n,t){function v(n,i){var o,r;for(r in i)if(i.hasOwnProperty(r)&&i[r])if(o=t.getType(n[r]),r&&n[r]&&"array"!==o&&"string"!==o)v(n[r],i[r]);else if("array"===t.getType(n[r])&&"array"===t.getType(i[r])){o=n;for(var h=r,f=n[r],e=i[r],s={},u=f.length-1;0<=u;--u)s[f[u]]=f[u];for(u=e.length-1;0<=u;--u)s[e[u]]=e[u];f=[];e=void 0;for(e in s)f.push(s[e]);o[h]=f}else n[r]=i[r]}function e(n,t){var i={};return v(i,n),v(i,t),i}function y(n,t){for(var f,i=e({},n),o=nt.length-1;0<=o;o--)f=nt[o],i[f]&&(i[""]instanceof Object||(i[""]={}),i[""][f]=i[f],delete i[f]);return t&&(i.ignore=u(t.ignore,i.ignore),i.include=u(t.include,i.include),i.copy=u(t.copy,i.copy),i.observe=u(t.observe,i.observe)),i.ignore=u(i.ignore,r.ignore),i.include=u(i.include,r.include),i.copy=u(i.copy,r.copy),i.observe=u(i.observe,r.observe),i.mappedProperties=i.mappedProperties||{},i.copiedProperties=i.copiedProperties||{},i}function u(i,r){return"array"!==t.getType(i)&&(i="undefined"===t.getType(i)?[]:[i]),"array"!==t.getType(r)&&(r="undefined"===t.getType(r)?[]:[r]),n.utils.arrayGetDistinctValues(i.concat(r))}function o(r,u,a,v,y,p,b){var lt="array"===t.getType(n.utils.unwrapObservable(u)),nt,it,rt,et,ht;p=p||"";t.isMapped(r)&&(nt=n.utils.unwrapObservable(r)[i],a=e(nt,a));var vt=b||y,ct=function(){return a[v]&&a[v].create instanceof Function},yt=function(t){var i=c,r=n.dependentObservable;return n.dependentObservable=function(t,r,u){var o,e,f;return u=u||{},t&&"object"==typeof t&&(u=t),f=u.deferEvaluation,o=!1,u.deferEvaluation=!0,t=new h(t,r,u),f||(e=t,f=n.dependentObservable,n.dependentObservable=h,t=n.isWriteableObservable(e),n.dependentObservable=f,f=h({read:function(){return o||(n.utils.arrayRemoveItem(i,e),o=!0),e.apply(e,arguments)},write:t&&function(n){return e(n)},deferEvaluation:!0}),f.__DO=e,t=f,i.push(t)),t},n.dependentObservable.fn=h.fn,n.computed=n.dependentObservable,t=n.utils.unwrapObservable(y)instanceof Array?a[v].create({data:t||u,parent:vt,skip:tt}):a[v].create({data:t||u,parent:vt}),n.dependentObservable=r,n.computed=n.dependentObservable,t},ft=function(){return a[v]&&a[v].update instanceof Function},ot=function(t,i){var r={data:i||u,parent:vt,target:n.utils.unwrapObservable(t)};return n.isWriteableObservable(t)&&(r.observable=t),a[v].update(r)};if(b=l.get(u))return b;if(v=v||"",lt){var lt=[],ut=!1,g=function(n){return n};a[v]&&a[v].key&&(g=a[v].key,ut=!0);n.isObservable(r)||(r=n.observableArray([]),r.mappedRemove=function(n){var t="function"==typeof n?n:function(t){return t===g(n)};return r.remove(function(n){return t(g(n))})},r.mappedRemoveAll=function(t){var i=f(t,g);return r.remove(function(t){return-1!=n.utils.arrayIndexOf(i,g(t))})},r.mappedDestroy=function(n){var t="function"==typeof n?n:function(t){return t===g(n)};return r.destroy(function(n){return t(g(n))})},r.mappedDestroyAll=function(t){var i=f(t,g);return r.destroy(function(t){return-1!=n.utils.arrayIndexOf(i,g(t))})},r.mappedIndexOf=function(t){var i=f(r(),g);return t=g(t),n.utils.arrayIndexOf(i,t)},r.mappedGet=function(n){return r()[r.mappedIndexOf(n)]},r.mappedCreate=function(t){if(-1!==r.mappedIndexOf(t))throw Error("There already is an object with the key that you specified.");var i=ct()?yt(t):t;return ft()&&(t=ot(i,t),n.isWriteableObservable(i)?i(t):i=t),r.push(i),i});b=f(n.utils.unwrapObservable(r),g).sort();nt=f(u,g);ut&&nt.sort();ut=n.utils.compareArrays(b,nt);b={};for(var st=n.utils.unwrapObservable(u),pt={},wt=!0,nt=0,at=st.length;nt<at;nt++){if(it=g(st[nt]),void 0===it||it instanceof Object){wt=!1;break}pt[it]=st[nt]}var st=[],bt=0,nt=0;for(at=ut.length;nt<at;nt++){it=ut[nt];et=p+"["+nt+"]";switch(it.status){case"added":ht=wt?pt[it.value]:s(n.utils.unwrapObservable(u),it.value,g);rt=o(void 0,ht,a,v,r,et,y);ct()||(rt=n.utils.unwrapObservable(rt));et=w(n.utils.unwrapObservable(u),ht,b);rt===tt?bt++:st[et-bt]=rt;b[et]=!0;break;case"retained":ht=wt?pt[it.value]:s(n.utils.unwrapObservable(u),it.value,g);rt=s(r,it.value,g);o(rt,ht,a,v,r,et,y);et=w(n.utils.unwrapObservable(u),ht,b);st[et]=rt;b[et]=!0;break;case"deleted":rt=s(r,it.value,g)}lt.push({event:it.status,item:rt})}r(st);a[v]&&a[v].arrayChanged&&n.utils.arrayForEach(lt,function(n){a[v].arrayChanged(n.event,n.item)})}else if(d(u)){if(r=n.utils.unwrapObservable(r),!r){if(ct())return ut=yt(),ft()&&(ut=ot(ut)),ut;if(ft())return ot(ut);r={}}if(ft()&&(r=ot(r)),l.save(u,r),ft())return r;k(u,function(t){var f=p.length?p+"."+t:t;if(-1==n.utils.arrayIndexOf(a.ignore,f))if(-1!=n.utils.arrayIndexOf(a.copy,f))r[t]=u[t];else if("object"!=typeof u[t]&&"array"!=typeof u[t]&&0<a.observe.length&&-1==n.utils.arrayIndexOf(a.observe,f))r[t]=u[t],a.copiedProperties[f]=!0;else{var i=l.get(u[t]),e=o(r[t],u[t],a,t,r,f,r),i=i||e;0<a.observe.length&&-1==n.utils.arrayIndexOf(a.observe,f)?(r[t]=i(),a.copiedProperties[f]=!0):(n.isWriteableObservable(r[t])?(i=n.utils.unwrapObservable(i),r[t]()!==i)&&r[t](i):(i=void 0===r[t]?i:n.utils.unwrapObservable(i),r[t]=i),a.mappedProperties[f]=!0)}})}else switch(t.getType(u)){case"function":ft()?n.isWriteableObservable(u)?(u(ot(u)),r=u):r=ot(u):r=u;break;default:if(n.isWriteableObservable(r))return rt=ft()?ot(r):n.utils.unwrapObservable(u),r(rt),rt;ct()||ft();r=ct()?yt():n.observable(n.utils.unwrapObservable(u));ft()&&r(ot(r))}return r}function w(n,t,i){for(var r=0,u=n.length;r<u;r++)if(!0!==i[r]&&n[r]===t)return r;return null}function b(i,r){var u;return r&&(u=r(i)),"undefined"===t.getType(u)&&(u=i),n.utils.unwrapObservable(u)}function s(t,i,r){var u,e,f;for(t=n.utils.unwrapObservable(t),u=0,e=t.length;u<e;u++)if(f=t[u],b(f,r)===i)return f;throw Error("When calling ko.update*, the key '"+i+"' was not found!");}function f(t,i){return n.utils.arrayMap(n.utils.unwrapObservable(t),function(n){return i?b(n,i):n})}function k(n,i){if("array"===t.getType(n))for(var r=0;r<n.length;r++)i(r);else for(r in n)i(r)}function d(n){var i=t.getType(n);return("object"===i||"array"===i)&&null!==n}function it(){var t=[],i=[];this.save=function(r,u){var f=n.utils.arrayIndexOf(t,r);0<=f?i[f]=u:(t.push(r),i.push(u))};this.get=function(r){return r=n.utils.arrayIndexOf(t,r),0<=r?i[r]:void 0}}function g(){var n={},t=function(t){var i;try{i=t}catch(r){i="$$$"}return t=n[i],void 0===t&&(t=new it,n[i]=t),t};this.save=function(n,i){t(n).save(n,i)};this.get=function(n){return t(n).get(n)}}var i="__ko_mapping__",h=n.dependentObservable,p=0,c,l,nt=["create","update","key","arrayChanged"],tt={},a={include:["_destroy"],ignore:[],copy:[],observe:[]},r=a;t.isMapped=function(t){return(t=n.utils.unwrapObservable(t))&&t[i]};t.fromJS=function(n){var t,r,u,f;if(0==arguments.length)throw Error("When calling ko.fromJS, pass the object you want to convert.");try{if(p++||(c=[],l=new g),2==arguments.length&&(arguments[1][i]?r=arguments[1]:t=arguments[1]),3==arguments.length&&(t=arguments[1],r=arguments[2]),r&&(t=e(t,r[i])),t=y(t),u=o(r,n,t),r&&(u=r),!--p)for(;c.length;)f=c.pop(),f&&(f(),f.__DO.throttleEvaluation=f.throttleEvaluation);return u[i]=e(u[i],t),u}catch(s){throw p=0,s;}};t.fromJSON=function(i){var r=n.utils.parseJson(i);return arguments[0]=r,t.fromJS.apply(this,arguments)};t.updateFromJS=function(){throw Error("ko.mapping.updateFromJS, use ko.mapping.fromJS instead. Please note that the order of parameters is different!");};t.updateFromJSON=function(){throw Error("ko.mapping.updateFromJSON, use ko.mapping.fromJSON instead. Please note that the order of parameters is different!");};t.toJS=function(u,f){if(r||t.resetDefaultOptions(),0==arguments.length)throw Error("When calling ko.mapping.toJS, pass the object you want to convert.");if("array"!==t.getType(r.ignore))throw Error("ko.mapping.defaultOptions().ignore should be an array.");if("array"!==t.getType(r.include))throw Error("ko.mapping.defaultOptions().include should be an array.");if("array"!==t.getType(r.copy))throw Error("ko.mapping.defaultOptions().copy should be an array.");return f=y(f,u[i]),t.visitModel(u,function(t){return n.utils.unwrapObservable(t)},f)};t.toJSON=function(i,r){var u=t.toJS(i,r);return n.utils.stringifyJson(u)};t.defaultOptions=function(){if(0<arguments.length)r=arguments[0];else return r};t.resetDefaultOptions=function(){r={include:a.include.slice(0),ignore:a.ignore.slice(0),copy:a.copy.slice(0)}};t.getType=function(n){if(n&&"object"==typeof n){if(n.constructor===Date)return"date";if(n.constructor===Array)return"array"}return typeof n};t.visitModel=function(r,u,f){var o,e,s;if(f=f||{},f.visitedObjects=f.visitedObjects||new g,e=n.utils.unwrapObservable(r),d(e))f=y(f,e[i]),u(r,f.parentName),o="array"===t.getType(e)?[]:{};else return u(r,f.parentName);return f.visitedObjects.save(r,o),s=f.parentName,k(e,function(r){if(!(f.ignore&&-1!=n.utils.arrayIndexOf(f.ignore,r))){var h=e[r],c=f,l=s||"";if("array"===t.getType(e)?s&&(l+="["+r+"]"):(s&&(l+="."),l+=r),c.parentName=l,!(-1===n.utils.arrayIndexOf(f.copy,r)&&-1===n.utils.arrayIndexOf(f.include,r)&&e[i]&&e[i].mappedProperties&&!e[i].mappedProperties[r]&&e[i].copiedProperties&&!e[i].copiedProperties[r]&&"array"!==t.getType(e)))switch(t.getType(n.utils.unwrapObservable(h))){case"object":case"array":case"undefined":c=f.visitedObjects.get(h);o[r]="undefined"!==t.getType(c)?c:t.visitModel(h,u,f);break;default:o[r]=u(h,f.parentName)}}}),o}});var createWrap=function(n,t){function i(n){var t=typeof n;return t==="object"&&(n?n.constructor==Date?t="date":Object.prototype.toString.call(n)=="[object Array]"&&(t="array"):t="null"),t}function h(t){var u={},i,r;for(i in t)(r=t[i],n.isComputed(r))||(u[i]=f(r));return u}function o(n){var i=[],t,r;if(!n||n.length==0)return i;for(t=0,r=n.length;t<r;++t)i.push(f(n[t]));return i}function f(t){var u=n.isObservable(t),r;return u?(r=t(),i(r)=="array"?o(r):r):i(t)=="array"?o(t):i(t)=="object"?h(t):t}function s(){r=[{obj:null,wrapped:null,lvl:""}]}function c(n,t){for(var i,o,h,s,f=0;f<r.length;++f)if(r[f].obj===n)return r[f].wrapped;if(i={},t&&t[e()])i=t[e()](i,n);else for(o in n)h=n[o],r.push({obj:n,wrapped:i,lvl:e()+"/"+o}),s=u(h,t),s&&(i[o]=s),r.pop();return i}function l(t,i){var f=n.observableArray(),r,e;if(!t||t.length==0)return f;for(r=0,e=t.length;r<e;++r)f.push(u(t[r],i,!0));return f}function e(){return r[r.length-1].lvl}function u(t,r,u){if(u&&i(t)!=="array"&&i(t)!=="object"&&i(t)!=="function")return t;if(i(t)==="array")return l(t,r);if(i(t)==="object")return c(t,r);if(i(t)==="function")return null;var f=n.observable();return f(t),f}t.fromJS=function(n,t){return s(),u(n,t)};t.updateFromJS=function(t,i,r){return s(),t(n.utils.unwrapObservable(u(i,r)))};t.fromJSON=function(i,r){var u=n.utils.parseJson(i);return arguments[0]=u,t.fromJS.apply(this,r)};t.toJS=function(n){return f(n)};t.toJSON=function(i){var r=t.toJS(i);return n.utils.stringifyJson(r)};var r;return t};(function(n){typeof require=="function"&&typeof exports=="object"&&typeof module=="object"?n(require("knockout"),exports):typeof define=="function"&&define.amd?define(["knockout","exports"],n):n(ko,ko.wrap={})})(function(n,t){t.createNew=function(){return createWrap(n,{})};createWrap(n,t)}),function(n,t){n.bindingHandlers.notify={counter:0,prefix:"__notifyId_",init:function(i,r){var u=n.bindingHandlers.notify.prefix+ ++n.bindingHandlers.notify.counter,f=r();f.notify=function(n,r){var e=$("<div><\/div>"),o,f;e.attr("id",u);e.addClass("toast-container");e.appendTo($("body"));o=$(i).offset().top;e.css({top:o+"px"});f={containerId:u};switch(r){case"info":t.info(n,"",f);break;case"warning":t.warning(n,"",f);break;case"success":t.success(n,"",f);break;case"error":t.error(n,"",f);break;default:t.info(n,"",f)}}}};n.bindingHandlers.spinned={init:function(n,t){n.onclick=function(){var n=t();n.isVisible&&Webropol.Shared.SpinLoader.startSpinAfterDelay(n.delay)}}};n.bindingHandlers.sync={elements:[],init:function(t,i){var r=i(),u=n.utils.arrayFirst(n.bindingHandlers.sync.elements,function(n){return n.o==r});u==null?n.bindingHandlers.sync.elements.push({o:r,doms:[t]}):u.doms.push(t);r.syncronize||(r.syncronize=function(t){var h=this,i=n.utils.arrayFirst(n.bindingHandlers.sync.elements,function(n){return n.o==h});if($(i.doms).each(function(){var n=$(this).parents(".scrollable").first(),i;if(!Webropol.Shared.Common.isScrolledIntoView2(this,n)||t){if(i=$(this),$(i).hasClass("report-question")&&!t)return;var u=i.find(".report-question-menu"),f=u.position()&&u.position().top||0,r=n.scrollTop()+i.position().top+f;n.animate({scrollTop:r+"px"},{complete:function(){setTimeout(function(){r=n.scrollTop()+i.position().top+f;n.animate({scrollTop:r+"px"})},400)}})}}),!t&&i.doms.length>1&&$(i.doms[0]).hasClass("question-tree-item")&&$(i.doms[1]).hasClass("report-question")){var e=i.doms[0],r=i.doms[1],c=$(e).height()+$(e).position().top,l=$(r).position().top;if(c<l){var u=$(r).parents(".scrollable").first(),o=$(r).find(".report-question-menu"),s=o.position()&&o.position().top||0,f=u.scrollTop()+$(r).position().top+s;u.animate({scrollTop:f+"px"},{complete:function(){setTimeout(function(){f=u.scrollTop()+$(r).position().top+s;u.animate({scrollTop:f+"px"})},400)}})}}})}};n.bindingHandlers.scrolledIntoView={init:function(t,i,r,u){var f=r.get("isVisibleObservable"),e=r.get("parentScrollable"),o;u.position=n.shared.simulatedObservable(t,function(){var n=$(t);return n.length>0?n.offset().top-$(window).scrollTop():null});o=u.position.subscribe(function(){check(t)&&(f(!0),o.dispose(),u.position.dispose())});this.check=function(n){var i,t;return e?(t=$(n).parents(e).first(),i=Webropol.Shared.Common.isScrolledIntoViewReliable($(n),t)):(t=$(n).parents(".scrollable").first(),i=Webropol.Shared.Common.isScrolledIntoView2($(n),t)),i};check(t)&&f(!0)},update:function(){}};n.bindingHandlers.scrollingTo={init:function(n,t){var u=t(),i=$(n).closest("."+u.scrollContainer),r=u.scrollTo,f=r!=null?$(n).closest("."+r):null,e=r!=null?$("."+r):null,h=f&&f.length>0?f:e&&e.length>0?e:$(n),o=u.duration,s=h.offset().top-i.offset().top+i.scrollTop();o&&o>0?i.animate({scrollTop:s},o):i.scrollTop(s)}};n.bindingHandlers.sort={init:function(n,t){var i=!1;n.style.cursor="pointer";n.onclick=function(){var u=t(),r=u.prop,f=u.arr;$(n).siblings().removeClass("sorting_asc");$(n).siblings().removeClass("sorting_desc");i=!i;i?($(n).removeClass("sorting_asc"),$(n).addClass("sorting_desc"),f.sort(function(n,t){return n[r]()==t[r]()?0:n[r]()<t[r]()?-1:1})):($(n).removeClass("sorting_desc"),$(n).addClass("sorting_asc"),f.sort(function(n,t){return n[r]()==t[r]()?0:n[r]()>t[r]()?-1:1}))}}};n.bindingHandlers.checkbox={init:function(t,i){var u,r;if(r=i(),!n.isWriteableObservable(r))throw"You must pass an observable or writeable computed";u=$(t);u.on("click",function(n){r(!r());Webropol.Shared.Common.stopEvent(n,!1)});n.computed({disposeWhenNodeIsRemoved:t,read:function(){u.toggleClass("active",r())}})}};n.bindingHandlers.colorpicker={init:function(n,t,i,r){$(n).ColorPicker({onBeforeShow:function(){var n=$(this).children("input").val();$(this).ColorPickerSetColor(n)},onShow:function(n){return $(n).fadeIn(500),!1},onHide:function(t){var e=$(n).children("input").val(),u=$(t).data("colorpicker").color,f=u=="transparent"?u:"#"+$(n).ConvertHsbToHex(u);return e!=f&&($(n).removeClass("color-selector-transparent"),$(n).children("div").css("backgroundColor",f),u=="transparent"&&$(n).addClass("color-selector-transparent"),$(n).children("input").val(f).trigger("change")),i().CallBackFunction&&i().CallBackFunction(r),$(t).fadeOut(500),!1},onChange:function(n,t){var i=t=="transparent"?t:"#"+t;$("#colorSelector div").css("backgroundColor",i)}})},update:function(t,i){var e=n.unwrap(i()),u=$(t),f=u.children("div"),r;f.css("backgroundColor",e);r=f.css("background-color");(r==="transparent"||r==="rgba(0, 0, 0, 0)")&&u.addClass("color-selector-transparent")}};n.bindingHandlers.disabledLink={init:function(t,i){$(t).on("click",function(t){n.unwrap(i())&&(t.preventDefault(),t.stopImmediatePropagation())})},update:function(t,i,r){var u=n.utils.unwrapObservable(i()),f=r().disabledLinkTitle;n.bindingHandlers.css.update(t,function(){return{disabled:u}});n.bindingHandlers.attr.update(t,function(){return{"aria-disabled":u}});f!=undefined&&u&&n.bindingHandlers.attr.update(t,function(){return{title:f}})}};n.bindingHandlers.numeric={setValue:function(n,t){t==null?n.val(""):(n.val()!=t||n.val()==="")&&n.val(String(t))},init:function(t,i){function rt(){var r=$("<div>",{"class":"input-number-box"}),t=$("<div>",{"class":"input-spinner-up"}),n,i;t.on("mousedown",function(){l(1)});n=$("<div>",{"class":"input-spinner-down"});n.on("mousedown",function(){l(-1)});i=$("<div>",{"class":"input-spinners"}).append(t).append(n);u.wrap(r).after(i).attr("type","text")}function l(n){var t=(parseFloat(u.val())||0)+n;return p(t),!1}function a(n){var t=parseFloat(n)||0;return!h&&t<0?0:t}function p(t){var i=!h&&t<0?0:t,o,r,s,u;n.isObservable(f)?(o=a(f()),o>i&&f(i)):typeof f=="number"&&(r=a(f),i<r&&(i=r));n.isObservable(e)?(s=a(e()),s<i&&e(i)):typeof e=="number"&&(u=a(e),i>u&&(i=u));v(i)}function ut(){var r=h?c+"?":"",n="",t,i;return y&&(t="\\d"+(o?"{0,"+o+"}":"+"),n="(\\."+t+")?"),i="^"+r+"[0-9]\\d*"+n+"$",new RegExp(i)}var u=$(t),r=i(),v=r.value,h=r.allowNegative||!1,y=r.allowFloat||!1,w=r.defaultValue,f=r.minValue,e=r.maxValue,d=r.useSpinner||!1,b=r.disallowLeadZeroes||!1,o=r.afterPoint,s=".",g=",",c="-",nt=[110,188,190],tt=[65,67,86,88],it=[46,8,9,27,13,37,39,36,35],k;o&&(y=!0);k=ut();u.prop("type")!=="text"&&console.warn("input with numeric binding should have type='text'");d&&rt();v()===null&&w&&p(w);u.on("keydown",function(n){function e(){$(this).off("blur",e);$(this).trigger("change")}var t=n||window.event,o=t.key,i=t.keyCode||t.which,u=$(this).val(),r=t.target.selectionStart;if(i===38){Webropol.Shared.Common.stopEvent(t,!0);l(1);return}if(i===40){Webropol.Shared.Common.stopEvent(t,!0);l(-1);return}var a=!t.shiftKey&&(i>=48&&i<=57||i>=96&&i<=105),f=y&&u.indexOf(s)===-1&&nt.indexOf(i)!==-1&&r>0&&!(u.indexOf(c)===0&&r===1),v=!b||b&&!(r===0&&(i===48||i===96)),p=a||f||it.indexOf(i)!==-1||t.ctrlKey===!0&&tt.indexOf(t.which)!==-1||h&&u.indexOf(c)===-1&&o===c&&r===0;if(p&&v)if(f){Webropol.Shared.Common.stopEvent(t,!0);$(this).val(u.substr(0,r)+s+u.substr(r));$(this).on("blur",e)}else return;else Webropol.Shared.Common.stopEvent(t,!0)});u.on("keypress",function(n){var t=$(this).val(),i=t.indexOf(s),r=i>-1&&n.target.selectionStart>i;r&&o&&t.split(s)[1].length>=o&&Webropol.Shared.Common.stopEvent(n,!0)});u.on("keyup",function(){var n=u.val(),t;return n?(n=n.replace(g,s),k.test(n)&&(t=parseFloat(n),p(t))):v(null),!0})},update:function(t,i){var r=i().value;n.bindingHandlers.numeric.setValue($(t),r())}};n.bindingHandlers.SharedDateTimePickerOptions=function(n){var r=this,t,i;this.DefaultPickerOptions={useCurrent:!1,format:"DD.MM.YYYY",widgetParent:"body",widgetPositioning:{horizontal:"right",vertical:"auto"}};t=function(n){var t=$.trim(n.locale);(t.length===0||t==="en")&&(n.locale="en-gb")};i=function(n){var i=$.extend({},r.DefaultPickerOptions,n&&n.pickerOptions);return t(i),i};this.PickerOptions=i(n)};n.bindingHandlers.sharedDateTimePicker={init:function(t,i,r){function y(n,t){return n==null&&t==null?!0:n instanceof Date&&t instanceof Date?n.getTime()==t.getTime():!1}var f=i()||{},l=new n.bindingHandlers.SharedDateTimePickerOptions(f),o=l.PickerOptions,e=$(t).datetimepicker(o),s,h,c;if(o.widgetParent==="body")e.on("dp.show",Webropol.Shared.Common.onBootstrapDateTimePickerShown);var u=e.data("DateTimePicker"),a=f.userTimeZoneOffset>0?f.userTimeZoneOffset:0,v=o.format.toLowerCase().indexOf("y")>=0;if(v)e.on("dp.show",function(){if($(".input-group.date:visible").each(function(){var n=$(this).data("DateTimePicker");n!=null&&n!=u&&n.hide()}),f.lockPastDates===!0){var n=Webropol.Shared.Common.getDateTimeNow(a),t=new Date(n.toDateString());u.minDate(t)}});s=f.value;e.on("dp.change",function(n){var i=s(),t=n.date?n.date.toDate():null;y(i,t)||s(t);r.has("change")&&r.get("change")()});r.has("disable")&&(r.get("disable")()?u.disable():u.enable(),h=r.get("disable").subscribe(function(n){n?u.disable():u.enable()}),n.utils.domNodeDisposal.addDisposeCallback(t,function(){h.dispose()}));c=setInterval(function(){$.contains(document,e[0])||(clearInterval(c),u.destroy())},2e3)},update:function(t,i){var s=i()||{},w=s.value,u=w(),h=$(t).data("DateTimePicker"),b=h.format(),g=b.toLowerCase().indexOf("y")>=0,nt=b.toLowerCase().indexOf("h")>=0,p=!g&&nt,k,o,r,f,c,l,a,d,e,v,y;if(p&&(k=w,o=s.dateValues,o instanceof Array))if(l=k(),o.length==1)r=o[0],n.isObservable(r)&&r()!=null&&(f=new Date(r().toDateString()),c=new Date(f.getFullYear(),f.getMonth(),f.getDate(),l.getHours(),l.getMinutes(),0,0),r(c),u=c);else for(a=0;a<o.length;a++)r=o[a],n.isObservable(r)&&r()!=null&&(f=new Date(r().toDateString()),c=new Date(f.getFullYear(),f.getMonth(),f.getDate(),l.getHours(),l.getMinutes(),0,0),r(c));d=!p||p&&s.dateValues instanceof Array&&s.dateValues.length==1;d&&(e=s.validSettings,e&&(n.isObservable(e.ValidStartDate)&&e.ValidStartDate()!=null&&(v=e.ValidStartDate(),h.minDate(v),u!=null&&u<v&&(u=v)),n.isObservable(e.ValidEndDate)&&e.ValidEndDate()!=null&&(y=new Date(new Date(e.ValidEndDate().toDateString()).getTime()+864e5-1),h.maxDate(y),u!=null&&u>y&&(u=y))));u?h.date(u):h.date(null)}};n.bindingHandlers.contentEditable={init:function(n,t){$(n).attr("contenteditable",!0);$(n).on("blur",function(){var n=t();n($(this).text())})},update:function(t,i){var r=n.utils.unwrapObservable(i());r==null&&(r="");$(t).text(r)}};n.bindingHandlers.forExistingEach={makeTemplateValueAccessor:function(t,i){var u=t(),r=n.utils.peekObservable(u),f=i().newItemTemplateName,e=i().childrenSelector;return!r||typeof r.length=="number"?n.observable({foreach:u,templateEngine:new n.existingDomTemplateEngine(e),newItemTemplateName:f}):(n.utils.unwrapObservable(u),{foreach:r.data,as:r.as,includeDestroyed:r.includeDestroyed,afterAdd:r.afterAdd,beforeRemove:r.beforeRemove,afterRender:r.afterRender,beforeMove:r.beforeMove,afterMove:r.afterMove,templateEngine:n.existingDomTemplateEngine.instance,newItemTemplateName:f})},init:function(){return{controlsDescendantBindings:!0}},update:function(t,i,r,u,f){var e=n.bindingHandlers.forExistingEach.makeTemplateValueAccessor(i,r),o=n.bindingHandlers.template.update(t,e,r,u,f);return e().templateEngine.isAlreadyRendered=!0,o}};n.virtualElements.allowedBindings.forExistingEach=!0;n.bindingHandlers.groupedSelect={update:function(t,i){var k=n.utils.unwrapObservable(i()),u=k.groups,b,d="Label",g="Options",nt="Text",tt="Value",s,f,o,c,l,it,e,a,v,r,h,rt,y,p,w;if(typeof u!="undefined"&&u)b=u.coll;else throw'The "groupedSelect" binding requires a "groups" object be specified.';if(!b)throw'The "groupedSelect" binding\'s "groups" object requires that a collection (array or observableArray) be specified.';for(typeof u.label=="string"&&u.label.length&&(d=u.label),typeof u.options=="object"&&(r=u.options,typeof r.coll=="string"&&r.coll.length&&(g=r.coll),typeof r.text=="string"&&r.text.length&&(nt=r.text),typeof r.val=="string"&&r.val.length&&(tt=r.val)),s=k.defaultOpt,typeof s!="undefined"&&s&&(f=s.text,o=s.val),(typeof o!="string"||!o||!o.length)&&typeof f=="string"&&f&&f.length&&(o=""),t.innerHTML="",e?e--:typeof f=="string"&&f&&f.length&&(c=document.createElement("option"),c.setAttribute("value",o),c.innerHTML=f,t.appendChild(c)),l=n.utils.unwrapObservable(b),it=l.length,e=0;e<it;e++)if(a=n.utils.unwrapObservable(l[e][d]),a&&a.length){for(v=document.createElement("optgroup"),v.setAttribute("label",a),r=n.utils.unwrapObservable(l[e][g]),h=0,rt=r.length;h<rt;h++)(y=n.utils.unwrapObservable(r[h][nt]),y&&y.length)&&(p=document.createElement("option"),p.innerHTML=y,w=n.utils.unwrapObservable(r[h][tt]),w&&w.length&&p.setAttribute("value",w),v.appendChild(p));t.appendChild(v)}return!0}};n.bindingHandlers.popover={getPosition:function(n){var i=n[0],r=i.tagName=="BODY",t=i.getBoundingClientRect();t.width==null&&(t=$.extend({},t,{width:t.right-t.left,height:t.bottom-t.top}));var u=window.SVGElement&&i instanceof window.SVGElement,f=r?{top:0,left:0}:u?null:n.offset(),e={scroll:r?document.documentElement.scrollTop||document.body.scrollTop:n.scrollTop()},o=r?{width:$(window).width(),height:$(window).height()}:null;return $.extend({},t,e,o,f)},calculatePosition:function(n,t,i,r,u){var f={left:0,top:0};switch(n){case"right":f.left=t.x+i.left+u.x/2;f.top=t.y/2+i.top-r.y/2;break;case"left":f.left=i.left-r.x-u.x/2;f.top=t.y/2+i.top-r.y/2;break;case"top":f.left=i.left+(t.x/2-r.x/2);f.top=i.top-r.y-u.y;break;case"bottom":f.left=i.left+(t.x/2-r.x/2);f.top=i.top+t.y+u.y}return f},getViewportAdjustedDelta:function(t,i,r,u,f){var o={top:0,left:0},e,s,h,c;return t.length?(e=n.bindingHandlers.popover.getPosition(t),/right|left/.test(i)?(s=r.top-e.scroll,h=r.top-e.scroll+f,s<e.top?o.top=e.top-s:h>e.top+e.height&&(o.top=e.top+e.height-h)):(c=r.left+u,r.left<e.left?o.left=e.left-r.left:c>e.right&&(o.left=e.left+e.width-c)),o):o},init:function(t,i){var u=$(t),e=!u||u.data("bs.popover"),r,f;if(!e&&(r=n.utils.unwrapObservable(i()),f=r.template||r.content,f)){var o=$(r.viewport),s=function(n,t){var i=n.tip(),r=i.find("[data-on-click-action='close']"),f,e;return r.length&&(r.is(t.target)||r.find(t.target).length)?!0:(f=!u.is(t.target)&&u.has(t.target).length==0&&!i.is(t.target)&&i.has(t.target).length==0,e=!0,f===!0&&n.options.customHideEvent&&$.isFunction(n.options.customHideEvent)&&(e=n.options.customHideEvent(t)),f&&e)},h={$togglePopoverElement:u,viewModel:r.viewModel,templateName:r.template,hideCalculationFunc:s,isOpenedByDefault:r.isOpenedByDefault,showCallback:function(t){var i=t.tip(),h=r.additionalStyle;h&&h.length&&i.addClass(h);var v=n.bindingHandlers.popover.getPosition(u),y={x:u.outerWidth(),y:u.outerHeight()},c={x:i.outerWidth(),y:i.outerHeight()},a=t.arrow(),p={x:a.outerWidth(),y:a.outerHeight()},l=r.placement,e=n.bindingHandlers.popover.calculatePosition(l,y,v,c,p),f=n.bindingHandlers.popover.getViewportAdjustedDelta(o,l,e,c.x,c.y);f.left?e.left+=f.left:e.top+=f.top;var s=/top|bottom/.test(l),w=s?f.left*2:f.top*2,b=s?"offsetWidth":"offsetHeight";i.offset(e);t.arrow().css(s?"left":"top",50*(1-w/i[0][b])+"%").css(s?"top":"left","");typeof r.showCallback=="function"&&r.showCallback()}},c={placement:r.placement||"right",container:r.container||null,trigger:r.trigger||"manual",content:r.content||undefined,html:r.isHtml||!0,additionalStyle:r.additionalStyle||"",customHideEvent:r.customHideEvent||undefined,sanitize:!1};n.shared.createPopoverFromTemplate(h,c)}}};n.bindingHandlers.fadeVisible={init:function(t,i){var r=i();$(t).toggle(n.utils.unwrapObservable(r))},update:function(t,i){var r=i();n.utils.unwrapObservable(r)?$(t).fadeIn():$(t).fadeOut()}};n.bindingHandlers.slideUpDownVisible={init:function(t,i){var r=i();$(t).toggle(n.utils.unwrapObservable(r))},update:function(t,i){var r=i();n.utils.unwrapObservable(r)?$(t).slideDown():$(t).slideUp()}};n.bindingHandlers.sharedBootstrapSelect={init:function(n,t){var i=$(n),r=t()||{},u=r.selectOptions||{};i.selectpicker(u)},update:function(){}};n.bindingHandlers.saveDomElementTo={init:function(n,t){var i=t();i(n)}};n.bindingHandlers.groupedOptions={update:function(t,i,r){function tt(t,i,r){var f=typeof i,u;return f=="function"?i(t):f=="string"?(u=t[i],typeof u=="function")?u():n.utils.isObservable(u)?n.mapping.toJS(u):u:r}var g,v,s,y,nt,p,e,w,o,h,rt,b,ut,ft,a,c,l,ot,d,u,f,st;if(t.tagName!="SELECT")throw new Error("groupedOptions binding applies only to SELECT elements");for(g=function(n){return n&&n.tagName&&n.tagName=="OPTION"&&n.selected},v=[],u=0;u<t.childNodes.length;u++)if(s=t.childNodes[u],s.tagName=="OPTGROUP"){if(s.childNodes!=undefined)for(y=0;y<s.childNodes.length;y++)nt=s.childNodes[y],g(nt)&&v.push(n.selectExtensions.readValue(nt))}else g(s)&&v.push(n.selectExtensions.readValue(s));if(p=t.scrollTop,e=n.utils.unwrapObservable(i()),t.innerHTML="",e){for(typeof e.length!="number"&&(e=[e]),w=r.get("optionsCaption"),w&&(o=document.createElement("OPTION"),n.utils.setTextContent(o,w),n.selectExtensions.writeValue(o,undefined),t.appendChild(o)),h=[],rt=r.get("optionsGroup"),u=0,f=e.length;u<f;u++)b=tt(e[u],rt,""),typeof h[b]=="undefined"&&(h[b]=[]),h[b].push(e[u]);ut=r.get("optionsValue");ft=r.get("optionsText");for(a in h)for(c=null,a!=""&&(c=document.createElement("OPTGROUP"),c.label=a,t.appendChild(c)),u=0,f=h[a].length;u<f;u++){var et=h[a],o=document.createElement("OPTION"),k=tt(et[u],ut),it=tt(et[u],ft,k);k=n.utils.unwrapObservable(k);it=n.utils.unwrapObservable(it);n.selectExtensions.writeValue(o,k);n.utils.setTextContent(o,it.toString());c!=null?c.appendChild(o):t.appendChild(o)}for(l=t.getElementsByTagName("OPTION"),ot=0,u=0,f=l.length;u<f;u++)n.utils.arrayIndexOf(v,n.selectExtensions.readValue(l[u]))>=0&&(n.utils.setOptionNodeSelectionState(l[u],!0),ot++);if(n.utils.ensureSelectElementIsRenderedCorrectly(t),p&&Math.abs(p-t.scrollTop)>20&&(t.scrollTop=p),d=r.get("optionsAfterRender"),d&&typeof d=="function")for(u=0,f=l.length;u<f;u++)st=w?u+1:u,d(l[st],e[u])}}};n.bindingHandlers.sliderValue={init:function(t,i){var u=i(),r,f;if(!(n.isObservable(u)||u.value))throw"You need to define an observable value for the sliderValue. Either pass the observable directly or as the 'value' field in the parameters.";n.isObservable(u)?(r=u,$(t).slider({value:n.unwrap(u)})):(r=u.value,Array.isArray(r)?(r=[u.value[0],u.value[1]],u.value[0]=n.unwrap(r[0]),u.value[1]=n.unwrap(r[1]),$(t).slider(u)):(f=JSON.parse(JSON.stringify(u)),f.value=n.unwrap(r),$(t).slider(f)));$(t).on("slide",function(n){Array.isArray(r)?(r[0](n.value[0]),r[1](n.value[1])):r(n.value)}).on("change",function(n){if(Array.isArray(r)?(r[0](n.value.newValue[0]),r[1](n.value.newValue[1])):r(n.value.newValue),$.isFunction(u.onChange))u.onChange(n.value)});n.utils.domNodeDisposal.addDisposeCallback(t,function(){$(t).slider("destroy");$(t).off("slide")})},update:function(t,i){var r=i(),e,p,c,w,b,s;e=n.isObservable(r)?r:r.value;var f=n.unwrap(r.min),h=n.unwrap(r.max),k=n.unwrap(r.step),v=n.unwrap(r.reversed),d=n.unwrap(r.formatter),g=n.unwrap(r.tooltip),y=n.unwrap(r.sign),nt=n.unwrap(r.orientation),tt=n.unwrap(r.useTickLabels),it=tt!==undefined?tt:!0,u=$(t);if(f!=null&&u.slider("setAttribute","min",parseFloat(f)),h!=null&&u.slider("setAttribute","max",parseFloat(h)),k!=null&&u.slider("setAttribute","step",parseFloat(k)),v!=null&&u.slider("setAttribute","reversed",!v),d!=null&&u.slider("setAttribute","formatter",d),g!=null&&(u.slider("setAttribute","tooltip",g),u.slider("refresh")),Array.isArray(e)?u.slider("setValue",[parseFloat(e[0]()),parseFloat(e[1]())]):u.slider("setValue",parseFloat(e())),f&&h){p=u.slider().parent().find(".slider-tick-label");c="";y&&y!=null&&(c=y);it&&nt==="horizontal"&&(p[0].innerText=f+c,p[1].innerText=h+c);var l=5,a=10,o="0%";f>=0?(a=parseFloat(h)-parseFloat(f),l=parseFloat(e())-parseFloat(f)):(w=Math.abs(parseFloat(f)),a=parseFloat(h)+w,l=parseFloat(e())+w);b=a===0?1:a;o=v?(l/b*100).toString()+"%":(100-l/b*100).toString()+"%";s=u.parent();nt==="horizontal"?(s.find(".min-slider-handle").css("left",o),s.find(".tooltip.tooltip-main ").css("left",o),s.find(".slider-selection.tick-slider-selection").css("width",o)):(s.find(".min-slider-handle").css("top",o),s.find(".tooltip.tooltip-main ").css("top",o),s.find(".slider-selection.tick-slider-selection").css("height",o))}}};n.bindingHandlers.indeterminateValue={update:function(t,i){var r=n.utils.unwrapObservable(i());t.indeterminate=r}},function(n){var t=new n.nativeTemplateEngine;t.url="";t.makeTemplateSource=function(i,r){var u,f;if(typeof i=="string"){if((u=(r||document).getElementById(i),u&&u.tagName.toLowerCase()==="script")||(f=t.toPascalCase(i),Webropol.Shared.Common.callTemplateSync(JSON.stringify({viewName:f}),t.url,function(n){$("body").append(n)}),u=(r||document).getElementById(i),u&&u.tagName.toLowerCase()==="script"))return new n.templateSources.domElement(u)}else if(i&&(i.nodeType===1||i.nodeType===8))return new n.templateSources.anonymousTemplate(i);return null};t.toPascalCase=function(n){return n.replace(/(^|-)([a-z])/g,function(n,t,i){return i.toUpperCase()})};n.onDemandTemplateEngine=t}(n),function(n){n.existingDomTemplateEngine=function(n){this.isAlreadyRendered=!1;this.childrenSelector=n};n.existingDomTemplateEngine.prototype=new n.templateEngine;n.existingDomTemplateEngine.prototype.constructor=n.existingDomTemplateEngine;n.existingDomTemplateEngine.prototype.isTemplateRewritten=function(){return!0};n.existingDomTemplateEngine.prototype.makeTemplateSource=function(n){return n};n.existingDomTemplateEngine.prototype.renderTemplateSource=function(t,i,r){var u=t.nodeType!=8?t:t.parentNode,f=n.utils.peekObservable(i.$index),s,e,o,h;return!this.isAlreadyRendered&&f>=0&&f<(this.childrenSelector?$(u).children(this.childrenSelector).length:u.children.length)?(s=this.childrenSelector?$(u).children(this.childrenSelector)[f]:u.children.item(f),e=[],e.push(s),e):r.newItemTemplateName?n.onDemandTemplateEngine.renderTemplate(r.newItemTemplateName,i,r,null):(o=[],h=$(u.children.item(0)).clone(),o.push(h[0]),o)};n.existingDomTemplateEngine.instance=new n.existingDomTemplateEngine}(n)}(ko,toastr),function(n,t){function r(n,t){return u(t)?t:undefined}function u(n){return n==null?!0:typeof n=="function"?!1:n.mappedProperties!=null?!1:!0}n.shared=function(){return{}};n.shared.notifyToastr=function(n,i,r){n&&n.notify?n.notify(i,r?r:"success"):t[r](i)};n.shared.notifySuccess=function(t,i){n.shared.notifyToastr(t,i,"success")};n.shared.notifyError=function(t,i){n.shared.notifyToastr(t,i,"error")};n.shared.notifyInfo=function(t,i){n.shared.notifyToastr(t,i,"info")};n.shared.notifyWarning=function(t,i){n.shared.notifyToastr(t,i,"warning")};n.shared.simulatedObservable=function(t,i){var r=n.observable(i());return r.timer=null,r.items=[],r.check=function(){var n,t,i,u;if(r.items.length===0){clearInterval(r.timer);r.timer=null;return}for(n=0;n<r.items.length;n++)t=r.items[n],i=t.getter(),i==null?(u=$.inArray(t,r.items),r.items.splice(u,1)):t.obs(i)},r.items.push({obs:r,getter:i,elem:$(t)}),r.timer===null&&(r.timer=setInterval(r.check,300)),r.dispose=function(){var t=n.utils.arrayIndexOf(r.items,n.utils.arrayFirst(r.items,function(n){return n.obs==r}));r.items.splice(t,1)},r.stop=function(){clearInterval(r.timer);r.timer=null},r.start=function(){r.timer===null&&(r.timer=setInterval(r.check,300));r.check()},r};n.subscribable.fn.subscribeExtended=function(n){var t=this,i,r;return this.initialValue=this(),this.submitValue=function(){this.initialValue=this()},this.subscribe(function(n){i=n},this,"beforeChange"),r=this.subscribe(function(r){var u=r==undefined?null:r,f=i==undefined?null:i;u==f||t.isPaused||n(r,i,t.initialValue!=r)}),this.isPaused=!1,this.pause=function(){t.isPaused=!0},this.resume=function(){t.isPaused=!1},this.setValueWithoutNotify=function(n){t.isPaused=!0;t(n);t.isPaused=!1},r};n.observable.fn.supportUpdateWithoutNotify=function(){return this.updateWithoutNotify||(this.notifySubscribers=function(){this.pauseNotifications||n.subscribable.fn.notifySubscribers.apply(this,arguments)},this.updateWithoutNotify=function(n){this.pauseNotifications=!0;this(n);this.pauseNotifications=!1}),this};n.shared.PopupOptions=function(n,t,i,r,u,f,e,o,s){this.TemplateName=n;this.Model=t;this.ShownCallback=i;this.GetTemplateUrl=r;this.TemplateModel=u;this.OnCancel=f;this.IsCancelKeepsPopupOpened=e;this.AfterAdjustModal=o;this.IsActiveFocus=s};n.shared.showPopupFromTemplateWithOptions=function(t){return n.shared.showPopupFromTemplate(t.TemplateName,t.Model,t.ShownCallback,t.GetTemplateUrl,t.TemplateModel,t.OnCancel,t.IsCancelKeepsPopupOpened,t.AfterAdjustModal,t.IsActiveFocus)};n.shared.showPopupFromTemplate=function(t,i,r,u,f,e,o,s,h){var a,l,c,v;if(u){if($("#"+t).length>0)return n.shared.showPopupFromTemplate(t,i,r,null,null,e,o,s,h);Webropol.Shared.Common.callTemplateAsync(f,u,function(u){return $("body").append(u),n.shared.showPopupFromTemplate(t,i,r,null,null,e,o,s,h)})}else{a=document.activeElement;l=$("<div class='popup-wrapper' data-focus-limiter><\/div>");$("body").append(l);l.html("<div data-bind=\"template: { name: '"+t+"', data: $data }\"><\/div>");n.applyBindings(i,l[0]);c=$(".modal",l);l.find("[data-tab-group]:first").length==0&&c.attr("data-tab-group","1");c.css({opacity:"0",filter:"alpha(opacity=0)"});c.on("shown.bs.modal",function(){(h==null||h)&&Webropol.Shared.Common.focusOnActivePopup(c);r&&typeof r=="function"&&r(this)});c.on("hidden.bs.modal",function(){Webropol.Shared.Common.closeMultiselects();l.detach();a&&setTimeout(function(){$(a).trigger("focus")},100)});v=$(c.modal({backdrop:"static"})).data("bs.modal");v.cancelCallback=e;v.isCancelKeepsPopupOpened=o;Webropol.Shared.Common.adjustModal();$(this).find(".modal-dynamic").find(".modal-body").on("resize",function(){Webropol.Shared.Common.adjustModal()});return typeof s=="function"&&s(c),c.find('[data-toggle="popover"]').popover({sanitize:!1}),c}};var i=function(t){var i={Message:t.message,Header:t.header,onOk:t.onOk,onCancel:t.onCancel,onDismiss:t.onDismiss,customHeaderClass:t.customHeaderClass,IsHtml:t.isHtml,isOkDisabled:t.isOkDisabled,checked:n.observable(t.checked),checkedLabel:t.checkedLabel,warningText:t.warningText,isWarningTextDisplayed:n.observable(t.isWarningTextDisplayed),ShowOk:n.computed({read:function(){return i.onOk!=null},deferEvaluation:!0}),ShowCancel:n.computed({read:function(){return i.onCancel!=null},deferEvaluation:!0}),ShowDismiss:n.computed({read:function(){return i.onDismiss!=null},deferEvaluation:!0})};return t.okButtonText&&(i.customeOkText=n.observable(t.okButtonText)),t.cancelButtonText&&(i.customeCancelText=n.observable(t.cancelButtonText)),t.dismissButtonText&&(i.customeDismissText=n.observable(t.dismissButtonText)),i};n.shared.showConfirmation=function(t){var r;t=$.extend({},{message:"",onOk:null,onCancel:null,header:null,okButtonText:null,cancelButtonText:null,customHeaderClass:null,isHtml:!0,isOkDisabled:!1},t);r=i(t);n.shared.showPopupFromTemplate("confirm-dailog-template",r,null,null,null,t.onCancel)};n.shared.showConfirmDialog=function(t,r,u,f,e,o,s,h,c){var l={message:t,onOk:r,onCancel:u,header:f,okButtonText:e,cancelButtonText:o,customHeaderClass:h,isHtml:!0,isOkDisabled:c},a=i(l);n.shared.showPopupFromTemplate("confirm-dailog-template",a,null,null,null,u,s)};n.shared.showConfirmDeleteDialog=function(t,r,u,f,e,o,s,h,c,l,a,v,y){var p={message:t,onOk:r,onCancel:u,header:f,okButtonText:e,cancelButtonText:o,customHeaderClass:h,isHtml:!0,isOkDisabled:c,checked:l,checkedLabel:a,warningText:v,isWarningTextDisplayed:y},w=i(p);n.shared.showPopupFromTemplate("confirm-dialog-delete-template",w,null,null,null,u,s)};n.shared.showThreeStateConfirmDialog=function(t,r,u,f,e,o,s,h,c,l,a){var v={message:t,onOk:r,onCancel:u,onDismiss:f,header:e,okButtonText:o,cancelButtonText:s,dismissButtonText:h,customHeaderClass:l,isHtml:!0,isOkDisabled:a},y=i(v);n.shared.showPopupFromTemplate("confirm-dailog-template",y,null,null,null,u,c)};n.shared.createPopoverFromTemplate=function(t,i){function s(){function a(){r.$togglePopoverElement.attr("title",r.$togglePopoverElement.attr("data-original-title"));t&&t.title!==undefined&&r.$togglePopoverElement.attr("data-original-title",t.title)}function c(){return e.tip().find(".popover-content")}var l={html:!0,content:o,container:"body",trigger:"manual",sanitize:!1},s=function(n){var f=document.activeElement&&$(document.activeElement),e=u.has(f).length>0,t=Webropol.Shared.Common.getFocusableItems(u),i=t.index(f);switch(n.keyCode){case 27:r.$togglePopoverElement.trigger("click");break;case 32:e&&f.trigger("click");break;case 38:e&&i>0&&t.eq(i-1).trigger("focus");break;case 40:e&&i<t.length-1&&t.eq(i+1).trigger("focus")}},h=function(){var n=u.hasClass("in");n&&f.popover("hide")},t=$.extend({},l,i);r.$togglePopoverElement.popover(t).on("click",function(){var n=u.hasClass("in");n?f.popover("hide"):f.popover("show")}).on("shown.bs.popover",function(){r.$togglePopoverElement.attr("aria-expanded",!0);n.applyBindings(r.viewModel,c()[0]);typeof r.showCallback=="function"&&r.showCallback(e);u.removeClass("visibility-hidden");Webropol.Shared.Common.getFocusableItems(u).eq(0).trigger("focus");$(document).on("keydown",s);$(".scrollable").one("scroll",h)}).on("hidden.bs.popover",function(){$(document).off("keydown",s);$(".scrollable").off("scroll",h);r.$togglePopoverElement.attr("aria-expanded",!1);r.$togglePopoverElement.trigger("focus");n.cleanNode(c()[0]);u.addClass("visibility-hidden")});return a(),r.$togglePopoverElement.data("bs.popover")}function h(){var n=!1,t=function(t){function i(){return!f.is(t.target)&&f.has(t.target).length==0&&!u.is(t.target)&&u.has(t.target).length==0&&$(".popup-wrapper").has(t.target).length==0}n=typeof r.hideCalculationFunc=="function"?r.hideCalculationFunc(e,t):i()};$("body").on("mousedown",t).on("keydown",function(n){(n.keyCode==32||n.keyCode==13)&&t(n)}).on("click",function(){var t=u.hasClass("in");t&&n&&f.popover("hide")})}var r=$.extend({},{$togglePopoverElement:null,templateName:null,viewModel:null,showCallback:null,hideCalculationFunc:null,isOpenedByDefault:!1,additionalStyle:null},t),o="<div data-bind=\"template: { name: '"+r.templateName+"', data: $data }\"><\/div>",e=s(),u=e.tip(),f;u.addClass("visibility-hidden");r.additionalStyle&&r.additionalStyle.length&&u.addClass(r.additionalStyle);f=e.$element;h();r.isOpenedByDefault&&f.popover("show")};n.shared.oneTimeDirtyFlag=function(t){var i;return n.computed(function(){return i?!0:(n.toJS(t),i=!0,!1)})};n.shared.dirtyFlag=function(t,i){var r=function(){},u=n.observable(n.toJSON(t)),f=n.observable(i);return r.isDirty=n.computed(function(){return f()||u()!==n.toJSON(t)}),r.reset=function(){u(n.toJSON(t));f(!1)},r};n.shared.isIE=function(){var n=window.navigator.userAgent,r=n.indexOf("MSIE "),t,i;return r>0?!0:(t=n.indexOf("Trident/"),t>0)?!0:(i=n.indexOf("Edge/"),i>0)?!0:!1};n.shared.copy=function(t){return n.mapping.fromJS(n.mapping.toJS(t))};n.shared.setOptionsAttributes=function(t,i,r,u,f,e){var o,s;i&&(r||(r=70),u||(u="Text"),f||(f=!1),o=n.unwrap(i[u]),typeof e=="function"&&(o=e(o)),s=o.length>=r?o.substring(0,r)+"...":o,n.applyBindingsToNode(t,{html:s,disable:f,attr:{title:o}},i))};n.shared.setOptionDisabled=function(t,i,r){r||(r="IsDisabled");var u=n.unwrap(i[r]);n.applyBindingsToNode(t,{disable:u},i)};n.shared.toCleanJS=function(t){return Webropol.Shared.Common.parseJSON(n.toJSON(t,r))}}(ko,toastr);ko.bindingHandlers.tableSorter={init:function(n,t){var i=!1;n.style.cursor="pointer";n.onclick=function(){var n=t().prop,r=t().arr;i=!i;r.sort(function(t,r){var u=t,f=r,o,h,e,s;i||(u=r,f=t);o=n.split(".");for(h in o)e=o[h],s=e.indexOf("()"),s>0?(e=e.substring(0,s),u=u[e](),f=f[e]()):(u=u[e],f=f[e]);return typeof u=="string"&&typeof f=="string"&&(u=u.toString().toLowerCase(),f=f.toString().toLowerCase()),u===f?0:u<f?-1:1})}}};ko.bindingHandlers.typeahead={init:function(n,t,i){var r=i().source||{},u=$(n).typeahead({source:r,highlighter:function(n){var t=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),i;return t=escapeHtml(t),n=escapeHtml(n),i=n.replace(new RegExp("("+t+")","ig"),function(n,t){return"<strong>"+t+"<\/strong>"}),n.replace(new RegExp("("+t+")","ig"),function(n,t){return"<strong>"+t+"<\/strong>"})},updater:function(n){return n}})},update:function(n,t){var i=$(n),r=t();i.val(r())}};ko.bindingHandlers.disableClick={init:function(n,t){$(n).on("click",function(n){t()&&Webropol.Shared.Common.stopEvent(n,!0)})},update:function(n,t){var i=ko.utils.unwrapObservable(t());ko.bindingHandlers.css.update(n,function(){return{disabled_anchor:i}})}};ko.bindingHandlers.radioSelection={init:function(n,t,i,r){var u=$(n),e,f;if(u.is('input[type="radio"]')){e=t();f=!1;u.on("mousedown",function(n){f=n.target.checked;n.stopImmediatePropagation()});u.on("click",function(){e(r,f)});u.on("keydown",function(n){n.which==32&&(f=n.target.checked)});u.on("keyup",function(n){if(n.which==32){if(Webropol.Common.browser.getIEVersion()>0)return!0;if(f===!0)return e(r,f),Webropol.Shared.Common.stopEvent(n,!0)}return!0})}else if(u.is("label")){if(t()!==!0)return;u.on("mousedown",function(){var n=$("#"+$(this).attr("for"));n.length>0&&n.trigger("mousedown")})}}};ko.bindingHandlers.emailList={init:function(n,t){for(var e=$(n),r=t(),i="",f,u=0;u<r().length;u++)i=i+r()[u]()+" ";i.length>0&&(i=i.substring(0,i.length-1));n.value=i;n.onchange=function(){f()};e.on("keyup",function(){f()});f=function(){for(var u,t,f,i=r().length-1;i>=0;i--)r.remove(r()[i]);for(u=n.value.split(/[\s,;]+/),t=0;t<u.length;t++)f=u[t].trim(),f.length>0&&r.push(ko.observable(u[t]))}}};ko.bindingHandlers.distributionList={init:function(n,t){for(var u=t(),i="",r=0;r<u().length;r++)i=u()[r].IsTargetGroup()?i+"["+u()[r].Name()+"]":i+u()[r].Name(),i=i+" ";i.length>0&&(i=i.substring(0,i.length-1));n.value=i}};ko.bindingHandlers.bsChecked={init:function(n,t,i,r,u){var f=t(),e=function(){return{change:function(){f(n.value)}}},o;ko.bindingHandlers.event.init(n,e,i,r,u);$(n).val()==ko.unwrap(t())&&(o=$(n).closest(".btn").addClass("active"))},update:function(){}};ko.bindingHandlers.sort={init:function(n,t){var i=!1;n.style.cursor="pointer";n.onclick=function(){var u=t(),r=u.prop,f=u.arr;$(n).siblings().removeClass("sorting_asc");$(n).siblings().removeClass("sorting_desc");i=!i;i?($(n).removeClass("sorting_asc"),$(n).addClass("sorting_desc"),f.sort(function(n,t){return n[r]()==t[r]()?0:n[r]()<t[r]()?-1:1})):($(n).removeClass("sorting_desc"),$(n).addClass("sorting_asc"),f.sort(function(n,t){return n[r]()==t[r]()?0:n[r]()>t[r]()?-1:1}))}}};ko.bindingHandlers.passwordInput={init:function(){},update:function(n,t){var i=ko.utils.unwrapObservable(t());$(n).attr("type",i?"text":"password")}};ko.bindingHandlers.autoSavableValue={init:function(n,t){ko.applyBindingAccessorsToNode(n,{value:t,valueUpdate:function(){return"afterkeydown"},event:function(){return{change:t().saveImmediately()}}})}};ko.bindingHandlers.executeOnEnter={init:function(n,t,i,r,u){var f=ko.utils.unwrapObservable,e=t(),o=f(e.action),s=f(e.ctrl)||!1;$(n).on("keypress",function(n){var t=n.which||n.keyCode,i=t==13,r=i;return(s&&(r=t===10||i&&n.ctrlKey),r)?(o.call(u.$data),!1):!0})}};ko.bindingHandlers.questionTreeScrollingTo={init:function(n,t,i,r,u){if(!u.$root.isInitStage()&&!u.$root.isMovingStage()){var o=$(n).height(),s=$(window).height(),f=$(document).scrollTop(),e=$(n).offset().top+o-(s+f);e>0&&$(document).scrollTop(f+e)}}};ko.bindingHandlers.stopBinding={init:function(){return{controlsDescendantBindings:!0}}};ko.bindingHandlers.hoverOptionId={};ko.bindingHandlers.hoverVisible={init:function(n,t,i){function o(){r.is(":visible")||r.show().css("display","inline-flex")}function s(n){n.keyCode!=9||n.shiftKey||(u=!0)}function h(){u?r.show():r.hide();u=!1}function c(){e.is(":focus")||r.hide()}function l(){u=!0}var u=!1,f=$("[data-optionId='"+ko.utils.unwrapObservable(i().hoverOptionId)+"']"),e=f.find(".editable-area"),r=f.find(".option-manager-menu");ko.utils.registerEventHandler(r,"mouseenter",l);ko.utils.registerEventHandler(f,"mouseenter",o);ko.utils.registerEventHandler(f,"mouseleave",c);ko.utils.registerEventHandler(e,"keydown",s);ko.utils.registerEventHandler(e,"blur",h);ko.utils.registerEventHandler(e,"focus",o)}};ko.bindingHandlers.menuOnHover={init:function(n,t){var i=$(n).closest("."+ko.utils.unwrapObservable(t()))||$(n).parent(),r=$(n).find(".manager-menu"),f=$(n).find(".manager-handler"),e=function(){$(n).show()},u=function(){$(n).hide();r.hide()},o=function(){r.show()};ko.utils.registerEventHandler(i,"mouseenter",e);ko.utils.registerEventHandler(i,"mouseleave",u);ko.utils.registerEventHandler(f,"click",o);u()}};ko.bindingHandlers.bindIframe={init:function(n,t){function i(){var r,i,u;try{r=n.contentWindow.initChildFrame;i=n.contentDocument.body}catch(f){}r?r(ko,t()):i&&(ko.cleanNode(i),u=document.createElement("span"),u.setAttribute("data-bind","html: $data"),i.appendChild(u),ko.applyBindings(t(),i))}i();ko.utils.registerEventHandler(n,"load",i)}};ko.bindingHandlers.mandatory={init:function(n,t){var u=ko.utils.unwrapObservable(t()),i=$(n).parent(),r;u?i.find(".mandatory").length||(r=$("<span>",{"class":"mandatory fa mandatory-sign"}),i.append(r)):i.find(".mandatory").remove()},update:function(n,t){ko.bindingHandlers.mandatory.init(n,t)}};ko.bindingHandlers.mandatorySetting={init:function(n,t){var r=ko.utils.unwrapObservable(t()),f=ko.utils.unwrapObservable(r.isMandatory),e=r.mandatorySymbol,i=$(n).parent(),u;f?(u=$("<span />",{"class":"mandatory-symbol"}).html(e),i.find(".mandatory-symbol").remove(),i.append(u)):i.find(".mandatory-symbol").remove()},update:function(n,t){ko.bindingHandlers.mandatorySetting.init(n,t)}};ko.bindingHandlers.url={init:function(n,t){$(n).on("keyup",function(){var i=t(),n=$(this).val();n&&!/^(https?):\/\//i.test(n)&&"http://".indexOf(n)!==0&&"https://".indexOf(n)!==0?i("http://"+n):i(n)})},update:function(n,t){$(n).val(ko.utils.unwrapObservable(t()))}};ko.bindingHandlers.limitCharactersExtended={update:function(n,t,i){var u=t(),f=u.maxLength,r=i.get("value"),e=ko.unwrap(u.extendedValue),o=e.length-f,s=ko.unwrap(r).substr(0,Math.max(ko.unwrap(r).length-o,0));r(s)}};ko.bindingHandlers.afterElementRender={init:function(n,t,i,r){var u=t();typeof u=="function"&&u.call(r,n,r)}},function(n){n.utils.copy=function(t){return n.mapping.fromJS(n.toJS(t))};n.subscribable.fn.subscribeNewOld=function(n,t){var i,u,r;return this.initialValue=this(),this.submitValue=function(){this.initialValue=this()},this.subscribe(function(n){i=n},this,"beforeChange"),u=this.subscribe(function(u){if(n){var f=u==undefined?null:u,e=i==undefined?null:i;f==e||r||t(u,i,this._target.initialValue!=u)}else r||t(u,i,this._target.initialValue!=u)}),r=!1,this.pause=function(){r=!0},this.resume=function(){r=!1},u};n.onDemandObservable=function(t,i){var u=n.observableArray(),r=n.computed({read:function(){return r.loaded()||r.loading()||(r.loading(!0),t.call(i)),u()},write:function(n){r.loaded(!0);r.loading(!1);u(n)},deferEvaluation:!0});return r.loaded=n.observable(),r.loading=n.observable(),r.refresh=function(){r.loaded(!1);r.loading(!1)},r.underlyingValue=function(){return u},r};n.initAutoSaveObservables=function(t,i,r,u){var f=null;n.utils.arrayForEach(i,function(t){n.autoSaveObservable(t,f,r,u)});t.isDirty=n.computed({read:function(){var t=!1;return n.utils.arrayForEach(i,function(n){t||(t=n.isDirty())}),t},deferEvaluation:!0})};n.autoSaveObservable=function(t,i,r,u){var f,e,o;return f=n.isObservable(t)?t:n.observable(t),f.subscribeNewOld(!0,function(){i==null&&r>0&&(i=setTimeout(function(){(clearTimeout(i),i=null,f.isDirty())&&u(e,!0,f)},r))}),f.saveImmediately=function(){f.isDirty()&&(i!=null&&(clearTimeout(i),i=null),u(e,!1,this))},e=function(){f.reset()},o=n.observable(n.unwrap(t)),f.isDirty=n.computed(function(){var n=o(),t=f();return t!==n&&!((t===null||t==="")&&(n===null||n===""))}),f.reset=function(){o(f());this.submitValue()},f}}(ko);ko.dirtyFlag=function(n,t){var i=function(){},r=ko.observable(ko.toJSON(n)),u=ko.observable(t);return i.isDirty=ko.computed(function(){return u()||r()!==ko.toJSON(n)}),i.reset=function(){r(ko.toJSON(n));u(!1)},i};ko.extenders.startDateChange=function(n,t){return n.subscribeExtended(function(){var i=t.userTimeZoneOffset!=undefined?Webropol.Shared.Common.getDateTimeNow(t.userTimeZoneOffset()):new Date;i>t.startDate()&&n.setValueWithoutNotify(i);t.startDate()>t.endDate()&&t.endDate(t.startDate())}),n};ko.extenders.endDateChange=function(n,t){return n.subscribeExtended(function(){var i=t.userTimeZoneOffset!=undefined?Webropol.Shared.Common.getDateTimeNow(t.userTimeZoneOffset()):new Date;(t.startDate()>t.endDate()||i>t.endDate())&&n.setValueWithoutNotify(new Date(Math.max(i,t.startDate())))}),n};ko.extenders.occurenceTimeChange=function(n){return n.subscribe(function(){var t,i;n()==null?(t=new Date,t.setHours(0,0,0),n(t)):(i=/^([0-9]|0[0-9]|1[0-9]|2[0-3]):[0-5][0-9]$/,i.test(n())&&n(new Date))}),n};ko.extenders.occursOnceDateChange=function(n){return n.subscribe(function(){(n()==null||n()<new Date)&&n(new Date)}),n};ko.extenders.sycronizeMax=function(n,t){n.subscribe(function(n){n>t.dependent()&&t.dependent(n)})};ko.extenders.sycronizeMin=function(n,t){n.subscribe(function(n){n<t.dependent()&&t.dependent(n)})};ko.extenders.trackChange=function(n,t){return t&&(n.isDirty=ko.observable(!1),n.originalValue=n(),n.resetTrackedValue=function(){n.updateWithoutNotify?n.updateWithoutNotify(n.originalValue):n(n.originalValue)},n.acceptTrackedValue=function(){n.originalValue=n();n.isDirty(!1)},n.isArray=Array.isArray(n()),n.isArray&&(n.originalArray=ko.observableArray(n().slice(0))),n.subscribe(function(t){var i=!1,r;n.isArray?(r=ko.utils.compareArrays(n.originalArray(),n(),{sparse:!0}),i=r.length!=0):i=t!=n.originalValue&&!(t==""&&n.originalValue==null);n.isDirty(i)})),n};ko.pauseableComputed=function(n,t){var r="",u=ko.observable(!1),i=ko.dependentObservable(function(){return u()?r:n.call(t)},t);return i.reevaluatedCount=ko.observable(0),i.subscribe(function(){this.reevaluatedCount(this.reevaluatedCount()+1)},i),i.pause=function(){r=this();u(!0)}.bind(i),i.resume=function(){r="";u(!1)},i};ko.components.register("search-input",{viewModel:function(n){this.id=n.id;this.name=n.name;this.css=n.css;this.placeholder=n.placeholder;this.value=ko.isObservable(n.value)?n.value:ko.observable(n.value||"");this.onSearch=typeof n.onSearch=="function"?n.onSearch:function(){};this.onClear=typeof n.onClear=="function"?n.onClear:function(){};this.showClear=typeof n.showClear=="function"?n.showClear:function(){return!0};this.canSearch=typeof n.canSearch=="function"?n.canSearch:function(){return!0};this.cleartext=n.cleartext;this.isShowClear=ko.computed(function(){return this.value()&&this.value().length>0&&this.showClear()},this);this.search=function(){this.canSearch()&&this.onSearch()};this.clear=function(){this.value("");this.onClear()}},template:'<div class="input-group search-group" data-bind="css: css"><input type="text" class="search-input form-control" data-bind="textInput: value, executeOnEnter: { action: search }, attr: { id: id, name: name, placeholder: placeholder },css: { \'focused-search-input\': isShowClear }"><i class="search-clear far fa-times-circle" role="button" tabIndex="0" data-bind="visible: isShowClear, click: clear, executeOnEnter: { action: clear }, attr: { \'aria-label\': cleartext}"><\/i><span class="input-group-btn"> <button type="button" class="btn btn-default" data-bind="click: search, enable: canSearch, attr: { \'aria-label\': placeholder}">     <i class="far fa-search"><\/i> <\/button><\/span><\/div>'});!function(n){"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?n(require("knockout"),exports):"function"==typeof define&&define.amd?define(["knockout","exports"],n):n(ko,ko.validation={})}(function(n,t){function g(n){o(n.subscriptions,function(n){n.dispose()});n.subscriptions=[]}function y(t,i){i.validatables=[];g(i),function i(t,u,f){var o=[],e=t.peek?t.peek():t;!0!==t.__kv_traversed&&(u.options.deep&&(t.__kv_traversed=!0,u.flagged.push(t)),f=void 0!==f?f:u.options.deep?1:-1,n.isObservable(t)&&(t.errors||r.isValidatable(t)||t.extend({validatable:!0}),u.validatables.push(t),u.options.live&&r.isObservableArray(t)&&u.subscriptions.push(t.subscribe(function(){u.graphMonitor.valueHasMutated()}))),e&&!e._destroy&&(r.isArray(e)?o=e:r.isObject(e)&&(o=r.values(e))),0!==f&&r.forEach(o,function(t){!t||t.nodeType||n.isComputed(t)&&!t.rules||i(t,u,f+1)}))}(t,i),function(n){n.options.deep&&(o(n.flagged,function(n){delete n.__kv_traversed}),n.flagged.length=0);n.options.live||g(n)}(i)}function p(n){var t=[];return o(n,function(n){r.isValidatable(n)&&!n.isValid()&&t.push(n.error.peek())}),t}function nt(n){var t="max"===n;return function(r,u){if(i.utils.isEmptyVal(r))return!0;var o,h,s,f,e;switch(o=void 0===u.typeAttr?(h="text",u):(h=u.typeAttr,u.value),isNaN(o)||o instanceof Date||(h="number"),h.toLowerCase()){case"week":if(s=/^(\d{4})-W(\d{2})$/,null===(f=r.match(s)))throw new Error("Invalid value for "+n+" attribute for week input.  Should look like '2000-W33' http://www.w3.org/TR/html-markup/input.week.html#input.week.attrs.min");return!!(e=o.match(s))&&(t?f[1]<e[1]||f[1]===e[1]&&f[2]<=e[2]:f[1]>e[1]||f[1]===e[1]&&f[2]>=e[2]);case"month":if(s=/^(\d{4})-(\d{2})$/,null===(f=r.match(s)))throw new Error("Invalid value for "+n+" attribute for month input.  Should look like '2000-03' http://www.w3.org/TR/html-markup/input.month.html#input.month.attrs.min");return!!(e=o.match(s))&&(t?f[1]<e[1]||f[1]===e[1]&&f[2]<=e[2]:f[1]>e[1]||f[1]===e[1]&&f[2]>=e[2]);case"number":case"range":return t?!isNaN(r)&&parseFloat(r)<=parseFloat(o):!isNaN(r)&&parseFloat(r)>=parseFloat(o);default:return t?r<=o:o<=r}}}function it(n,t,r){function u(u){var f=!1,o="";n.__valid__()&&(u.message?(f=u.isValid,o=u.message):f=u,f||(n.error(i.formatMessage(o||r.message||t.message,e(r.params),n)),n.__valid__(f)));n.isValidating(!1)}n.isValidating(!0);i.utils.async(function(){t.validator(n(),void 0===r.params||e(r.params),u)})}var v,s,r,d,w,l,tt;if(void 0===n)throw new Error("Knockout is required, please ensure it is loaded before loading this validation plug-in");n.validation=t;var b,a,c,i=n.validation,f=n.utils,e=f.unwrapObservable,o=f.arrayForEach,u=f.extend,k={registerExtenders:!0,messagesOnModified:!0,errorsAsTitle:!0,errorsAsTitleOnModified:!1,messageTemplate:null,insertMessages:!0,parseInputAttributes:!1,writeInputAttributes:!1,decorateInputElement:!1,decorateElementOnModified:!0,errorClass:null,errorElementClass:"validationElement",errorMessageClass:"validationMessage",allowHtmlMessages:!1,grouping:{deep:!1,observable:!0,live:!1},validate:{}},h=u({},k);h.html5Attributes=["required","pattern","min","max","step"];h.html5InputTypes=["email","number","date"];h.reset=function(){u(h,k)};i.configuration=h;i.utils=(b=(new Date).getTime(),a={},c="__ko_validation__",{isArray:function(n){return n.isArray||"[object Array]"===Object.prototype.toString.call(n)},isObject:function(n){return null!==n&&"object"==typeof n},isNumber:function(n){return!isNaN(n)},isObservableArray:function(n){return!!n&&"function"==typeof n.remove&&"function"==typeof n.removeAll&&"function"==typeof n.destroy&&"function"==typeof n.destroyAll&&"function"==typeof n.indexOf&&"function"==typeof n.replace},values:function(n){var i=[],t;for(t in n)n.hasOwnProperty(t)&&i.push(n[t]);return i},getValue:function(n){return"function"==typeof n?n():n},hasAttribute:function(n,t){return null!==n.getAttribute(t)},getAttribute:function(n,t){return n.getAttribute(t)},setAttribute:function(n,t,i){return n.setAttribute(t,i)},isValidatable:function(n){return!!(n&&n.rules&&n.isValid&&n.isModified)},insertAfter:function(n,t){n.parentNode.insertBefore(t,n.nextSibling)},newId:function(){return b+=1},getConfigOptions:function(n){return i.utils.contextFor(n)||i.configuration},setDomData:function(n,t){var r=n[c];r||(n[c]=r=i.utils.newId());a[r]=t},getDomData:function(n){var t=n[c];if(t)return a[t]},contextFor:function(n){switch(n.nodeType){case 1:case 8:var t=i.utils.getDomData(n);if(t)return t;if(n.parentNode)return i.utils.contextFor(n.parentNode)}},isEmptyVal:function(n){return null==n||""===n},getOriginalElementTitle:function(n){var t=i.utils.getAttribute(n,"data-orig-title"),r=n.title;return i.utils.hasAttribute(n,"data-orig-title")?t:r},async:function(n){window.setImmediate?window.setImmediate(n):window.setTimeout(n,0)},forEach:function(n,t){if(i.utils.isArray(n))return o(n,t);for(var r in n)n.hasOwnProperty(r)&&t(n[r],r)}});d=(v=0,s=i.configuration,r=i.utils,{init:function(n,t){0<v&&!t||((n=n||{}).errorElementClass=n.errorElementClass||n.errorClass||s.errorElementClass,n.errorMessageClass=n.errorMessageClass||n.errorClass||s.errorMessageClass,u(s,n),s.registerExtenders&&i.registerExtenders(),v=1)},reset:i.configuration.reset,group:function(t,i){var h={options:i=u(u({},s.grouping),i),graphMonitor:n.observable(),flagged:[],subscriptions:[],validatables:[]},e=null;return(e=i.observable?n.computed(function(){return h.graphMonitor(),y(t,h),p(h.validatables)}):function(){return y(t,h),p(h.validatables)}).showAllMessages=function(n){void 0===n&&(n=!0);e.forEach(function(t){r.isValidatable(t)&&t.isModified(n)})},e.isAnyMessageShown=function(){return!!e.find(function(n){return r.isValidatable(n)&&!n.isValid()&&n.isModified()})},e.filter=function(n){return n=n||function(){return!0},e(),f.arrayFilter(h.validatables,n)},e.find=function(n){return n=n||function(){return!0},e(),f.arrayFirst(h.validatables,n)},e.forEach=function(n){n=n||function(){};e();o(h.validatables,n)},e.map=function(n){return n=n||function(n){return n},e(),f.arrayMap(h.validatables,n)},e._updateState=function(n){if(!r.isObject(n))throw new Error("An object is required.");if(t=n,!i.observable)return y(n,h),p(h.validatables);h.graphMonitor.valueHasMutated()},e},formatMessage:function(n,t,i){if(r.isObject(t)&&t.typeAttr&&(t=t.value),"function"==typeof n)return n(t,i);var u=e(t);return null==u&&(u=[]),r.isArray(u)||(u=[u]),n.replace(/{(\d+)}/gi,function(n,t){return void 0!==u[t]?u[t]:n})},addRule:function(n,t){return n.extend({validatable:!0}),f.arrayFirst(n.rules(),function(n){return n.rule&&n.rule===t.rule})||n.rules.push(t),n},addAnonymousRule:function(n,t){void 0===t.message&&(t.message="Error");t.onlyIf&&(t.condition=t.onlyIf);i.addRule(n,t)},addExtender:function(t){n.extenders[t]=function(n,u){return u&&(u.message||u.onlyIf)?i.addRule(n,{rule:t,message:u.message,params:!!r.isEmptyVal(u.params)||u.params,condition:u.onlyIf}):i.addRule(n,{rule:t,params:u})}},registerExtenders:function(){if(s.registerExtenders)for(var t in i.rules)i.rules.hasOwnProperty(t)&&(n.extenders[t]||i.addExtender(t))},insertValidationMessage:function(n){var t=document.createElement("SPAN");return t.className=r.getConfigOptions(n).errorMessageClass,r.insertAfter(n,t),t},parseInputValidationAttributes:function(n,t){o(i.configuration.html5Attributes,function(u){var e,f;r.hasAttribute(n,u)&&(e=n.getAttribute(u)||!0,("min"===u||"max"===u)&&(f=n.getAttribute("type"),void 0!==f&&f||(f="text"),e={typeAttr:f,value:e}),i.addRule(t(),{rule:u,params:e}))});var u=n.getAttribute("type");o(i.configuration.html5InputTypes,function(n){n===u&&i.addRule(t(),{rule:"date"===n?"dateISO":n,params:!0})})},writeInputValidationAttributes:function(t,r){var u=r(),e;u&&u.rules&&(e=u.rules(),o(i.configuration.html5Attributes,function(i){var r=f.arrayFirst(e,function(n){return n.rule&&n.rule.toLowerCase()===i.toLowerCase()});r&&n.computed({read:function(){var u=n.unwrap(r.params);"pattern"===r.rule&&u instanceof RegExp&&(u=u.source);t.setAttribute(i,u)},disposeWhenNodeIsRemoved:t})}),e=null)},makeBindingHandlerValidatable:function(t){var i=n.bindingHandlers[t].init;n.bindingHandlers[t].init=function(t,r,u,f,e){return i(t,r,u,f,e),n.bindingHandlers.validationCore.init(t,r,u,f,e)}},setRules:function(t,u){var f=function(t,u){var s,h,o,l;if(t&&u)for(s in u)if(u.hasOwnProperty(s)&&(h=u[s],t[s])){var a=t[s],c=e(a),y={},v={};for(o in h)h.hasOwnProperty(o)&&(i.rules[o]?y[o]=h[o]:v[o]=h[o]);if(n.isObservable(a)&&a.extend(y),c&&r.isArray(c))for(l=0;l<c.length;l++)f(c[l],v);else f(c,v)}};f(t,u)}});u(n.validation,d);i.rules={};i.rules.required={validator:function(n,t){var i;return null==n?!t:("string"==typeof(i=n)&&(i=String.prototype.trim?n.trim():n.replace(/^\s+|\s+$/g,"")),!t||0<(i+"").length)},message:"This field is required."};i.rules.min={validator:nt("min"),message:"Please enter a value greater than or equal to {0}."};i.rules.max={validator:nt("max"),message:"Please enter a value less than or equal to {0}."};i.rules.minLength={validator:function(n,t){return!!i.utils.isEmptyVal(n)||(i.utils.isNumber(n)?""+n:n).length>=t},message:"Please enter at least {0} characters."};i.rules.maxLength={validator:function(n,t){return!!i.utils.isEmptyVal(n)||(i.utils.isNumber(n)?""+n:n).length<=t},message:"Please enter no more than {0} characters."};i.rules.pattern={validator:function(n,t){return i.utils.isEmptyVal(n)||null!==n.toString().match(t)},message:"Please check this value."};i.rules.step={validator:function(n,t){if(i.utils.isEmptyVal(n)||"any"===t)return!0;var r=100*n%(100*t);return Math.abs(r)<1e-5||Math.abs(1-r)<1e-5},message:"The value must increment by {0}."};i.rules.email={validator:function(n,t){return!t||i.utils.isEmptyVal(n)||t&&/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(n)},message:"Please enter a proper email address."};i.rules.date={validator:function(n,t){return!t||i.utils.isEmptyVal(n)||t&&!/Invalid|NaN/.test(new Date(n))},message:"Please enter a proper date."};i.rules.dateISO={validator:function(n,t){return!t||i.utils.isEmptyVal(n)||t&&/^\d{4}[-/](?:0?[1-9]|1[012])[-/](?:0?[1-9]|[12][0-9]|3[01])$/.test(n)},message:"Please enter a proper date."};i.rules.number={validator:function(n,t){return!t||i.utils.isEmptyVal(n)||t&&/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(n)},message:"Please enter a number."};i.rules.digit={validator:function(n,t){return!t||i.utils.isEmptyVal(n)||t&&/^\d+$/.test(n)},message:"Please enter a digit."};i.rules.phoneUS={validator:function(n,t){return!t||!!i.utils.isEmptyVal(n)||"string"==typeof n&&(n=n.replace(/\s+/g,""),t&&9<n.length&&n.match(/^(1-?)?(\([2-9]\d{2}\)|[2-9]\d{2})-?[2-9]\d{2}-?\d{4}$/))},message:"Please specify a valid phone number."};i.rules.equal={validator:function(n,t){var r=t;return n===i.utils.getValue(r)},message:"Values must equal."};i.rules.notEqual={validator:function(n,t){var r=t;return n!==i.utils.getValue(r)},message:"Please choose another value."};i.rules.unique={validator:function(n,t){var r=i.utils.getValue(t.collection),e=i.utils.getValue(t.externalValue),u=0;return!n||!r||(f.arrayFilter(r,function(i){n===(t.valueAccessor?t.valueAccessor(i):i)&&u++}),u<(e?1:2))},message:"Please make sure the value is unique."};i.registerExtenders();n.bindingHandlers.validationCore={init:function(t,r){var u=i.utils.getConfigOptions(t),f=r(),e;(u.parseInputAttributes&&i.utils.async(function(){i.parseInputValidationAttributes(t,r)}),u.insertMessages&&i.utils.isValidatable(f))&&(e=i.insertValidationMessage(t),u.messageTemplate?n.renderTemplate(u.messageTemplate,{field:f},null,e,"replaceNode"):n.applyBindingsToNode(e,{validationMessage:f}));u.writeInputAttributes&&i.utils.isValidatable(f)&&i.writeInputValidationAttributes(t,r);u.decorateInputElement&&i.utils.isValidatable(f)&&n.applyBindingsToNode(t,{validationElement:f})}};i.makeBindingHandlerValidatable("value");i.makeBindingHandlerValidatable("checked");n.bindingHandlers.textInput&&i.makeBindingHandlerValidatable("textInput");i.makeBindingHandlerValidatable("selectedOptions");n.bindingHandlers.validationMessage={update:function(t,r){var s,h,u=r(),c=i.utils.getConfigOptions(t),o,l,a;if(e(u),null==u)throw new Error("Cannot bind validationMessage to undefined value. data-bind expression: "+t.getAttribute("data-bind"));s=u.isModified&&u.isModified();h=u.isValid&&u.isValid();o=null;c.messagesOnModified&&!s||(o=h?null:u.error);l=!(c.messagesOnModified&&!s)&&!h;a="none"!==t.style.display;c.allowHtmlMessages?f.setHtml(t,o):n.bindingHandlers.text.update(t,function(){return o});a&&!l?t.style.display="none":!a&&l&&(t.style.display="")}};n.bindingHandlers.validationElement={update:function(t,r,u){var h,o,f=r(),s=i.utils.getConfigOptions(t);if(e(f),null==f)throw new Error("Cannot bind validationElement to undefined value. data-bind expression: "+t.getAttribute("data-bind"));h=f.isModified&&f.isModified();o=f.isValid&&f.isValid();n.bindingHandlers.css.update(t,function(){var n={},t=!(s.decorateElementOnModified&&!h)&&!o;return n[s.errorElementClass]=t,n},u);s.errorsAsTitle&&n.bindingHandlers.attr.update(t,function(){var n=!s.errorsAsTitleOnModified||h,r=i.utils.getOriginalElementTitle(t);return n&&!o?{title:f.error,"data-orig-title":r}:!n||o?{title:r,"data-orig-title":null}:void 0})}};n.bindingHandlers.validationOptions={init:function(n,t){var f=e(t()),r;f&&(r=u({},i.configuration),u(r,f),i.utils.setDomData(n,r))}};n.extenders.validation=function(n,t){return o(i.utils.isArray(t)?t:[t],function(t){i.addAnonymousRule(n,t)}),n};n.extenders.validatable=function(t,r){var o,f,s,e;return(i.utils.isObject(r)||(r={enable:r}),"enable"in r||(r.enable=!0),r.enable&&!i.utils.isValidatable(t))?(o=i.configuration.validate||{},f={throttleEvaluation:r.throttle||o.throttle},t.error=n.observable(null),t.rules=n.observableArray(),t.isValidating=n.observable(!1),t.__valid__=n.observable(!0),t.isModified=n.observable(!1),t.isValid=n.computed(t.__valid__),t.setError=function(n){var i=t.error.peek(),r=t.__valid__.peek();t.error(n);t.__valid__(!1);i===n||r||t.isValid.notifySubscribers()},t.clearError=function(){return t.error(null),t.__valid__(!0),t},s=t.subscribe(function(){t.isModified(!0)}),e=n.computed(u({read:function(){return t(),t.rules(),i.validateObservable(t),!0}},f)),u(e,f),t._disposeValidation=function(){t.isValid.dispose();t.rules.removeAll();s.dispose();e.dispose();delete t.rules;delete t.error;delete t.isValid;delete t.isValidating;delete t.__valid__;delete t.isModified;delete t.setError;delete t.clearError;delete t._disposeValidation}):!1===r.enable&&t._disposeValidation&&t._disposeValidation(),t};i.validateObservable=function(n){for(var f,t,u,s,r,o=0,h=n.rules(),c=h.length;o<c;o++)if(!(t=h[o]).condition||t.condition())if((f=t.rule?i.rules[t.rule]:t).async||t.async)it(n,f,t);else if(u=n,r=t,!(s=f).validator(u(),void 0===r.params||e(r.params))&&(u.setError(i.formatMessage(r.message||s.message,e(r.params),u)),1))return!1;return n.clearError(),!0};l={};i.defineLocale=function(n,t){return n&&t?l[n.toLowerCase()]=t:null};i.locale=function(n){if(n){if(n=n.toLowerCase(),!l.hasOwnProperty(n))throw new Error("Localization "+n+" has not been loaded.");i.localize(l[n]);w=n}return w};i.localize=function(n){var r=i.rules,t;for(t in n)r.hasOwnProperty(t)&&(r[t].message=n[t])},function(){var r={},t=i.rules,n;for(n in t)t.hasOwnProperty(n)&&(r[n]=t[n].message);i.defineLocale("en-us",r)}();w="en-us";n.applyBindingsWithValidation=function(t,r,f){var e,o=document.body;e=r&&r.nodeType?(o=r,f):r;i.init();e&&(e=u(u({},i.configuration),e),i.utils.setDomData(o,e));n.applyBindings(t,o)};tt=n.applyBindings;n.applyBindings=function(){i.init();tt.apply(this,arguments)};n.validatedObservable=function(t,r){if(!r&&!i.utils.isObject(t))return n.observable(t).extend({validatable:!0});var u=n.observable(t);return u.errors=i.group(i.utils.isObject(t)?t:{},r),u.isValid=n.observable(0===u.errors().length),n.isObservable(u.errors)?u.errors.subscribe(function(n){u.isValid(0===n.length)}):n.computed(u.errors).subscribe(function(n){u.isValid(0===n.length)}),u.subscribe(function(n){i.utils.isObject(n)||(n={});u.errors._updateState(n);u.isValid(0===u.errors().length)}),u}})