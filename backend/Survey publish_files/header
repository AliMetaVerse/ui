var Webropol=Webropol||{};Webropol.Survey=Webropol.Survey||{};Webropol.Survey.Header=function(n,t){var s=this,h="."+n,i,f="HeaderState",e=100,o=t,r=null,u=null;this.init=function(n){u=$("#header-warning-modal-template");s.setAfterMinimizeButtonClickAction(n);l();c();a()};this.setAfterMinimizeButtonClickAction=function(n){i=n||function(){}};var c=function(){$("#minimizeButton").on("click",y);$("#helpButton").on("click",p);$("#openSwitchToDifferentUEModalButton").on("click",w)},l=function(){if(Webropol.Shared.Common.Cookie.hasItem(f)){var n=Webropol.Shared.Common.Cookie.getItem(f);n==Webropol.Constants.Common.HeaderState.Collapsed&&($(".webropol-menu-top").addClass("collapsed-header"),$(".webropol-menu-top-big-bar").hide(),i())}},a=function(){$("*[data-warning-modal]").on("click",v)},v=function(){var n=$(this),i=n.data("warning-modal-title"),r=n.data("warning-modal-message"),f=u.find("#header-warning-modal-title"),e=u.find("#header-warning-modal-message"),t;f.html(i);e.html(r);t=Webropol.Shared.Common.showPopupForContainer(u);t.modal("show")},y=function(){var n;return $(".webropol-menu-top").hasClass("collapsed-header")?($(".webropol-menu-top-big-bar").slideDown(e,i),$(".webropol-menu-top").removeClass("collapsed-header"),n=Webropol.Constants.Common.HeaderState.Expanded):($(".webropol-menu-top-big-bar").slideUp(e,i),$(".webropol-menu-top").addClass("collapsed-header"),n=Webropol.Constants.Common.HeaderState.Collapsed),Webropol.Shared.Common.Cookie.updateItem(f,n,Infinity,"/",h),!1},p=function(){return Webropol.Shared.Common.showPopupForContainer($("#help-popup-template")),!1},w=function(){return Webropol.Shared.Common.callAsync({},o.getAvailableUserEnvironments,function(n){r||(r=new Webropol.Survey.Header.SwitchToDifferentUserEnvironment(o,n),r.init());r.showModal()}),!1}};Webropol=Webropol||{};Webropol.Survey=Webropol.Survey||{};Webropol.Survey.Header=Webropol.Survey.Header||{};Webropol.Survey.Header.SwitchAppsMenu=function(n,t){var i=this,f=n,u=t,r=null;i.init=function(){r=$("#app-disabled-modal-template");$(".app-disabled-link").on("click",i.onDisabledAppClick);$(".app-redirect-wstore").on("click",i.onDisabledAppClickWithRedirectToWstore)};i.onDisabledAppClick=function(){var t=$(this),n=t.data("app-id");i.showModal(n);i.saveVisitedDisabledAppClick(n)};i.onDisabledAppClickWithRedirectToWstore=function(){var n=$(this),t=n.data("app-id");return i.saveVisitedDisabledAppClick(t),!0};i.showModal=function(n){var i=r.find("#app-disabled-title"),f=r.find("#app-disabled-body"),e=u[n].title,o=u[n].body,t;i.html(e);f.html(o);t=Webropol.Shared.Common.showPopupForContainer(r);t.modal("show")};i.saveVisitedDisabledAppClick=function(n){var t={menuItem:n};Webropol.Shared.Common.callAsync(JSON.stringify(t),f.saveVisitedDisabledAppUrl)}};Webropol=Webropol||{};Webropol.Survey=Webropol.Survey||{};Webropol.Survey.Header=Webropol.Survey.Header||{};Webropol.Survey.Header.SwitchToDifferentUserEnvironment=function(n,t){var r=this,f=n,e=t,u=null,i=null,o=function(n){u=n},s=function(){var n=$("<a>",{href:f.switchToDifferentUserEnvironment.replace("__TargetUserEnvironmentIdPlaceholder__",u)});i.append(n);n[0].click()};r.init=function(){var n,t;i=Webropol.Shared.Common.showPopupForContainer($("#switch-to-different-user-environment-popup-template"));n=i.find(".switch-user-environment-button");n.on("click",s);t=new Webropol.Shared.SelectUserEnvironment;t.init(i,e,o)};r.showModal=function(){i.modal("show")}}