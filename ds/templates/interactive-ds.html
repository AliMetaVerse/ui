<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Design System Interaction | Webropol Design System</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Condensed:wght@400;700&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <script src="https://kit.fontawesome.com/50ef2d3cf8.js" crossorigin="anonymous"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        'webro-primary': '#1e6880',
                        'webro-accent': '#fe4911',
                        'webro-neutral': '#272a2b',
                    },
                    animation: {
                        'gradient': 'gradient 8s linear infinite',
                        'float': 'float 3s ease-in-out infinite',
                        'fade-in': 'fade-in 0.5s ease-in-out',
                    },
                    keyframes: {
                        gradient: {
                            '0%, 100%': {
                                'background-size': '200% 200%',
                                'background-position': 'left center'
                            },
                            '50%': {
                                'background-size': '200% 200%',
                                'background-position': 'right center'
                            },
                        },
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-10px)' },
                        },
                        'fade-in': {
                            '0%': { opacity: 0, transform: 'translateY(10px)' },
                            '100%': { opacity: 1, transform: 'translateY(0)' },
                        },
                    },
                },
            },
        }
    </script>
    <style>
        .roboto-condensed { font-family: 'Roboto Condensed', sans-serif; }
        .roboto { font-family: 'Roboto', sans-serif; }
        .code-block {
            background-color: var(--ds-neutral-50, rgb(249 250 251));
            border-radius: var(--ds-radius-md, 0.5rem);
            padding: var(--ds-spacing-4, 1rem);
            font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
            font-size: 0.875rem;
            line-height: 1.75;
            overflow-x: auto;
        }
        .dark .code-block {
            background-color: var(--ds-neutral-800, rgb(31 41 55));
        }
        @keyframes copySuccess {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        .copy-success {
            animation: copySuccess 0.3s ease-in-out;
        }
        .color-preview {
            transition: transform 0.2s ease-in-out;
        }
        .color-preview:hover {
            transform: scale(1.05);
        }
        /* DS Button Styles (if not already in ds.css) */
        .ds-btn {
            padding: var(--ds-spacing-4, 1rem) var(--ds-spacing-6, 1.5rem);
            border-radius: var(--ds-radius-md, 0.5rem);
            font-weight: 500;
            transition: background-color 0.2s, color 0.2s, transform 0.2s;
            outline: none;
            box-shadow: none;
        }
        .ds-btn:focus {
            outline: 2px solid var(--ds-primary-600, #1e6880);
            outline-offset: 2px;
        }
        .ds-btn-primary {
            background-color: var(--ds-primary-600, #1e6880);
            color: #fff;
        }
        .ds-btn-primary:hover {
            background-color: var(--ds-primary-700, #175566);
        }
        .ds-btn-secondary {
            background-color: var(--ds-neutral-200, #d1d5d6);
            color: var(--ds-primary-600, #1e6880);
        }
        .ds-btn-secondary:hover {
            background-color: var(--ds-neutral-300, #b0b6b7);
        }
        /* DS Tab Styles */
        .ds-tab {
            padding: var(--ds-spacing-4, 1rem) var(--ds-spacing-6, 1.5rem);
            border-radius: var(--ds-radius-md, 0.5rem) 0.5rem 0 0;
            font-weight: 500;
            transition: background-color 0.2s, color 0.2s;
            outline: none;
            background: var(--ds-neutral-100, #f3f4f4);
            color: var(--ds-neutral-700, #333637);
        }
        .ds-tab:focus {
            outline: 2px solid var(--ds-primary-600, #1e6880);
            outline-offset: 2px;
        }
        .ds-tab-active {
            background: var(--ds-primary-50, #eefbfd);
            color: var(--ds-primary-700, #175566);
            border-bottom: 2px solid var(--ds-primary-600, #1e6880);
        }
        /* Modal fade-in/fade-out (for toast) */
        @keyframes fade-in {
            from { opacity: 0; transform: translateY(16px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in {
            animation: fade-in 0.3s ease;
        }
        #ds-sidebar {
            transition: width 0.3s ease-in-out;
        }        #ds-sidebar.collapsed {
            width: 5.5rem !important; /* 4.5rem + padding */
        }
        #ds-sidebar.collapsed .sidebar-text-label {
            display: none;
        }
        #ds-sidebar.collapsed .sidebar-link {
            justify-content: center; /* Center icon */
            padding: 0.5rem; /* Smaller padding for collapsed mode */
            border-radius: 0.5rem; /* Smaller rounded corners when collapsed */
        }
        #ds-sidebar.collapsed .sidebar-link i {
            width: 1.25rem; /* 20px - smaller icon in collapsed mode */
            height: 1.25rem;
            margin-bottom: 0; /* Remove margin */
            font-size: 0.875rem; /* Smaller font size for the icon */
        }
        #ds-sidebar.collapsed #sidebar-toggle-icon-collapse {
            display: none;
        }
        #ds-sidebar.collapsed #sidebar-toggle-icon-expand {
            display: block !important; /* Tailwind 'hidden' has high specificity */
        }
        #ds-sidebar:not(.collapsed) #sidebar-toggle-icon-expand {
            display: none;
        }
        #ds-sidebar:not(.collapsed) #sidebar-toggle-icon-collapse {
            display: block;
        }

        /* Custom Scrollbar Styles - Remove sidebar specific ones */
        html, body {
            overflow-y: hidden; /* Prevent body from scrolling */
        }

        /* For Webkit browsers (Chrome, Safari, Edge) */
        body::-webkit-scrollbar, 
        #main-content::-webkit-scrollbar { /* Removed #ds-sidebar > div::-webkit-scrollbar */
            width: 3px; /* Very thin scrollbar */
            height: 3px; /* For horizontal scrollbars */
        }
        body::-webkit-scrollbar-track, 
        #main-content::-webkit-scrollbar-track { /* Removed #ds-sidebar > div::-webkit-scrollbar-track */
            background: transparent;
        }
        body::-webkit-scrollbar-thumb, 
        #main-content::-webkit-scrollbar-thumb { /* Removed #ds-sidebar > div::-webkit-scrollbar-thumb */
            background-color: rgba(0, 0, 0, 0.2); /* Semi-transparent thumb */
            border-radius: 1.5px; /* Adjusted for thinner scrollbar */
        }
        body::-webkit-scrollbar-thumb:hover, 
        #main-content::-webkit-scrollbar-thumb:hover { /* Removed #ds-sidebar > div::-webkit-scrollbar-thumb:hover */
            background-color: rgba(0, 0, 0, 0.3);
        }
        /* Dark mode scrollbar thumbs */
        .dark body::-webkit-scrollbar-thumb, 
        .dark #main-content::-webkit-scrollbar-thumb { /* Removed .dark #ds-sidebar > div::-webkit-scrollbar-thumb */
            background-color: rgba(255, 255, 255, 0.2);
        }
        .dark body::-webkit-scrollbar-thumb:hover, 
        .dark #main-content::-webkit-scrollbar-thumb:hover { /* Removed .dark #ds-sidebar > div::-webkit-scrollbar-thumb:hover */
            background-color: rgba(255, 255, 255, 0.3);
        }

        /* For Firefox */
        /* Keep body targeting here for consistency, though overflow-y: hidden makes its scrollbar non-visible */
        body, 
        #main-content { /* Removed #ds-sidebar > div */
            scrollbar-width: thin; /* 'thin' is the thinnest keyword option */
            scrollbar-color: rgba(0, 0, 0, 0.2) transparent; /* thumb color track color */
        }
        /* Dark mode scrollbar for Firefox */
        .dark body, 
        .dark #main-content { /* Removed .dark #ds-sidebar > div */
            scrollbar-color: rgba(255, 255, 255, 0.2) transparent;
        }

        /* Sidebar scroll shadow styles */
        #ds-sidebar .sidebar-scroll-container {
            position: relative;
            overflow-y: auto;
            /* Hide scrollbar */
            scrollbar-width: none; /* Firefox */
            -ms-overflow-style: none;  /* IE and Edge */
        }
        #ds-sidebar .sidebar-scroll-container::-webkit-scrollbar {
            display: none; /* Webkit */
        }

        #ds-sidebar .sidebar-scroll-container::before,
        #ds-sidebar .sidebar-scroll-container::after {
            content: "";
            position: absolute;
            left: 0;
            right: 0;
            height: 20px; /* Adjust height of shadow */
            z-index: 10;
            pointer-events: none; /* Allow clicking through */
            transition: opacity 0.2s ease-in-out;
            opacity: 0;
        }

        #ds-sidebar .sidebar-scroll-container::before {
            top: 0;
            background: linear-gradient(to bottom, rgba(0,0,0,0.1), transparent);
        }
        .dark #ds-sidebar .sidebar-scroll-container::before {
            background: linear-gradient(to bottom, rgba(255,255,255,0.1), transparent);
        }

        #ds-sidebar .sidebar-scroll-container::after {
            bottom: 0;
            background: linear-gradient(to top, rgba(0,0,0,0.1), transparent);
        }
        .dark #ds-sidebar .sidebar-scroll-container::after {
            background: linear-gradient(to top, rgba(255,255,255,0.1), transparent);
        }

        #ds-sidebar .sidebar-scroll-container.show-top-shadow::before,
        #ds-sidebar .sidebar-scroll-container.show-bottom-shadow::after {
            opacity: 1;
        }

        .sidebar-link.active-link {
            background-color: #1e6880; /* webro-primary */
            color: white;
        }
        .sidebar-link.active-link svg,
        .sidebar-link.active-link i {
            stroke: white;
            color: white;
        }
        #ds-sidebar.collapsed .sidebar-link.active-link {
            /* Ensure active style looks good in collapsed mode */
            background-color: #1e6880;
            color: white;
        }

        /* Improve sidebar link spacing */
        .sidebar-link {
            padding-left: 0.75rem;
            padding-right: 0.75rem;
            transition: padding 0.3s ease, border-radius 0.3s ease;
            border-radius: 0.75rem; /* Default rounded corners */
        }
        .sidebar-link i {
            transition: width 0.3s ease, height 0.3s ease, margin 0.3s ease, font-size 0.3s ease;
            width: 1.5rem; /* 24px - normal size */
            height: 1.5rem;
            font-size: 1rem; /* Default font size */
        }
        #main-content {
            transition: margin-left 0.3s ease-in-out;
        }
        /* Ensure toggle button is visually distinct and accessible */
        #sidebar-toggle {
            transition: background-color 0.2s ease;
        }
    </style>
</head>
<body class="bg-white dark:bg-gray-900 transition-colors duration-200 min-h-screen" style="background: linear-gradient(135deg, #eefbfd 0%, #f8fafc 100%);">
    <!-- Modern Glass Header -->
    <header class="sticky top-0 z-50 bg-white/80 dark:bg-gray-900/80 backdrop-blur-md border-b border-gray-200 dark:border-gray-700 flex items-center justify-between px-10 py-4 shadow-lg rounded-b-2xl">
        <h1 class="text-3xl md:text-4xl font-extrabold roboto-condensed tracking-tight text-webro-primary animate-fade-in">Webropol DS Playground</h1>
        <div class="flex items-center space-x-3">
            <button id="dark-mode-toggle" class="p-2 rounded-full bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors" aria-label="Toggle dark mode">
                <i id="sun-icon" class="fas fa-sun w-5 h-5 hidden dark:block"></i>
                <i id="moon-icon" class="fas fa-moon w-5 h-5 block dark:hidden"></i>
            </button>
            <button id="open-modal-demo" class="ds-btn ds-btn-primary shadow-md hover:scale-105 animate-fade-in">Open Modal</button>
            <button id="show-toast-demo" class="ds-btn ds-btn-secondary shadow-md hover:scale-105 animate-fade-in">Show Toast</button>
        </div>
    </header>
    <div class="flex h-[calc(100vh-80px)] overflow-hidden">
        <!-- Floating Glass Sidebar -->        <nav id="ds-sidebar" class="fixed left-5 top-[95px] w-24 h-[calc(100vh-100px)] bg-white/70 dark:bg-gray-800/70 backdrop-blur-xl rounded-3xl shadow-2xl flex flex-col items-center py-8 px-3 z-30 border border-gray-100 dark:border-gray-700 gap-6 transition-all duration-300">
            <button id="sidebar-toggle" aria-label="Toggle sidebar" aria-expanded="true" class="absolute -right-3 top-1/2 -translate-y-1/2 z-40 bg-white dark:bg-gray-700 p-1.5 rounded-full shadow-md hover:bg-gray-100 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-webro-primary">
                <i id="sidebar-toggle-icon-collapse" class="fas fa-chevron-left w-5 h-5 text-webro-primary dark:text-white"></i>
                <i id="sidebar-toggle-icon-expand" class="fas fa-chevron-right w-5 h-5 text-webro-primary dark:text-white hidden"></i>
            </button>
            <div class="sidebar-scroll-container flex flex-col items-center gap-4 w-full pt-6 pb-4 overflow-y-auto px-1">
                <a href="#overview" class="sidebar-link group flex flex-col items-center justify-center gap-1 p-3 rounded-xl hover:bg-webro-primary hover:text-white transition-all duration-150 focus:outline-none focus:ring-2 focus:ring-webro-primary w-full" tabindex="0" aria-label="Overview">
                    <i class="fas fa-home w-6 h-6 mb-1"></i>
                    <span class="sidebar-text-label text-xs font-semibold">Overview</span>
                </a>
                <a href="#color-playground" class="sidebar-link group flex flex-col items-center justify-center gap-1 p-3 rounded-xl hover:bg-webro-primary hover:text-white transition-all duration-150 focus:outline-none focus:ring-2 focus:ring-webro-primary w-full" tabindex="0" aria-label="Color Playground">
                    <i class="fas fa-palette w-6 h-6 mb-1"></i>
                    <span class="sidebar-text-label text-xs font-semibold">Colors</span>
                </a>
                <a href="#typography-tester" class="sidebar-link group flex flex-col items-center justify-center gap-1 p-3 rounded-xl hover:bg-webro-primary hover:text-white transition-all duration-150 focus:outline-none focus:ring-2 focus:ring-webro-primary w-full" tabindex="0" aria-label="Typography">
                    <i class="fas fa-font w-6 h-6 mb-1"></i>
                    <span class="sidebar-text-label text-xs font-semibold">Typography</span>
                </a>
                <a href="#spacing-visualizer" class="sidebar-link group flex flex-col items-center justify-center gap-1 p-3 rounded-xl hover:bg-webro-primary hover:text-white transition-all duration-150 focus:outline-none focus:ring-2 focus:ring-webro-primary w-full" tabindex="0" aria-label="Spacing">
                    <i class="fas fa-ruler-combined w-6 h-6 mb-1"></i>
                    <span class="sidebar-text-label text-xs font-semibold">Spacing</span>
                </a>
                <a href="#grid-playground" class="sidebar-link group flex flex-col items-center justify-center gap-1 p-3 rounded-xl hover:bg-webro-primary hover:text-white transition-all duration-150 focus:outline-none focus:ring-2 focus:ring-webro-primary w-full" tabindex="0" aria-label="Grid">
                    <i class="fas fa-th-large w-6 h-6 mb-1"></i>
                    <span class="sidebar-text-label text-xs font-semibold">Grid</span>
                </a>
                <a href="#live-preview" class="sidebar-link group flex flex-col items-center justify-center gap-1 p-3 rounded-xl hover:bg-webro-primary hover:text-white transition-all duration-150 focus:outline-none focus:ring-2 focus:ring-webro-primary w-full" tabindex="0" aria-label="Live Preview">
                    <i class="fas fa-eye w-6 h-6 mb-1"></i>
                    <span class="sidebar-text-label text-xs font-semibold">Preview</span>
                </a>
                <a href="#accessibility-checker" class="sidebar-link group flex flex-col items-center justify-center gap-1 p-3 rounded-xl hover:bg-webro-primary hover:text-white transition-all duration-150 focus:outline-none focus:ring-2 focus:ring-webro-primary w-full" tabindex="0" aria-label="Accessibility">
                    <i class="fas fa-universal-access w-6 h-6 mb-1"></i>
                    <span class="sidebar-text-label text-xs font-semibold">A11y</span>
                </a>
                <a href="#components" class="sidebar-link group flex flex-col items-center justify-center gap-1 p-3 rounded-xl hover:bg-webro-primary hover:text-white transition-all duration-150 focus:outline-none focus:ring-2 focus:ring-webro-primary w-full" tabindex="0" aria-label="Components">
                    <i class="fas fa-cubes w-6 h-6 mb-1"></i>
                    <span class="sidebar-text-label text-xs font-semibold">Components</span>
                </a>
            </div>
        </nav>
        <!-- Main Content -->
        <main id="main-content" class="flex-1 ml-32 lg:ml-36 xl:ml-40 overflow-y-auto bg-transparent transition-colors duration-200">
            <section id="overview" class="mb-4 p-12 md:p-16 lg:p-20 animate-fade-in">
                <h2 class="roboto-condensed font-extrabold text-4xl md:text-5xl text-webro-neutral mb-8 tracking-tight animate-fade-in">Webropol Design System Overview</h2>
                <p class="roboto text-lg md:text-xl text-webro-neutral/80 max-w-2xl mb-8 animate-fade-in">A modern, interactive playground for exploring and testing Webropol’s design system components, colors, spacing, and accessibility. Use the sidebar to jump between sections and try out live features below.</p>
            </section>
            <!-- Color Playground -->
            <div id="color-playground" class="mb-4 p-12 md:p-16 lg:p-20 bg-white dark:bg-gray-900 border-t border-gray-200 dark:border-gray-700 shadow-md rounded-lg">
                <h2 class="roboto-condensed font-bold text-2xl text-webro-neutral dark:text-white mb-6">Color Playground</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div class="space-y-4">
                        <div class="flex items-center space-x-4">
                            <label class="roboto text-webro-neutral dark:text-white">Primary Color:</label>
                            <input type="color" id="primary-color" value="#1e6880" class="w-12 h-12 rounded cursor-pointer">
                        </div>
                        <div class="flex items-center space-x-4">
                            <label class="roboto text-webro-neutral dark:text-white">Accent Color:</label>
                            <input type="color" id="accent-color" value="#fe4911" class="w-12 h-12 rounded cursor-pointer">
                        </div>
                    </div>
                    <div id="color-preview" class="bg-gray-50 dark:bg-gray-800 rounded-lg p-6">
                        <div id="preview-button" class="mb-4 px-4 py-2 rounded-lg text-white transition-colors cursor-pointer">
                            Button Preview
                        </div>
                        <div id="preview-text" class="roboto">
                            Sample text with accent color
                        </div>
                    </div>
                </div>
            </div>

            <!-- Typography Tester -->
            <div id="typography-tester" class="mb-4 p-12 md:p-16 lg:p-20 bg-white dark:bg-gray-900 border-t border-gray-200 dark:border-gray-700 shadow-md rounded-lg">
                <h2 class="roboto-condensed font-bold text-2xl text-webro-neutral dark:text-white mb-6">Typography Tester</h2>
                <div class="space-y-6">
                    <div>
                        <textarea id="typography-input" 
                                 class="w-full p-4 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-webro-neutral dark:text-white focus:ring-2 focus:ring-webro-primary focus:border-transparent"
                                 rows="3"
                                 placeholder="Type or paste your text here...">Try out different typography styles with your own text!</textarea>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        <div class="preview-card bg-gray-50 dark:bg-gray-800 p-4 rounded-lg">
                            <h3 class="roboto-condensed font-bold text-lg text-webro-neutral dark:text-white mb-2">Display</h3>
                            <p id="preview-display" class="roboto-condensed font-bold text-4xl"></p>
                        </div>
                        <div class="preview-card bg-gray-50 dark:bg-gray-800 p-4 rounded-lg">
                            <h3 class="roboto-condensed font-bold text-lg text-webro-neutral dark:text-white mb-2">Heading</h3>
                            <p id="preview-heading" class="roboto-condensed font-bold text-2xl"></p>
                        </div>
                        <div class="preview-card bg-gray-50 dark:bg-gray-800 p-4 rounded-lg">
                            <h3 class="roboto-condensed font-bold text-lg text-webro-neutral dark:text-white mb-2">Body</h3>
                            <p id="preview-body" class="roboto text-base"></p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Spacing Visualizer -->
            <div id="spacing-visualizer" class="mb-4 p-12 md:p-16 lg:p-20 bg-white dark:bg-gray-900 border-t border-gray-200 dark:border-gray-700 shadow-md rounded-lg">
                <h2 class="roboto-condensed font-bold text-2xl text-webro-neutral dark:text-white mb-6">Spacing Visualizer</h2>
                <div class="space-y-6">
                    <div class="flex items-center space-x-4">
                        <label class="roboto text-webro-neutral dark:text-white">Spacing Scale:</label>
                        <input type="range" id="spacing-range" min="1" max="10" value="4" 
                               class="w-48 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700">
                        <span id="spacing-value" class="roboto text-webro-neutral dark:text-white">16px</span>
                    </div>
                    
                    <div id="spacing-preview" class="bg-gray-50 dark:bg-gray-800 p-6 rounded-lg">
                        <div class="flex flex-wrap gap-4">
                            <div class="bg-webro-primary rounded-lg text-white flex items-center justify-center" style="width: 16px; height: 16px;">
                                1
                            </div>
                            <div class="bg-webro-primary rounded-lg text-white flex items-center justify-center" style="width: 32px; height: 32px;">
                                2
                            </div>
                            <div class="bg-webro-primary rounded-lg text-white flex items-center justify-center" style="width: 48px; height: 48px;">
                                3
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Grid Playground -->
            <div id="grid-playground" class="mb-4 p-12 md:p-16 lg:p-20 bg-white dark:bg-gray-900 border-t border-gray-200 dark:border-gray-700 shadow-md rounded-lg">
                <h2 class="roboto-condensed font-bold text-2xl text-webro-neutral dark:text-white mb-6">Grid Playground</h2>
                <div class="space-y-6">
                    <div class="flex flex-wrap gap-4">
                        <div>
                            <label class="roboto text-webro-neutral dark:text-white block mb-2">Columns:</label>
                            <select id="grid-columns" class="bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg px-3 py-2">
                                <option value="1">1 column</option>
                                <option value="2">2 columns</option>
                                <option value="3">3 columns</option>
                                <option value="4" selected>4 columns</option>
                                <option value="6">6 columns</option>
                                <option value="12">12 columns</option>
                            </select>
                        </div>
                        <div>
                            <label class="roboto text-webro-neutral dark:text-white block mb-2">Gap:</label>
                            <select id="grid-gap" class="bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg px-3 py-2">
                                <option value="0">No gap</option>
                                <option value="1">4px</option>
                                <option value="2">8px</option>
                                <option value="4" selected>16px</option>
                                <option value="6">24px</option>
                                <option value="8">32px</option>
                            </select>
                        </div>
                    </div>
                    
                    <div id="grid-preview" class="bg-gray-50 dark:bg-gray-800 p-6 rounded-lg">
                        <div class="grid grid-cols-4 gap-4">
                            <!-- Grid items will be generated by JavaScript -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Live Preview Mode -->
            <div id="live-preview" class="mb-4 p-12 md:p-16 lg:p-20 bg-white dark:bg-gray-900 border-t border-gray-200 dark:border-gray-700 shadow-md rounded-lg">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="roboto-condensed font-bold text-2xl text-webro-neutral dark:text-white">Live Preview</h2>
                    <div class="flex items-center space-x-4">
                        <button id="preview-mobile" class="p-2 rounded-lg bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors text-sm">Mobile</button>
                        <button id="preview-tablet" class="p-2 rounded-lg bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors text-sm">Tablet</button>
                        <button id="preview-desktop" class="p-2 rounded-lg bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors text-sm">Desktop</button>
                    </div>
                </div>
                <div class="mb-6">
                    <label for="html-input" class="block mb-2 roboto text-sm text-webro-neutral dark:text-white">Enter HTML to Preview:</label>
                    <textarea id="html-input" class="w-full h-40 p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-webro-neutral dark:text-white focus:ring-webro-primary focus:border-webro-primary font-mono text-sm" placeholder="e.g., <button class='ds-btn ds-btn-primary'>Click me</button>"></textarea>
                    <button id="render-html-btn" class="mt-3 px-4 py-2 bg-webro-primary text-white rounded-lg hover:bg-opacity-90 transition-colors ds-btn">Render HTML</button>
                </div>
                <div id="preview-container" class="bg-gray-50 dark:bg-gray-800 rounded-lg p-6 w-full transition-all duration-300 min-h-[200px]">
                    <div id="preview-content" class="mx-auto transition-all duration-300">
                        <!-- Initial content will be set by JS -->
                    </div>
                </div>
            </div>

            <!-- Accessibility Checker -->
            <div id="accessibility-checker" class="mb-4 p-12 md:p-16 lg:p-20 bg-white dark:bg-gray-900 border-t border-gray-200 dark:border-gray-700 shadow-md rounded-lg">
                <h2 class="roboto-condensed font-bold text-2xl text-webro-neutral dark:text-white mb-6">Accessibility Checker</h2>
                <div class="space-y-6">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label class="roboto text-webro-neutral dark:text-white block mb-2">Text Color:</label>
                            <input type="color" id="text-color" value="#272a2b" class="w-full h-12 rounded cursor-pointer">
                        </div>
                        <div>
                            <label class="roboto text-webro-neutral dark:text-white block mb-2">Background Color:</label>
                            <input type="color" id="bg-color" value="#ffffff" class="w-full h-12 rounded cursor-pointer">
                        </div>
                    </div>
                    <div id="contrast-result" class="bg-gray-50 dark:bg-gray-800 p-6 rounded-lg">
                        <div class="flex items-center justify-between mb-4">
                            <span class="roboto font-medium text-webro-neutral dark:text-white">Contrast Ratio:</span>
                            <span id="contrast-value" class="roboto-condensed font-bold text-2xl text-webro-primary"></span>
                        </div>
                        <div class="space-y-2">
                            <div class="flex items-center justify-between">
                                <span class="roboto text-webro-neutral dark:text-white">WCAG AA (Normal Text):</span>
                                <span id="wcag-aa-normal" class="roboto font-medium"></span>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="roboto text-webro-neutral dark:text-white">WCAG AA (Large Text):</span>
                                <span id="wcag-aa-large" class="roboto font-medium"></span>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="roboto text-webro-neutral dark:text-white">WCAG AAA:</span>
                                <span id="wcag-aaa" class="roboto font-medium"></span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Enhanced Spacing Visualizer -->
            <div id="enhanced-spacing" class="mb-4 p-12 md:p-16 lg:p-20 bg-white dark:bg-gray-900 border-t border-gray-200 dark:border-gray-700 shadow-md rounded-lg">
                <h2 class="roboto-condensed font-bold text-2xl text-webro-neutral dark:text-white mb-6">Spacing Generator</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div class="space-y-4">
                        <div>
                            <label class="roboto text-webro-neutral dark:text-white block mb-2">Property:</label>
                            <select id="spacing-property" class="w-full p-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-webro-neutral dark:text-white">
                                <option value="margin">Margin</option>
                                <option value="padding">Padding</option>
                                <option value="gap">Gap</option>
                            </select>
                        </div>
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="roboto text-webro-neutral dark:text-white block mb-2">Top:</label>
                                <input type="range" min="0" max="8" value="2" class="spacing-input" data-direction="top">
                            </div>
                            <div>
                                <label class="roboto text-webro-neutral dark:text-white block mb-2">Right:</label>
                                <input type="range" min="0" max="8" value="2" class="spacing-input" data-direction="right">
                            </div>
                            <div>
                                <label class="roboto text-webro-neutral dark:text-white block mb-2">Bottom:</label>
                                <input type="range" min="0" max="8" value="2" class="spacing-input" data-direction="bottom">
                            </div>
                            <div>
                                <label class="roboto text-webro-neutral dark:text-white block mb-2">Left:</label>
                                <input type="range" min="0" max="8" value="2" class="spacing-input" data-direction="left">
                            </div>
                        </div>
                    </div>
                    <div class="bg-gray-50 dark:bg-gray-800 p-6 rounded-lg">
                        <div id="spacing-demo" class="bg-webro-primary bg-opacity-20 dark:bg-opacity-40 rounded-lg p-4">
                            <div class="bg-webro-primary rounded-lg p-4 text-white text-center">
                                Preview Element
                            </div>
                        </div>
                        <div class="mt-4">
                            <label class="roboto text-webro-neutral dark:text-white block mb-2">Generated CSS:</label>
                            <pre id="spacing-css" class="bg-white dark:bg-gray-900 p-4 rounded-lg font-mono text-sm"></pre>
                            <button id="copy-spacing-css" class="mt-2 px-4 py-2 bg-webro-primary text-white rounded-lg hover:bg-opacity-90 transition-colors">
                                Copy CSS
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Interactive Components -->
            <section id="components" class="mb-4 p-12 md:p-16 lg:p-20">
                <h2 class="roboto-condensed font-bold text-2xl text-webro-neutral mb-6">Interactive Components</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <!-- Tabs Demo -->
                    <div class="bg-gray-50 dark:bg-gray-800 p-6 rounded-lg border border-gray-200 dark:border-gray-700">
                        <div class="flex space-x-2 mb-4" role="tablist">
                            <button class="ds-tab ds-tab-active" id="tab-1" role="tab" aria-selected="true">Tab 1</button>
                            <button class="ds-tab" id="tab-2" role="tab" aria-selected="false">Tab 2</button>
                            <button class="ds-tab" id="tab-3" role="tab" aria-selected="false">Tab 3</button>
                        </div>
                        <div id="tab-content-1" class="tab-content">Tab 1 content goes here.</div>
                        <div id="tab-content-2" class="tab-content hidden">Tab 2 content goes here.</div>
                        <div id="tab-content-3" class="tab-content hidden">Tab 3 content goes here.</div>
                    </div>
                </div> <!-- End of grid -->

                <!-- Buttons for Modal and Toast Demos -->
                <div class="mt-8 grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div class="bg-gray-50 dark:bg-gray-800 p-6 rounded-lg border border-gray-200 dark:border-gray-700 flex flex-col items-start">
                        <h3 class="roboto-condensed font-semibold text-lg text-webro-neutral dark:text-white mb-2">Modal Demo</h3>
                        <p class="roboto text-sm text-webro-neutral/80 dark:text-gray-300 mb-4">Click the button to open a sample modal dialog.</p>
                        <button id="open-modal-demo" class="ds-btn ds-btn-secondary">Open Modal</button>
                    </div>
                    <div class="bg-gray-50 dark:bg-gray-800 p-6 rounded-lg border border-gray-200 dark:border-gray-700 flex flex-col items-start">
                        <h3 class="roboto-condensed font-semibold text-lg text-webro-neutral dark:text-white mb-2">Toast Notification Demo</h3>
                        <p class="roboto text-sm text-webro-neutral/80 dark:text-gray-300 mb-4">Click the button to show a toast notification.</p>
                        <button id="show-toast-demo" class="ds-btn ds-btn-secondary">Show Toast</button>
                    </div>
                </div>

                <!-- Modal Demo (definition) -->
                <div id="ds-modal" class="fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50 hidden" role="dialog" aria-modal="true" aria-labelledby="modal-title">
                    <div class="bg-white dark:bg-gray-900 rounded-lg shadow-lg p-8 max-w-md w-full">
                        <h3 id="modal-title" class="roboto-condensed font-bold text-xl text-webro-primary mb-4">DS Modal Demo</h3>
                        <p class="roboto text-webro-neutral mb-6">This is a modal dialog. It uses DS styles and can be closed with the button below or by pressing Escape.</p>
                        <button id="close-modal-demo" class="ds-btn ds-btn-primary w-full">Close Modal</button>
                    </div>
                </div>
                <!-- Toast Demo (container) -->
                <div id="ds-toast-container" class="fixed bottom-8 right-8 z-50 flex flex-col space-y-2"></div>
            </section>
        </main>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Color Playground
            const primaryColorInput = document.getElementById('primary-color');
            const accentColorInput = document.getElementById('accent-color');
            const previewButton = document.getElementById('preview-button');
            const previewText = document.getElementById('preview-text');
            function updateColorPreview() {
                previewButton.style.backgroundColor = primaryColorInput.value;
                previewText.style.color = accentColorInput.value;
            }
            primaryColorInput?.addEventListener('input', updateColorPreview);
            accentColorInput?.addEventListener('input', updateColorPreview);
            if (primaryColorInput && accentColorInput && previewButton && previewText) {
                updateColorPreview();
            }

            // Typography Tester
            const typographyInput = document.getElementById('typography-input');
            const previewDisplay = document.getElementById('preview-display');
            const previewHeading = document.getElementById('preview-heading');
            const previewBody = document.getElementById('preview-body');
            function updateTypographyPreviews() {
                const text = typographyInput.value;
                if (previewDisplay) previewDisplay.textContent = text;
                if (previewHeading) previewHeading.textContent = text;
                if (previewBody) previewBody.textContent = text;
            }
            typographyInput?.addEventListener('input', updateTypographyPreviews);
            if (typographyInput && (previewDisplay || previewHeading || previewBody)) {
                updateTypographyPreviews();
            }

            // Smooth scrolling for anchor links
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    const targetId = this.getAttribute('href').substring(1);
                    const target = document.getElementById(targetId);
                    if (target) {
                        e.preventDefault();
                        // If in main content, scroll the main content container
                        const mainContent = document.getElementById('main-content');
                        if (target.closest('#main-content') && mainContent) {
                            mainContent.scrollTo({
                                top: target.offsetTop - 80, // Account for header
                                behavior: 'smooth'
                            });
                        } else {
                            target.scrollIntoView({
                                behavior: 'smooth'
                            });
                        }
                        
                        // Update active link state
                        document.querySelectorAll('.sidebar-link').forEach(link => {
                            link.classList.toggle('active-link', link.getAttribute('href') === `#${targetId}`);
                        });
                    }
                });
            });

            // Spacing Visualizer
            const spacingRange = document.getElementById('spacing-range');
            const spacingValue = document.getElementById('spacing-value');
            const spacingPreview = document.getElementById('spacing-preview');
            function updateSpacingVisualizer() {
                if (!spacingRange || !spacingValue || !spacingPreview) return;
                
                const value = parseInt(spacingRange.value);
                const pixels = value * 4;
                spacingValue.textContent = `${pixels}px`;
                
                // Find or create the flex container
                let boxesContainer = spacingPreview.querySelector('.flex.flex-wrap.gap-4');
                if (!boxesContainer) {
                    boxesContainer = document.createElement('div');
                    boxesContainer.className = 'flex flex-wrap gap-4';
                    spacingPreview.appendChild(boxesContainer);
                }
                
                // Ensure we have exactly 3 boxes
                while (boxesContainer.children.length < 3) {
                    const box = document.createElement('div');
                    box.className = 'bg-webro-primary rounded-lg text-white flex items-center justify-center';
                    box.textContent = boxesContainer.children.length + 1;
                    boxesContainer.appendChild(box);
                }
                
                // Update sizes
                Array.from(boxesContainer.children).forEach((box, index) => {
                    const size = pixels * (index + 1);
                    box.style.width = `${size}px`;
                    box.style.height = `${size}px`;
                });
            }
            spacingRange?.addEventListener('input', updateSpacingVisualizer);
            if (spacingRange && spacingValue && spacingPreview) {
                updateSpacingVisualizer();
            }

            // Grid Playground
            const gridColumns = document.getElementById('grid-columns');
            const gridGap = document.getElementById('grid-gap');
            const gridPreviewContainer = document.getElementById('grid-preview');
            function updateGrid() {
                if (!gridColumns || !gridGap || !gridPreviewContainer) return;
                
                const columns = parseInt(gridColumns.value);
                const gapValue = gridGap.value;
                
                // Find or create the grid container
                let gridPreview = gridPreviewContainer.querySelector('div');
                if (!gridPreview) {
                    gridPreview = document.createElement('div');
                    gridPreviewContainer.appendChild(gridPreview);
                }
                
                // Set grid classes
                gridPreview.className = `grid gap-${gapValue}`;
                
                // Support different column counts
                switch (columns) {
                    case 1: gridPreview.classList.add('grid-cols-1'); break;
                    case 2: gridPreview.classList.add('grid-cols-2'); break;
                    case 3: gridPreview.classList.add('grid-cols-3'); break;
                    case 4: gridPreview.classList.add('grid-cols-4'); break;
                    case 6: gridPreview.classList.add('grid-cols-6'); break;
                    case 12: gridPreview.classList.add('grid-cols-12'); break;
                    default: gridPreview.classList.add('grid-cols-4');
                }
                
                // Create grid items
                gridPreview.innerHTML = '';
                for (let i = 0; i < columns * 2; i++) {
                    const item = document.createElement('div');
                    item.className = 'bg-webro-primary bg-opacity-20 dark:bg-opacity-40 rounded-lg p-4 aspect-video flex items-center justify-center';
                    item.innerHTML = `<span class="roboto text-webro-primary dark:text-white">Item ${i + 1}</span>`;
                    gridPreview.appendChild(item);
                }
            }
            gridColumns?.addEventListener('change', updateGrid);
            gridGap?.addEventListener('change', updateGrid);
            if (gridColumns && gridGap && gridPreviewContainer) {
                updateGrid();
            }

            // Live Preview Mode
            const htmlInput = document.getElementById('html-input');
            const renderHtmlBtn = document.getElementById('render-html-btn');
            const previewContent = document.getElementById('preview-content');
            const previewContainer = document.getElementById('preview-container');

            function renderCustomHTML() {
                if (!htmlInput || !previewContent) return;
                // Sanitize HTML to prevent XSS - in a real app, use a proper sanitizer library
                previewContent.innerHTML = htmlInput.value;
            }

            renderHtmlBtn?.addEventListener('click', renderCustomHTML);

            document.getElementById('preview-mobile')?.addEventListener('click', () => {
                if (previewContent) previewContent.style.maxWidth = '375px';
            });
            document.getElementById('preview-tablet')?.addEventListener('click', () => {
                if (previewContent) previewContent.style.maxWidth = '768px';
            });
            document.getElementById('preview-desktop')?.addEventListener('click', () => {
                if (previewContent) previewContent.style.maxWidth = '100%';
            });

            // Set initial content for live preview
            if (htmlInput && previewContent) {
                if (!htmlInput.value) {
                    htmlInput.value = '<div class="p-4 bg-webro-primary text-white rounded-lg">\n  <h3 class="text-lg font-semibold">Hello Webropol!</h3>\n  <p>This is a live preview. Try editing the HTML above!</p>\n  <button class="ds-btn ds-btn-primary mt-2">Sample Button</button>\n</div>';
                }
                renderCustomHTML();
            }

            // Accessibility Checker
            const textColorInput = document.getElementById('text-color');
            const bgColorInput = document.getElementById('bg-color');
            const contrastValue = document.getElementById('contrast-value');
            const wcagAANormal = document.getElementById('wcag-aa-normal');
            const wcagAALarge = document.getElementById('wcag-aa-large');
            const wcagAAA = document.getElementById('wcag-aaa');

            function calculateContrastRatio(color1, color2) {
                // Convert hex color to RGB
                const getRGB = (hex) => {
                    const r = parseInt(hex.slice(1, 3), 16);
                    const g = parseInt(hex.slice(3, 5), 16);
                    const b = parseInt(hex.slice(5, 7), 16);
                    return [r, g, b];
                };
                
                // Calculate relative luminance
                const getLuminance = (r, g, b) => {
                    const [rs, gs, bs] = [r, g, b].map(c => {
                        c = c / 255;
                        return c <= 0.03928 ? c / 12.92 : Math.pow((c + 0.055) / 1.055, 2.4);
                    });
                    return 0.2126 * rs + 0.7152 * gs + 0.0722 * bs;
                };
                
                const [r1, g1, b1] = getRGB(color1);
                const [r2, g2, b2] = getRGB(color2);
                const l1 = getLuminance(r1, g1, b1);
                const l2 = getLuminance(r2, g2, b2);
                const ratio = (Math.max(l1, l2) + 0.05) / (Math.min(l1, l2) + 0.05);
                return ratio;
            }

            function updateContrastResults() {
                if (!textColorInput || !bgColorInput || !contrastValue || !wcagAANormal || !wcagAALarge || !wcagAAA) return;
                
                const ratio = calculateContrastRatio(textColorInput.value, bgColorInput.value);
                contrastValue.textContent = ratio.toFixed(2) + ':1';
                
                const passesAA = ratio >= 4.5;
                const passesAALarge = ratio >= 3;
                const passesAAA = ratio >= 7;
                
                wcagAANormal.textContent = passesAA ? '✓ Pass' : '✗ Fail';
                wcagAANormal.className = passesAA ? 'text-green-500 font-medium' : 'text-red-500 font-medium';
                
                wcagAALarge.textContent = passesAALarge ? '✓ Pass' : '✗ Fail';
                wcagAALarge.className = passesAALarge ? 'text-green-500 font-medium' : 'text-red-500 font-medium';
                
                wcagAAA.textContent = passesAAA ? '✓ Pass' : '✗ Fail';
                wcagAAA.className = passesAAA ? 'text-green-500 font-medium' : 'text-red-500 font-medium';
            }

            textColorInput?.addEventListener('input', updateContrastResults);
            bgColorInput?.addEventListener('input', updateContrastResults);
            if (textColorInput && bgColorInput && contrastValue) {
                updateContrastResults();
            }

            // Enhanced Spacing Generator
            const spacingProperty = document.getElementById('spacing-property');
            const spacingInputs = document.querySelectorAll('.spacing-input');
            const spacingDemo = document.getElementById('spacing-demo');
            const spacingCss = document.getElementById('spacing-css');
            const copySpacingCss = document.getElementById('copy-spacing-css');

            function updateSpacing() {
                if (!spacingProperty || !spacingInputs.length || !spacingDemo || !spacingCss) return;
                
                const property = spacingProperty.value;
                
                // Get values, defaulting to 0 if fewer than 4 inputs
                const values = [];
                spacingInputs.forEach(input => values.push(parseInt(input.value) * 4));
                while (values.length < 4) values.push(0); // Ensure we have 4 values
                
                const [top, right, bottom, left] = values;
                const css = `${property}: ${top}px ${right}px ${bottom}px ${left}px;`;
                
                // Apply to demo element
                spacingDemo.style[property] = `${top}px ${right}px ${bottom}px ${left}px`;
                spacingCss.textContent = css;
            }

            spacingProperty?.addEventListener('change', updateSpacing);
            spacingInputs.forEach(input => {
                input?.addEventListener('input', updateSpacing);
            });
            
            copySpacingCss?.addEventListener('click', () => {
                if (spacingCss) {
                    navigator.clipboard.writeText(spacingCss.textContent);
                    copySpacingCss.textContent = 'Copied!';
                    copySpacingCss.classList.add('bg-green-500');
                    setTimeout(() => {
                        copySpacingCss.textContent = 'Copy CSS';
                        copySpacingCss.classList.remove('bg-green-500');
                    }, 2000);
                }
            });
            
            if (spacingProperty && spacingInputs.length && spacingDemo && spacingCss) {
                updateSpacing();
                
                if (copySpacingCss && !copySpacingCss.textContent) {
                    copySpacingCss.textContent = 'Copy CSS';
                    copySpacingCss.className = 'mt-2 px-4 py-2 bg-webro-primary text-white rounded-lg hover:bg-opacity-90 transition-colors';
                }
            }

            // Tabs Demo
            const tabContainer = document.querySelector('[role="tablist"]');
            if (tabContainer) {
                // Create tabs if they don't exist
                if (!tabContainer.children.length) {
                    for (let i = 1; i <= 3; i++) {
                        const tab = document.createElement('button');
                        tab.id = `tab-${i}`;
                        tab.className = i === 1 ? 'ds-tab ds-tab-active' : 'ds-tab';
                        tab.setAttribute('role', 'tab');
                        tab.setAttribute('aria-selected', i === 1 ? 'true' : 'false');
                        tab.setAttribute('aria-controls', `tab-content-${i}`);
                        tab.textContent = `Tab ${i}`;
                        tabContainer.appendChild(tab);
                    }
                }
                
                const tabButtons = tabContainer.querySelectorAll('[role="tab"]');
                const tabContents = document.querySelectorAll('[id^="tab-content-"]');
                
                tabButtons.forEach((btn, idx) => {
                    btn.addEventListener('click', () => {
                        tabButtons.forEach((b, i) => {
                            b.classList.toggle('ds-tab-active', i === idx);
                            b.setAttribute('aria-selected', i === idx ? 'true' : 'false');
                            if (tabContents[i]) {
                                tabContents[i].classList.toggle('hidden', i !== idx);
                            }
                        });
                    });
                    
                    // Keyboard navigation for tabs
                    btn.addEventListener('keydown', (e) => {
                        if (e.key === 'ArrowRight') {
                            tabButtons[(idx + 1) % tabButtons.length].focus();
                        } else if (e.key === 'ArrowLeft') {
                            tabButtons[(idx - 1 + tabButtons.length) % tabButtons.length].focus();
                        }
                    });
                });
            }

            // DS Modal
            const openModalBtn = document.getElementById('open-modal-demo');
            const dsModal = document.getElementById('ds-modal');
            
            if (openModalBtn && dsModal) {
                // Create modal content if it doesn't exist
                const modalContent = dsModal.querySelector('.bg-white');
                if (modalContent && !modalContent.children.length) {
                    const title = document.createElement('h3');
                    title.id = 'modal-title';
                    title.className = 'text-xl font-bold mb-4 text-webro-neutral dark:text-white';
                    title.textContent = 'DS Modal Example';
                    
                    const content = document.createElement('p');
                    content.className = 'mb-6 text-webro-neutral/80 dark:text-gray-300';
                    content.textContent = 'This is a sample modal dialog from the Webropol Design System.';
                    
                    const closeBtn = document.createElement('button');
                    closeBtn.id = 'close-modal-demo';
                    closeBtn.className = 'ds-btn ds-btn-primary';
                    closeBtn.textContent = 'Close Modal';
                    
                    modalContent.appendChild(title);
                    modalContent.appendChild(content);
                    modalContent.appendChild(closeBtn);
                }
                
                const closeModalBtn = document.getElementById('close-modal-demo');
                
                openModalBtn.addEventListener('click', () => {
                    dsModal.classList.remove('hidden');
                    dsModal.querySelector('button').focus();
                });
                
                closeModalBtn?.addEventListener('click', () => {
                    dsModal.classList.add('hidden');
                    openModalBtn.focus();
                });
                
                // Close modal on Escape
                document.addEventListener('keydown', (e) => {
                    if (e.key === 'Escape' && !dsModal.classList.contains('hidden')) {
                        dsModal.classList.add('hidden');
                        openModalBtn.focus();
                    }
                });
                
                // Trap focus in modal
                dsModal.addEventListener('keydown', (e) => {
                    if (e.key === 'Tab') {
                        const focusable = dsModal.querySelectorAll('button, [tabindex]:not([tabindex="-1"])');
                        const first = focusable[0];
                        const last = focusable[focusable.length - 1];
                        if (e.shiftKey ? document.activeElement === first : document.activeElement === last) {
                            e.preventDefault();
                            (e.shiftKey ? last : first).focus();
                        }
                    }
                });
                
                // Close modal when clicking outside
                dsModal.addEventListener('click', (e) => {
                    if (e.target === dsModal) {
                        dsModal.classList.add('hidden');
                        openModalBtn.focus();
                    }
                });
            }

            // DS Toast
            const showToastBtn = document.getElementById('show-toast-demo');
            const toastContainer = document.getElementById('ds-toast-container');
            
            if (showToastBtn && toastContainer) {
                showToastBtn.addEventListener('click', () => {
                    const toast = document.createElement('div');
                    toast.className = 'bg-webro-primary text-white px-4 py-2 rounded shadow mb-2 animate-fade-in flex justify-between items-center';
                    
                    const text = document.createElement('span');
                    text.textContent = 'This is a DS Toast notification!';
                    
                    const closeBtn = document.createElement('button');
                    closeBtn.className = 'ml-4 text-white hover:text-gray-200';
                    closeBtn.innerHTML = '&times;';
                    closeBtn.addEventListener('click', () => {
                        toast.classList.add('opacity-0');
                        setTimeout(() => toast.remove(), 300);
                    });
                    
                    toast.appendChild(text);
                    toast.appendChild(closeBtn);
                    toastContainer.appendChild(toast);
                    
                    // Auto-dismiss after a delay
                    setTimeout(() => {
                        toast.style.transition = 'opacity 0.3s ease';
                        toast.style.opacity = '0';
                        setTimeout(() => toast.remove(), 300);
                    }, 3000);
                });
            }

            // Dark Mode Toggle
            const darkModeToggle = document.getElementById('dark-mode-toggle');
            const htmlElement = document.documentElement;
            
            if (darkModeToggle) {
                darkModeToggle.addEventListener('click', () => {
                    if (htmlElement.classList.contains('dark')) {
                        htmlElement.classList.remove('dark');
                        localStorage.setItem('theme', 'light');
                    } else {
                        htmlElement.classList.add('dark');
                        localStorage.setItem('theme', 'dark');
                    }
                });
                
                // Set initial dark mode from localStorage or system preference
                if (localStorage.getItem('theme') === 'dark' || 
                    (!localStorage.getItem('theme') && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
                    htmlElement.classList.add('dark');
                } else {
                    htmlElement.classList.remove('dark');
                }
            }

            // Sidebar Toggle Functionality
            const sidebar = document.getElementById('ds-sidebar');
            const mainContent = document.getElementById('main-content');
            const sidebarToggle = document.getElementById('sidebar-toggle');
            const sidebarScrollContainer = sidebar?.querySelector('.sidebar-scroll-container');
              function setSidebarState(collapsed) {
                if (!sidebar || !mainContent || !sidebarToggle) return;
                
                if (collapsed) {
                    sidebar.classList.add('collapsed');
                    mainContent.style.marginLeft = '7rem'; // 4.5rem + left-offset + side-padding
                    sidebarToggle.setAttribute('aria-expanded', 'false');
                    localStorage.setItem('sidebarState', 'collapsed');
                } else {
                    sidebar.classList.remove('collapsed');
                    mainContent.style.marginLeft = '9rem'; // 6rem + left-offset + side-padding
                    sidebarToggle.setAttribute('aria-expanded', 'true');
                    localStorage.setItem('sidebarState', 'expanded');
                }
            }
            
            if (sidebar && mainContent && sidebarToggle) {
                sidebarToggle.addEventListener('click', () => {
                    setSidebarState(!sidebar.classList.contains('collapsed'));
                });
                
                // Initialize sidebar state from localStorage
                const initialSidebarState = localStorage.getItem('sidebarState');
                setSidebarState(initialSidebarState === 'collapsed');
            }
            
            // Sidebar scroll shadow handler
            function handleSidebarScroll() {
                if (!sidebarScrollContainer) return;
                
                const { scrollTop, scrollHeight, clientHeight } = sidebarScrollContainer;
                const atTop = scrollTop <= 5; // Add a small threshold
                const atBottom = scrollTop + clientHeight >= scrollHeight - 5; // Add a small threshold
                
                // Show/hide top shadow
                sidebarScrollContainer.classList.toggle('show-top-shadow', !atTop);
                
                // Show/hide bottom shadow
                // Only show if there's actually scrollable content and not at the bottom
                const hasScrollableContent = scrollHeight > clientHeight;
                sidebarScrollContainer.classList.toggle('show-bottom-shadow', hasScrollableContent && !atBottom);
            }
            
            if (sidebarScrollContainer) {
                sidebarScrollContainer.addEventListener('scroll', handleSidebarScroll);
                
                // Initial check
                handleSidebarScroll();
                
                // Re-check on window resize or sidebar toggle as content might change
                window.addEventListener('resize', handleSidebarScroll);
                sidebarToggle?.addEventListener('click', () => {
                    // Allow transition to complete before recalculating
                    setTimeout(handleSidebarScroll, 350);
                });
                
                // Check after small delay for initial render
                setTimeout(handleSidebarScroll, 100);
            }

            // Active Link on Scroll
            const sections = document.querySelectorAll('#main-content section[id], #main-content div[id].p-12');
            const sidebarLinks = document.querySelectorAll('.sidebar-link');
            const mainScrollContainer = document.getElementById('main-content');
            
            if (sections.length > 0 && sidebarLinks.length > 0 && mainScrollContainer) {
                const observerOptions = {
                    root: mainScrollContainer,
                    rootMargin: '-20% 0px -60% 0px',
                    threshold: 0.1
                };
                
                function activateLink(id) {
                    sidebarLinks.forEach(link => {
                        link.classList.toggle('active-link', link.getAttribute('href') === `#${id}`);
                    });
                }
                
                const observerCallback = (entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            activateLink(entry.target.id);
                        }
                    });
                };
                
                // Set up intersection observer for section visibility
                const scrollObserver = new IntersectionObserver(observerCallback, observerOptions);
                sections.forEach(section => {
                    if (section.id) {
                        scrollObserver.observe(section);
                    }
                });
                
                // Activate link based on initial hash or first section
                const currentHash = window.location.hash.substring(1);
                if (currentHash) {
                    activateLink(currentHash);
                    const targetSection = document.getElementById(currentHash);
                    if (targetSection) {
                        setTimeout(() => {
                            mainScrollContainer.scrollTo({
                                top: targetSection.offsetTop - 80, // Account for header
                                behavior: 'auto'
                            });
                        }, 100);
                    }
                } else if (sections.length > 0 && sections[0].id) {
                    activateLink(sections[0].id);
                }
            }
        });
    </script>
</body>
</html>
``` 